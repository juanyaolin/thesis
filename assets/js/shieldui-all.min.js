/* Shield UI 1.7.29 Trial Version | Copyright 2013-2017 Shield UI Ltd. | http://www.shieldui.com/eula */
function a(b){this.ok=!1,"#"==b.charAt(0)&&(b=b.substr(1,6)),b=b.replace(/ /g,""),b=b.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var d in c)b==d&&(b=c[d]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],f=0;f<e.length;f++){var g=e[f].re,h=e[f].process,i=g.exec(b);i&&(channels=h(i),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);return 1==a.length&&(a="0"+a),1==b.length&&(b="0"+b),1==c.length&&(c="0"+c),"#"+a+b+c},this.getHelpXML=function(){for(var b=new Array,d=0;d<e.length;d++)for(var f=e[d].example,g=0;g<f.length;g++)b[b.length]=f[g];for(var h in c)b[b.length]=h;var i=document.createElement("ul");i.setAttribute("id","rgbcolor-examples");for(var d=0;d<b.length;d++)try{var j=document.createElement("li"),k=new a(b[d]),l=document.createElement("div");l.style.cssText="margin: 3px; border: 1px solid black; background:"+k.toHex()+"; color:"+k.toHex(),l.appendChild(document.createTextNode("test"));var m=document.createTextNode(" "+b[d]+" -> "+k.toRGB()+" -> "+k.toHex());j.appendChild(l),j.appendChild(m),i.appendChild(j)}catch(n){}return i}}!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=g.detail*-1),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=g.wheelDeltaX*-1),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=m*-1,m=0),j=0===m?l:m,"deltaY"in g&&(m=g.deltaY*-1,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=l*-1)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(){function b(){var b={};return b.FRAMERATE=30,b.MAX_VIRTUAL_PIXELS=3e4,b.init=function(a){b.Definitions={},b.Styles={},b.Animations=[],b.Images=[],b.ctx=a,b.ViewPort=new function(){this.viewPorts=[],this.Clear=function(){this.viewPorts=[]},this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})},this.RemoveCurrent=function(){this.viewPorts.pop()},this.Current=function(){return this.viewPorts[this.viewPorts.length-1]},this.width=function(){return this.Current().width},this.height=function(){return this.Current().height},this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}},b.init(),b.ImagesLoaded=function(){for(var a=0;a<b.Images.length;a++)if(!b.Images[a].loaded)return!1;return!0},b.trim=function(a){return a.replace(/^\s+|\s+$/g,"")},b.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")},b.ajax=function(a){var b;return b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),b?(b.open("GET",a,!1),b.send(null),b.responseText):null},b.parseXml=function(a){if(window.DOMParser){var b=new DOMParser;return b.parseFromString(a,"text/xml")}a=a.replace(/<!DOCTYPE svg[^>]*>/,"");var c=new ActiveXObject("Microsoft.XMLDOM");return c.async="false",c.loadXML(a),c},b.Property=function(a,b){this.name=a,this.value=b},b.Property.prototype.getValue=function(){return this.value},b.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value},b.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);return(this.value+"").match(/%$/)&&(a/=100),a},b.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a},b.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a},b.Property.prototype.addOpacity=function(c){var d=this.value;if(null!=c&&""!=c&&"string"==typeof this.value){var e=new a(this.value);e.ok&&(d="rgba("+e.r+", "+e.g+", "+e.b+", "+c+")")}return new b.Property(this.name,d)},b.Property.prototype.getDefinition=function(){var a=this.value.match(/#([^\)']+)/);return a&&(a=a[1]),a||(a=this.value),b.Definitions[a]},b.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")},b.Property.prototype.getFillStyleDefinition=function(a,c){var d=this.getDefinition();return null!=d&&d.createGradient?d.createGradient(b.ctx,a,c):null!=d&&d.createPattern?d.createPattern(b.ctx,a):null},b.Property.prototype.getDPI=function(a){return 96},b.Property.prototype.getEM=function(a){var c=12,d=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);return d.hasValue()&&(c=d.toPixels(a)),c},b.Property.prototype.getUnits=function(){var a=this.value+"";return a.replace(/[0-9\.\-]/g,"")},b.Property.prototype.toPixels=function(a,c){if(!this.hasValue())return 0;var d=this.value+"";if(d.match(/em$/))return this.numValue()*this.getEM(a);if(d.match(/ex$/))return this.numValue()*this.getEM(a)/2;if(d.match(/px$/))return this.numValue();if(d.match(/pt$/))return this.numValue()*this.getDPI(a)*(1/72);if(d.match(/pc$/))return 15*this.numValue();if(d.match(/cm$/))return this.numValue()*this.getDPI(a)/2.54;if(d.match(/mm$/))return this.numValue()*this.getDPI(a)/25.4;if(d.match(/in$/))return this.numValue()*this.getDPI(a);if(d.match(/%$/))return this.numValue()*b.ViewPort.ComputeSize(a);var e=this.numValue();return c&&e<1?e*b.ViewPort.ComputeSize(a):e},b.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/s$/)?1e3*this.numValue():a.match(/ms$/)?this.numValue():this.numValue()},b.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?this.numValue():this.numValue()*(Math.PI/180)},b.Font=new function(){this.Styles="normal|italic|oblique|inherit",this.Variants="normal|small-caps|inherit",this.Weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit",this.CreateFont=function(a,c,d,e,f,g){var h=null!=g?this.Parse(g):this.CreateFont("","","","","",b.ctx.font);return{fontFamily:f||h.fontFamily,fontSize:e||h.fontSize,fontStyle:a||h.fontStyle,fontWeight:d||h.fontWeight,fontVariant:c||h.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(c){for(var d={},e=b.trim(b.compressSpaces(c||"")).split(" "),f={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1},g="",h=0;h<e.length;h++)f.fontStyle||a.Styles.indexOf(e[h])==-1?f.fontVariant||a.Variants.indexOf(e[h])==-1?f.fontWeight||a.Weights.indexOf(e[h])==-1?f.fontSize?"inherit"!=e[h]&&(g+=e[h]):("inherit"!=e[h]&&(d.fontSize=e[h].split("/")[0]),f.fontStyle=f.fontVariant=f.fontWeight=f.fontSize=!0):("inherit"!=e[h]&&(d.fontWeight=e[h]),f.fontStyle=f.fontVariant=f.fontWeight=!0):("inherit"!=e[h]&&(d.fontVariant=e[h]),f.fontStyle=f.fontVariant=!0):("inherit"!=e[h]&&(d.fontStyle=e[h]),f.fontStyle=!0);return""!=g&&(d.fontFamily=g),d}},b.ToNumberArray=function(a){for(var c=b.trim(b.compressSpaces((a||"").replace(/,/g," "))).split(" "),d=0;d<c.length;d++)c[d]=parseFloat(c[d]);return c},b.Point=function(a,b){this.x=a,this.y=b},b.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},b.Point.prototype.applyTransform=function(a){var b=this.x*a[0]+this.y*a[2]+a[4],c=this.x*a[1]+this.y*a[3]+a[5];this.x=b,this.y=c},b.CreatePoint=function(a){var c=b.ToNumberArray(a);return new b.Point(c[0],c[1])},b.CreatePath=function(a){for(var c=b.ToNumberArray(a),d=[],e=0;e<c.length;e+=2)d.push(new b.Point(c[e],c[e+1]));return d},b.BoundingBox=function(a,b,c,d){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN,this.x=function(){return this.x1},this.y=function(){return this.y1},this.width=function(){return this.x2-this.x1},this.height=function(){return this.y2-this.y1},this.addPoint=function(a,b){null!=a&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=a,this.x2=a),a<this.x1&&(this.x1=a),a>this.x2&&(this.x2=a)),null!=b&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=b,this.y2=b),b<this.y1&&(this.y1=b),b>this.y2&&(this.y2=b))},this.addX=function(a){this.addPoint(a,null)},this.addY=function(a){this.addPoint(null,a)},this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1),this.addPoint(a.x2,a.y2)},this.addQuadraticCurve=function(a,b,c,d,e,f){var g=a+2/3*(c-a),h=b+2/3*(d-b),i=g+1/3*(e-a),j=h+1/3*(f-b);this.addBezierCurve(a,b,g,i,h,j,e,f)},this.addBezierCurve=function(a,b,c,d,e,f,g,h){var j=[a,b],k=[c,d],l=[e,f],m=[g,h];for(this.addPoint(j[0],j[1]),this.addPoint(m[0],m[1]),i=0;i<=1;i++){var n=function(a){return Math.pow(1-a,3)*j[i]+3*Math.pow(1-a,2)*a*k[i]+3*(1-a)*Math.pow(a,2)*l[i]+Math.pow(a,3)*m[i]},o=6*j[i]-12*k[i]+6*l[i],p=-3*j[i]+9*k[i]-9*l[i]+3*m[i],q=3*k[i]-3*j[i];if(0!=p){var r=Math.pow(o,2)-4*q*p;if(!(r<0)){var s=(-o+Math.sqrt(r))/(2*p);0<s&&s<1&&(0==i&&this.addX(n(s)),1==i&&this.addY(n(s)));var t=(-o-Math.sqrt(r))/(2*p);0<t&&t<1&&(0==i&&this.addX(n(t)),1==i&&this.addY(n(t)))}}else{if(0==o)continue;var u=-q/o;0<u&&u<1&&(0==i&&this.addX(n(u)),1==i&&this.addY(n(u)))}}},this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2},this.addPoint(a,b),this.addPoint(c,d)},b.Transform=function(a){var c=this;this.Type={},this.Type.translate=function(a){this.p=b.CreatePoint(a),this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)},this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}},this.Type.rotate=function(a){var c=b.ToNumberArray(a);this.angle=new b.Property("angle",c[0]),this.cx=c[1]||0,this.cy=c[2]||0,this.apply=function(a){a.translate(this.cx,this.cy),a.rotate(this.angle.toRadians()),a.translate(-this.cx,-this.cy)},this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]),a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]),a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}},this.Type.scale=function(a){this.p=b.CreatePoint(a),this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||1)},this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}},this.Type.matrix=function(a){this.m=b.ToNumberArray(a),this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])},this.applyToPoint=function(a){a.applyTransform(this.m)}},this.Type.SkewBase=function(a){this.base=c.Type.matrix,this.base(a),this.angle=new b.Property("angle",a)},this.Type.SkewBase.prototype=new this.Type.matrix,this.Type.skewX=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]},this.Type.skewX.prototype=new this.Type.SkewBase,this.Type.skewY=function(a){this.base=c.Type.SkewBase,this.base(a),this.m=[1,Math.tan(this.angle.toRadians()),0,1,0,0]},this.Type.skewY.prototype=new this.Type.SkewBase,this.transforms=[],this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)},this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};for(var d=b.trim(b.compressSpaces(a)).replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/),e=0;e<d.length;e++){var f=d[e].split("(")[0],g=d[e].split("(")[1].replace(")",""),h=new this.Type[f](g);h.type=f,this.transforms.push(h)}},b.AspectRatio=function(a,c,d,e,f,g,h,i,j,k){c=b.compressSpaces(c),c=c.replace(/^defer\s/,"");var l=c.split(" ")[0]||"xMidYMid",m=c.split(" ")[1]||"meet",n=d/e,o=f/g,p=Math.min(n,o),q=Math.max(n,o);"meet"==m&&(e*=p,g*=p),"slice"==m&&(e*=q,g*=q),j=new b.Property("refX",j),k=new b.Property("refY",k),j.hasValue()&&k.hasValue()?a.translate(-p*j.toPixels("x"),-p*k.toPixels("y")):(l.match(/^xMid/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&a.translate(d/2-e/2,0),l.match(/YMid$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&a.translate(0,f/2-g/2),l.match(/^xMax/)&&("meet"==m&&p==o||"slice"==m&&q==o)&&a.translate(d-e,0),l.match(/YMax$/)&&("meet"==m&&p==n||"slice"==m&&q==n)&&a.translate(0,f-g)),"none"==l?a.scale(n,o):"meet"==m?a.scale(p,p):"slice"==m&&a.scale(q,q),a.translate(null==h?0:-h,null==i?0:-i)},b.Element={},b.EmptyProperty=new b.Property("EMPTY",""),b.Element.ElementBase=function(a){if(this.attributes={},this.styles={},this.children=[],this.attribute=function(a,c){var d=this.attributes[a];return null!=d?d:(1==c&&(d=new b.Property(a,""),this.attributes[a]=d),d||b.EmptyProperty)},this.style=function(a,c){var d=this.styles[a];if(null!=d)return d;var e=this.attribute(a);if(null!=e&&e.hasValue())return this.styles[a]=e,e;var f=this.parent;if(null!=f){var g=f.style(a);if(null!=g&&g.hasValue())return g}return 1==c&&(d=new b.Property(a,""),this.styles[a]=d),d||b.EmptyProperty},this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.attribute("visibility").value){if(a.save(),this.attribute("mask").hasValue()){var b=this.attribute("mask").getDefinition();null!=b&&b.apply(a,this)}else if(this.style("filter").hasValue()){var c=this.style("filter").getDefinition();null!=c&&c.apply(a,this)}else this.setContext(a),this.renderChildren(a),this.clearContext(a);a.restore()}},this.setContext=function(a){},this.clearContext=function(a){},this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)},this.addChild=function(a,c){var d=a;c&&(d=b.CreateElement(a)),d.parent=this,this.children.push(d)},null!=a&&1==a.nodeType){for(var c=0;c<a.childNodes.length;c++){var d=a.childNodes[c];1==d.nodeType&&this.addChild(d,!0),this.captureTextNodes&&3==d.nodeType&&this.addChild(new b.Element.tspan(d),!1)}for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];this.attributes[e.nodeName]=new b.Property(e.nodeName,e.nodeValue)}var f=b.Styles[a.nodeName];if(null!=f)for(var g in f)this.styles[g]=f[g];if(this.attribute("class").hasValue())for(var h=b.compressSpaces(this.attribute("class").value).split(" "),i=0;i<h.length;i++){if(f=b.Styles["."+h[i]],null!=f)for(var g in f)this.styles[g]=f[g];if(f=b.Styles[a.nodeName+"."+h[i]],null!=f)for(var g in f)this.styles[g]=f[g]}if(this.attribute("id").hasValue()){var f=b.Styles["#"+this.attribute("id").value];if(null!=f)for(var g in f)this.styles[g]=f[g]}if(this.attribute("style").hasValue())for(var f=this.attribute("style").value.split(";"),c=0;c<f.length;c++)if(""!=b.trim(f[c])){var j=f[c].split(":"),g=b.trim(j[0]),k=b.trim(j[1]);this.styles[g]=new b.Property(g,k)}this.attribute("id").hasValue()&&null==b.Definitions[this.attribute("id").value]&&(b.Definitions[this.attribute("id").value]=this)}},b.Element.RenderedElementBase=function(a){this.base=b.Element.ElementBase,this.base(a),this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var c=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=c&&(a.fillStyle=c)}else if(this.style("fill").hasValue()){var d=this.style("fill");"currentColor"==d.value&&(d.value=this.style("color").value),a.fillStyle="none"==d.value?"rgba(0,0,0,0)":d.value}if(this.style("fill-opacity").hasValue()){var d=new b.Property("fill",a.fillStyle);d=d.addOpacity(this.style("fill-opacity").value),a.fillStyle=d.value}if(this.style("stroke").isUrlDefinition()){var c=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity"));null!=c&&(a.strokeStyle=c)}else if(this.style("stroke").hasValue()){var e=this.style("stroke");"currentColor"==e.value&&(e.value=this.style("color").value),a.strokeStyle="none"==e.value?"rgba(0,0,0,0)":e.value}if(this.style("stroke-opacity").hasValue()){var e=new b.Property("stroke",a.strokeStyle);e=e.addOpacity(this.style("stroke-opacity").value),a.strokeStyle=e.value}if(this.style("stroke-width").hasValue()){var f=this.style("stroke-width").toPixels();a.lineWidth=0==f?.001:f}if(this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value),this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value),this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value),"undefined"!=typeof a.font&&(a.font=b.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString()),this.attribute("transform").hasValue()){var g=new b.Transform(this.attribute("transform").value);g.apply(a)}if(this.attribute("clip-path").hasValue()){var h=this.attribute("clip-path").getDefinition();null!=h&&h.apply(a)}this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}},b.Element.RenderedElementBase.prototype=new b.Element.ElementBase,b.Element.PathElementBase=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.path=function(a){return null!=a&&a.beginPath(),new b.BoundingBox},this.renderChildren=function(a){this.path(a),b.Mouse.checkPath(this,a),""!=a.fillStyle&&a.fill(),""!=a.strokeStyle&&a.stroke();var c=this.getMarkers();if(null!=c){if(this.style("marker-start").isUrlDefinition()){var d=this.style("marker-start").getDefinition();d.render(a,c[0][0],c[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var d=this.style("marker-mid").getDefinition(),e=1;e<c.length-1;e++)d.render(a,c[e][0],c[e][1]);if(this.style("marker-end").isUrlDefinition()){var d=this.style("marker-end").getDefinition();d.render(a,c[c.length-1][0],c[c.length-1][1])}}},this.getBoundingBox=function(){return this.path()},this.getMarkers=function(){return null}},b.Element.PathElementBase.prototype=new b.Element.RenderedElementBase,b.Element.svg=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseClearContext=this.clearContext,this.clearContext=function(a){this.baseClearContext(a),b.ViewPort.RemoveCurrent()},this.baseSetContext=this.setContext,this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)",a.lineCap="butt",a.lineJoin="miter",a.miterLimit=4,this.baseSetContext(a),this.attribute("x").hasValue()||(this.attribute("x",!0).value=0),this.attribute("y").hasValue()||(this.attribute("y",!0).value=0),a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var c=b.ViewPort.width(),d=b.ViewPort.height();if(this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%"),this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%"),"undefined"==typeof this.root){c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");var e=0,f=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(e=-this.attribute("refX").toPixels("x"),f=-this.attribute("refY").toPixels("y")),a.beginPath(),a.moveTo(e,f),a.lineTo(c,f),a.lineTo(c,d),a.lineTo(e,d),a.closePath(),a.clip()}if(b.ViewPort.SetCurrent(c,d),this.attribute("viewBox").hasValue()){var g=b.ToNumberArray(this.attribute("viewBox").value),h=g[0],i=g[1];c=g[2],d=g[3],b.AspectRatio(a,this.attribute("preserveAspectRatio").value,b.ViewPort.width(),c,b.ViewPort.height(),d,h,i,this.attribute("refX").value,this.attribute("refY").value),b.ViewPort.RemoveCurrent(),b.ViewPort.SetCurrent(g[2],g[3])}}},b.Element.svg.prototype=new b.Element.RenderedElementBase,b.Element.rect=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(a){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),h=this.attribute("ry").toPixels("y");return this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=g),this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=h),g=Math.min(g,e/2),h=Math.min(h,f/2),null!=a&&(a.beginPath(),a.moveTo(c+g,d),a.lineTo(c+e-g,d),a.quadraticCurveTo(c+e,d,c+e,d+h),a.lineTo(c+e,d+f-h),a.quadraticCurveTo(c+e,d+f,c+e-g,d+f),a.lineTo(c+g,d+f),a.quadraticCurveTo(c,d+f,c,d+f-h),a.lineTo(c,d+h),a.quadraticCurveTo(c,d,c+g,d),a.closePath()),new b.BoundingBox(c,d,c+e,d+f)}},b.Element.rect.prototype=new b.Element.PathElementBase,b.Element.circle=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(a){var c=this.attribute("cx").toPixels("x"),d=this.attribute("cy").toPixels("y"),e=this.attribute("r").toPixels();return null!=a&&(a.beginPath(),a.arc(c,d,e,0,2*Math.PI,!0),a.closePath()),new b.BoundingBox(c-e,d-e,c+e,d+e)}},b.Element.circle.prototype=new b.Element.PathElementBase,b.Element.ellipse=function(a){this.base=b.Element.PathElementBase,this.base(a),this.path=function(a){var c=4*((Math.sqrt(2)-1)/3),d=this.attribute("rx").toPixels("x"),e=this.attribute("ry").toPixels("y"),f=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");return null!=a&&(a.beginPath(),a.moveTo(f,g-e),a.bezierCurveTo(f+c*d,g-e,f+d,g-c*e,f+d,g),a.bezierCurveTo(f+d,g+c*e,f+c*d,g+e,f,g+e),a.bezierCurveTo(f-c*d,g+e,f-d,g+c*e,f-d,g),a.bezierCurveTo(f-d,g-c*e,f-c*d,g-e,f,g-e),a.closePath()),new b.BoundingBox(f-d,g-e,f+d,g+e)}},b.Element.ellipse.prototype=new b.Element.PathElementBase,b.Element.line=function(a){this.base=b.Element.PathElementBase,this.base(a),this.getPoints=function(){return[new b.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new b.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]},this.path=function(a){var c=this.getPoints();return null!=a&&(a.beginPath(),a.moveTo(c[0].x,c[0].y),a.lineTo(c[1].x,c[1].y)),new b.BoundingBox(c[0].x,c[0].y,c[1].x,c[1].y)},this.getMarkers=function(){var a=this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}},b.Element.line.prototype=new b.Element.PathElementBase,b.Element.polyline=function(a){this.base=b.Element.PathElementBase,this.base(a),this.points=b.CreatePath(this.attribute("points").value),this.path=function(a){var c=new b.BoundingBox(this.points[0].x,this.points[0].y);null!=a&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var d=1;d<this.points.length;d++)c.addPoint(this.points[d].x,this.points[d].y),null!=a&&a.lineTo(this.points[d].x,this.points[d].y);return c},this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);return a.push([this.points[this.points.length-1],a[a.length-1][1]]),a}},b.Element.polyline.prototype=new b.Element.PathElementBase,b.Element.polygon=function(a){this.base=b.Element.polyline,this.base(a),this.basePath=this.path,this.path=function(a){var b=this.basePath(a);return null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),a.closePath()),b}},b.Element.polygon.prototype=new b.Element.polyline,b.Element.path=function(a){this.base=b.Element.PathElementBase,this.base(a);var c=this.attribute("d").value;c=c.replace(/,/gm," "),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2"),c=c.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2"),c=c.replace(/([0-9])([+\-])/gm,"$1 $2"),c=c.replace(/(\.[0-9]*)(\.)/gm,"$1 $2"),c=c.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 "),c=b.compressSpaces(c),c=b.trim(c),this.PathParser=new function(a){this.tokens=a.split(" "),this.reset=function(){this.i=-1,this.command="",this.previousCommand="",this.start=new b.Point(0,0),this.control=new b.Point(0,0),this.current=new b.Point(0,0),this.points=[],this.angles=[]},this.isEnd=function(){return this.i>=this.tokens.length-1},this.isCommandOrEnd=function(){return!!this.isEnd()||null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)},this.isRelativeCommand=function(){switch(this.command){case"m":case"l":case"h":case"v":case"c":case"s":case"q":case"t":case"a":case"z":return!0}return!1},this.getToken=function(){return this.i++,this.tokens[this.i]},this.getScalar=function(){return parseFloat(this.getToken())},this.nextCommand=function(){this.previousCommand=this.command,this.command=this.getToken()},this.getPoint=function(){var a=new b.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)},this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a,a},this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a,a},this.getReflectedControlPoint=function(){if("c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase())return this.current;var a=new b.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y);return a},this.makeAbsolute=function(a){return this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y),a},this.addMarker=function(a,b,c){null!=c&&this.angles.length>0&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-1]=this.points[this.points.length-1].angleTo(c)),this.addMarkerAngle(a,null==b?null:b.angleTo(a))},this.addMarkerAngle=function(a,b){this.points.push(a),this.angles.push(b)},this.getMarkerPoints=function(){return this.points},this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(c),this.path=function(a){var c=this.PathParser;c.reset();var d=new b.BoundingBox;for(null!=a&&a.beginPath();!c.isEnd();)switch(c.nextCommand(),c.command){case"M":case"m":var e=c.getAsCurrentPoint();for(c.addMarker(e),d.addPoint(e.x,e.y),null!=a&&a.moveTo(e.x,e.y),c.start=c.current;!c.isCommandOrEnd();){var e=c.getAsCurrentPoint();c.addMarker(e,c.start),d.addPoint(e.x,e.y),null!=a&&a.lineTo(e.x,e.y)}break;case"L":case"l":for(;!c.isCommandOrEnd();){var f=c.current,e=c.getAsCurrentPoint();c.addMarker(e,f),d.addPoint(e.x,e.y),null!=a&&a.lineTo(e.x,e.y)}break;case"H":case"h":for(;!c.isCommandOrEnd();){var g=new b.Point((c.isRelativeCommand()?c.current.x:0)+c.getScalar(),c.current.y);c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=a&&a.lineTo(c.current.x,c.current.y)}break;case"V":case"v":for(;!c.isCommandOrEnd();){var g=new b.Point(c.current.x,(c.isRelativeCommand()?c.current.y:0)+c.getScalar());c.addMarker(g,c.current),c.current=g,d.addPoint(c.current.x,c.current.y),null!=a&&a.lineTo(c.current.x,c.current.y)}break;case"C":case"c":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=a&&a.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"S":case"s":for(;!c.isCommandOrEnd();){var h=c.current,i=c.getReflectedControlPoint(),j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,i),d.addBezierCurve(h.x,h.y,i.x,i.y,j.x,j.y,k.x,k.y),null!=a&&a.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y)}break;case"Q":case"q":for(;!c.isCommandOrEnd();){
var h=c.current,j=c.getAsControlPoint(),k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=a&&a.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"T":case"t":for(;!c.isCommandOrEnd();){var h=c.current,j=c.getReflectedControlPoint();c.control=j;var k=c.getAsCurrentPoint();c.addMarker(k,j,j),d.addQuadraticCurve(h.x,h.y,j.x,j.y,k.x,k.y),null!=a&&a.quadraticCurveTo(j.x,j.y,k.x,k.y)}break;case"A":case"a":for(;!c.isCommandOrEnd();){var h=c.current,l=c.getScalar(),m=c.getScalar(),n=c.getScalar()*(Math.PI/180),o=c.getScalar(),p=c.getScalar(),k=c.getAsCurrentPoint(),q=new b.Point(Math.cos(n)*(h.x-k.x)/2+Math.sin(n)*(h.y-k.y)/2,-Math.sin(n)*(h.x-k.x)/2+Math.cos(n)*(h.y-k.y)/2),r=Math.pow(q.x,2)/Math.pow(l,2)+Math.pow(q.y,2)/Math.pow(m,2);r>1&&(l*=Math.sqrt(r),m*=Math.sqrt(r));var s=(o==p?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(m,2)-Math.pow(l,2)*Math.pow(q.y,2)-Math.pow(m,2)*Math.pow(q.x,2))/(Math.pow(l,2)*Math.pow(q.y,2)+Math.pow(m,2)*Math.pow(q.x,2)));isNaN(s)&&(s=0);var t=new b.Point(s*l*q.y/m,s*-m*q.x/l),u=new b.Point((h.x+k.x)/2+Math.cos(n)*t.x-Math.sin(n)*t.y,(h.y+k.y)/2+Math.sin(n)*t.x+Math.cos(n)*t.y),v=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},w=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(v(a)*v(b))},x=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(w(a,b))},y=x([1,0],[(q.x-t.x)/l,(q.y-t.y)/m]),z=[(q.x-t.x)/l,(q.y-t.y)/m],A=[(-q.x-t.x)/l,(-q.y-t.y)/m],B=x(z,A);w(z,A)<=-1&&(B=Math.PI),w(z,A)>=1&&(B=0);var C=1-p?1:-1,D=y+C*(B/2),E=new b.Point(u.x+l*Math.cos(D),u.y+m*Math.sin(D));if(c.addMarkerAngle(E,D-C*Math.PI/2),c.addMarkerAngle(k,D-C*Math.PI),d.addPoint(k.x,k.y),null!=a){var w=l>m?l:m,F=l>m?1:l/m,G=l>m?m/l:1;a.translate(u.x,u.y),a.rotate(n),a.scale(F,G),a.arc(0,0,w,y,y+B,1-p),a.scale(1/F,1/G),a.rotate(-n),a.translate(-u.x,-u.y)}}break;case"Z":case"z":null!=a&&a.closePath(),c.current=c.start}return d},this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}},b.Element.path.prototype=new b.Element.PathElementBase,b.Element.pattern=function(a){this.base=b.Element.ElementBase,this.base(a),this.createPattern=function(a,c){var d=this.attribute("width").toPixels("x",!0),e=this.attribute("height").toPixels("y",!0),f=new b.Element.svg;f.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),f.attributes.width=new b.Property("width",d+"px"),f.attributes.height=new b.Property("height",e+"px"),f.attributes.transform=new b.Property("transform",this.attribute("patternTransform").value),f.children=this.children;var g=document.createElement("canvas");g.width=d,g.height=e;var h=g.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&h.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(var i=-1;i<=1;i++)for(var j=-1;j<=1;j++)h.save(),h.translate(i*g.width,j*g.height),f.render(h),h.restore();var k=a.createPattern(g,"repeat");return k}},b.Element.pattern.prototype=new b.Element.ElementBase,b.Element.marker=function(a){this.base=b.Element.ElementBase,this.base(a),this.baseRender=this.render,this.render=function(a,c,d){a.translate(c.x,c.y),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(d),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(a.lineWidth,a.lineWidth),a.save();var e=new b.Element.svg;e.attributes.viewBox=new b.Property("viewBox",this.attribute("viewBox").value),e.attributes.refX=new b.Property("refX",this.attribute("refX").value),e.attributes.refY=new b.Property("refY",this.attribute("refY").value),e.attributes.width=new b.Property("width",this.attribute("markerWidth").value),e.attributes.height=new b.Property("height",this.attribute("markerHeight").value),e.attributes.fill=new b.Property("fill",this.attribute("fill").valueOrDefault("black")),e.attributes.stroke=new b.Property("stroke",this.attribute("stroke").valueOrDefault("none")),e.children=this.children,e.render(a),a.restore(),"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(1/a.lineWidth,1/a.lineWidth),"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(-d),a.translate(-c.x,-c.y)}},b.Element.marker.prototype=new b.Element.ElementBase,b.Element.defs=function(a){this.base=b.Element.ElementBase,this.base(a),this.render=function(a){}},b.Element.defs.prototype=new b.Element.ElementBase,b.Element.GradientBase=function(a){this.base=b.Element.ElementBase,this.base(a),this.gradientUnits=this.attribute("gradientUnits").valueOrDefault("objectBoundingBox"),this.stops=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"stop"==d.type&&this.stops.push(d)}this.getGradient=function(){},this.createGradient=function(a,c,d){var e=this;this.attribute("xlink:href").hasValue()&&(e=this.attribute("xlink:href").getDefinition());var f=function(a){if(d.hasValue()){var c=new b.Property("color",a);return c.addOpacity(d.value).value}return a},g=this.getGradient(a,c);if(null==g)return f(e.stops[e.stops.length-1].color);for(var h=0;h<e.stops.length;h++)g.addColorStop(e.stops[h].offset,f(e.stops[h].color));if(this.attribute("gradientTransform").hasValue()){var i=b.ViewPort.viewPorts[0],j=new b.Element.rect;j.attributes.x=new b.Property("x",-b.MAX_VIRTUAL_PIXELS/3),j.attributes.y=new b.Property("y",-b.MAX_VIRTUAL_PIXELS/3),j.attributes.width=new b.Property("width",b.MAX_VIRTUAL_PIXELS),j.attributes.height=new b.Property("height",b.MAX_VIRTUAL_PIXELS);var k=new b.Element.g;k.attributes.transform=new b.Property("transform",this.attribute("gradientTransform").value),k.children=[j];var l=new b.Element.svg;l.attributes.x=new b.Property("x",0),l.attributes.y=new b.Property("y",0),l.attributes.width=new b.Property("width",i.width),l.attributes.height=new b.Property("height",i.height),l.children=[k];var m=document.createElement("canvas");m.width=i.width,m.height=i.height;var n=m.getContext("2d");return n.fillStyle=g,l.render(n),n.createPattern(m,"no-repeat")}return g}},b.Element.GradientBase.prototype=new b.Element.ElementBase,b.Element.linearGradient=function(a){this.base=b.Element.GradientBase,this.base(a),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y1").numValue():this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==g?null:a.createLinearGradient(d,e,f,g)}},b.Element.linearGradient.prototype=new b.Element.GradientBase,b.Element.radialGradient=function(a){this.base=b.Element.GradientBase,this.base(a),this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%"),this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%"),this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("cx").numValue():this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x")),this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));var h="objectBoundingBox"==this.gradientUnits?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(f,g,0,d,e,h)}},b.Element.radialGradient.prototype=new b.Element.GradientBase,b.Element.stop=function(a){this.base=b.Element.ElementBase,this.base(a),this.offset=this.attribute("offset").numValue(),this.offset<0&&(this.offset=0),this.offset>1&&(this.offset=1);var c=this.style("stop-color");this.style("stop-opacity").hasValue()&&(c=c.addOpacity(this.style("stop-opacity").value)),this.color=c.value},b.Element.stop.prototype=new b.Element.ElementBase,b.Element.AnimateBase=function(a){this.base=b.Element.ElementBase,this.base(a),b.Animations.push(this),this.duration=0,this.begin=this.attribute("begin").toMilliseconds(),this.maxDuration=this.begin+this.attribute("dur").toMilliseconds(),this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)},this.initialValue=null,this.initialUnits="",this.removed=!1,this.calcValue=function(){return""},this.update=function(a){if(null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits()),this.duration>this.maxDuration){if("indefinite"!=this.attribute("repeatCount").value&&"indefinite"!=this.attribute("repeatDur").value)return"remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed&&(this.removed=!0,this.getProperty().value=this.initialValue,!0);this.duration=0}this.duration=this.duration+a;var b=!1;if(this.begin<this.duration){var c=this.calcValue();if(this.attribute("type").hasValue()){var d=this.attribute("type").value;c=d+"("+c+")"}this.getProperty().value=c,b=!0}return b},this.from=this.attribute("from"),this.to=this.attribute("to"),this.values=this.attribute("values"),this.values.hasValue()&&(this.values.value=this.values.value.split(";")),this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var c=a.progress*(this.values.value.length-1),d=Math.floor(c),e=Math.ceil(c);a.from=new b.Property("from",parseFloat(this.values.value[d])),a.to=new b.Property("to",parseFloat(this.values.value[e])),a.progress=(c-d)/(e-d)}else a.from=this.from,a.to=this.to;return a}},b.Element.AnimateBase.prototype=new b.Element.ElementBase,b.Element.animate=function(a){this.base=b.Element.AnimateBase,this.base(a),this.calcValue=function(){var a=this.progress(),b=a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress;return b+this.initialUnits}},b.Element.animate.prototype=new b.Element.AnimateBase,b.Element.animateColor=function(c){this.base=b.Element.AnimateBase,this.base(c),this.calcValue=function(){var b=this.progress(),c=new a(b.from.value),d=new a(b.to.value);if(c.ok&&d.ok){var e=c.r+(d.r-c.r)*b.progress,f=c.g+(d.g-c.g)*b.progress,g=c.b+(d.b-c.b)*b.progress;return"rgb("+parseInt(e,10)+","+parseInt(f,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}},b.Element.animateColor.prototype=new b.Element.AnimateBase,b.Element.animateTransform=function(a){this.base=b.Element.AnimateBase,this.base(a),this.calcValue=function(){for(var a=this.progress(),c=b.ToNumberArray(a.from.value),d=b.ToNumberArray(a.to.value),e="",f=0;f<c.length;f++)e+=c[f]+(d[f]-c[f])*a.progress+" ";return e}},b.Element.animateTransform.prototype=new b.Element.animate,b.Element.font=function(a){this.base=b.Element.ElementBase,this.base(a),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.isRTL=!1,this.isArabic=!1,this.fontFace=null,this.missingGlyph=null,this.glyphs=[];for(var c=0;c<this.children.length;c++){var d=this.children[c];"font-face"==d.type?(this.fontFace=d,d.style("font-family").hasValue()&&(b.Definitions[d.style("font-family").value]=this)):"missing-glyph"==d.type?this.missingGlyph=d:"glyph"==d.type&&(""!=d.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"==typeof this.glyphs[d.unicode]&&(this.glyphs[d.unicode]=[]),this.glyphs[d.unicode][d.arabicForm]=d):this.glyphs[d.unicode]=d)}},b.Element.font.prototype=new b.Element.ElementBase,b.Element.fontface=function(a){this.base=b.Element.ElementBase,this.base(a),this.ascent=this.attribute("ascent").value,this.descent=this.attribute("descent").value,this.unitsPerEm=this.attribute("units-per-em").numValue()},b.Element.fontface.prototype=new b.Element.ElementBase,b.Element.missingglyph=function(a){this.base=b.Element.path,this.base(a),this.horizAdvX=0},b.Element.missingglyph.prototype=new b.Element.path,b.Element.glyph=function(a){this.base=b.Element.path,this.base(a),this.horizAdvX=this.attribute("horiz-adv-x").numValue(),this.unicode=this.attribute("unicode").value,this.arabicForm=this.attribute("arabic-form").value},b.Element.glyph.prototype=new b.Element.path,b.Element.text=function(a){this.captureTextNodes=!0,this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.style("dominant-baseline").hasValue()&&(a.textBaseline=this.style("dominant-baseline").value),this.style("alignment-baseline").hasValue()&&(a.textBaseline=this.style("alignment-baseline").value)},this.renderChildren=function(a){this.textAnchor=this.style("text-anchor").valueOrDefault("start"),this.x=this.attribute("x").toPixels("x"),this.y=this.attribute("y").toPixels("y");for(var b=0;b<this.children.length;b++)this.renderChild(a,this,b)},this.renderChild=function(a,b,c){var d=b.children[c];d.attribute("x").hasValue()?d.x=d.attribute("x").toPixels("x"):(this.attribute("dx").hasValue()&&(this.y+=this.attribute("dx").toPixels("x")),d.attribute("dx").hasValue()&&(this.x+=d.attribute("dx").toPixels("x")),d.x=this.x);var e=d.measureText(a);if("start"!=this.textAnchor&&(0==c||d.attribute("x").hasValue())){for(var f=e,g=c+1;g<this.children.length;g++){var h=this.children[g];if(h.attribute("x").hasValue())break;f+=h.measureText(a)}d.x-="end"==this.textAnchor?f:f/2}this.x=d.x+e,d.attribute("y").hasValue()?d.y=d.attribute("y").toPixels("y"):(this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y")),d.attribute("dy").hasValue()&&(this.y+=d.attribute("dy").toPixels("y")),d.y=this.y),this.y=d.y,d.render(a);for(var c=0;c<d.children.length;c++)this.renderChild(a,d,c)}},b.Element.text.prototype=new b.Element.RenderedElementBase,b.Element.TextElementBase=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&(f="terminal"),c>0&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial"),c>0&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial"),"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];return null==e&&(e=a.missingGlyph),e},this.renderChildren=function(a){var c=this.parent.style("font-family").getDefinition();if(null==c)""!=a.fillStyle&&a.fillText(b.compressSpaces(this.getText()),this.x,this.y),""!=a.strokeStyle&&a.strokeText(b.compressSpaces(this.getText()),this.x,this.y);else{var d=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),e=this.parent.style("font-style").valueOrDefault(b.Font.Parse(b.ctx.font).fontStyle),f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=b.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h),j=d/c.fontFace.unitsPerEm;a.translate(this.x,this.y),a.scale(j,-j);var k=a.lineWidth;a.lineWidth=a.lineWidth*c.fontFace.unitsPerEm/d,"italic"==e&&a.transform(1,0,.4,1,0,0),i.render(a),"italic"==e&&a.transform(1,0,-.4,1,0,0),a.lineWidth=k,a.scale(1/j,-1/j),a.translate(-this.x,-this.y),this.x+=d*(i.horizAdvX||c.horizAdvX)/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(this.x+=g[h])}}},this.getText=function(){},this.measureText=function(a){var c=this.parent.style("font-family").getDefinition();if(null!=c){var d=this.parent.style("font-size").numValueOrDefault(b.Font.Parse(b.ctx.font).fontSize),e=0,f=this.getText();c.isRTL&&(f=f.split("").reverse().join(""));for(var g=b.ToNumberArray(this.parent.attribute("dx").value),h=0;h<f.length;h++){var i=this.getGlyph(c,f,h);e+=(i.horizAdvX||c.horizAdvX)*d/c.fontFace.unitsPerEm,"undefined"==typeof g[h]||isNaN(g[h])||(e+=g[h])}return e}var j=b.compressSpaces(this.getText());if(!a.measureText)return 10*j.length;a.save(),this.setContext(a);var k=a.measureText(j).width;return a.restore(),k}},b.Element.TextElementBase.prototype=new b.Element.RenderedElementBase,b.Element.tspan=function(a){this.captureTextNodes=!0,this.base=b.Element.TextElementBase,this.base(a),this.text=a.nodeValue||a.text||"",this.getText=function(){return this.text}},b.Element.tspan.prototype=new b.Element.TextElementBase,b.Element.tref=function(a){this.base=b.Element.TextElementBase,this.base(a),this.getText=function(){var a=this.attribute("xlink:href").getDefinition();if(null!=a)return a.children[0].getText()}},b.Element.tref.prototype=new b.Element.TextElementBase,b.Element.a=function(a){this.base=b.Element.TextElementBase,this.base(a),this.hasText=!0;for(var c=0;c<a.childNodes.length;c++)3!=a.childNodes[c].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].nodeValue:"",this.getText=function(){return this.text},this.baseRenderChildren=this.renderChildren,this.renderChildren=function(a){if(this.hasText){this.baseRenderChildren(a);var c=new b.Property("fontSize",b.Font.Parse(b.ctx.font).fontSize);b.Mouse.checkBoundingBox(this,new b.BoundingBox(this.x,this.y-c.toPixels("y"),this.x+this.measureText(a),this.y))}else{var d=new b.Element.g;d.children=this.children,d.parent=this,d.render(a)}},this.onclick=function(){window.open(this.attribute("xlink:href").value)},this.onmousemove=function(){b.ctx.canvas.style.cursor="pointer"}},b.Element.a.prototype=new b.Element.TextElementBase,b.Element.image=function(a){this.base=b.Element.RenderedElementBase,this.base(a);var c=this.attribute("xlink:href").value,d=c.match(/\.svg$/);if(b.Images.push(this),this.loaded=!1,d)this.img=b.ajax(c),this.loaded=!0;else{this.img=document.createElement("img");var e=this;this.img.onload=function(){e.loaded=!0},this.img.onerror=function(){console&&console.log('ERROR: image "'+c+'" not found'),e.loaded=!0},this.img.src=c}this.renderChildren=function(a){var c=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");0!=f&&0!=g&&(a.save(),d?a.drawSvg(this.img,c,e,f,g):(a.translate(c,e),b.AspectRatio(a,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),a.drawImage(this.img,0,0)),a.restore())},this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new b.BoundingBox(a,c,a+d,c+e)}},b.Element.image.prototype=new b.Element.RenderedElementBase,b.Element.g=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.getBoundingBox=function(){for(var a=new b.BoundingBox,c=0;c<this.children.length;c++)a.addBoundingBox(this.children[c].getBoundingBox());return a}},b.Element.g.prototype=new b.Element.RenderedElementBase,b.Element.symbol=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){if(this.baseSetContext(a),this.attribute("viewBox").hasValue()){var c=b.ToNumberArray(this.attribute("viewBox").value),d=c[0],e=c[1];width=c[2],height=c[3],b.AspectRatio(a,this.attribute("preserveAspectRatio").value,this.attribute("width").toPixels("x"),width,this.attribute("height").toPixels("y"),height,d,e),b.ViewPort.SetCurrent(c[2],c[3])}}},b.Element.symbol.prototype=new b.Element.RenderedElementBase,b.Element.style=function(a){this.base=b.Element.ElementBase,this.base(a);for(var c="",d=0;d<a.childNodes.length;d++)c+=a.childNodes[d].nodeValue;c=c.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,""),c=b.compressSpaces(c);for(var e=c.split("}"),d=0;d<e.length;d++)if(""!=b.trim(e[d]))for(var f=e[d].split("{"),g=f[0].split(","),h=f[1].split(";"),i=0;i<g.length;i++){var j=b.trim(g[i]);if(""!=j){for(var k={},l=0;l<h.length;l++){var m=h[l].indexOf(":"),n=h[l].substr(0,m),o=h[l].substr(m+1,h[l].length-m);null!=n&&null!=o&&(k[b.trim(n)]=new b.Property(b.trim(n),b.trim(o)))}if(b.Styles[j]=k,"@font-face"==j)for(var p=k["font-family"].value.replace(/"/g,""),q=k.src.value.split(","),r=0;r<q.length;r++)if(q[r].indexOf('format("svg")')>0)for(var s=q[r].indexOf("url"),t=q[r].indexOf(")",s),u=q[r].substr(s+5,t-s-6),v=b.parseXml(b.ajax(u)),w=v.getElementsByTagName("font"),x=0;x<w.length;x++){var y=b.CreateElement(w[x]);b.Definitions[p]=y}}}},b.Element.style.prototype=new b.Element.ElementBase,b.Element.use=function(a){this.base=b.Element.RenderedElementBase,this.base(a),this.baseSetContext=this.setContext,this.setContext=function(a){this.baseSetContext(a),this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0),this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))},this.getDefinition=function(){var a=this.attribute("xlink:href").getDefinition();return this.attribute("width").hasValue()&&(a.attribute("width",!0).value=this.attribute("width").value),this.attribute("height").hasValue()&&(a.attribute("height",!0).value=this.attribute("height").value),a},this.path=function(a){var b=this.getDefinition();null!=b&&b.path(a)},this.renderChildren=function(a){var b=this.getDefinition();if(null!=b){var c=b.parent;b.parent=null,b.render(a),b.parent=c}}},b.Element.use.prototype=new b.Element.RenderedElementBase,b.Element.mask=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(a,b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=b.attribute("mask").value;b.attribute("mask").value="";var h=document.createElement("canvas");h.width=c+e,h.height=d+f;var i=h.getContext("2d");this.renderChildren(i);var j=document.createElement("canvas");j.width=c+e,j.height=d+f;var k=j.getContext("2d");b.render(k),k.globalCompositeOperation="destination-in",k.fillStyle=i.createPattern(h,"no-repeat"),k.fillRect(0,0,c+e,d+f),a.fillStyle=k.createPattern(j,"no-repeat"),a.fillRect(0,0,c+e,d+f),b.attribute("mask").value=g},this.render=function(a){}},b.Element.mask.prototype=new b.Element.ElementBase,b.Element.clipPath=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(a){for(var b=0;b<this.children.length;b++)this.children[b].path&&(this.children[b].path(a),a.clip())},this.render=function(a){}},b.Element.clipPath.prototype=new b.Element.ElementBase,b.Element.filter=function(a){this.base=b.Element.ElementBase,this.base(a),this.apply=function(a,b){var c=b.getBoundingBox(),d=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y");"image"!=b.type&&0!=d&&0!=e||(d=c.x1,e=c.y1);var f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");"image"!=b.type&&0!=f&&0!=g||(f=c.width(),g=c.height());var h=b.style("filter").value;b.style("filter").value="";var i="image"==b.type?0:.2,j=i*f,k=i*g,l=document.createElement("canvas");l.width=f+2*j,l.height=g+2*k;var m=l.getContext("2d");m.translate(-d+j,-e+k),b.render(m);for(var n=0;n<this.children.length;n++)this.children[n].apply(m,0,0,f+2*j,g+2*k);a.drawImage(l,0,0,f+2*j,g+2*k,d-j,e-k,f+2*j,g+2*k),b.style("filter",!0).value=h},this.render=function(a){}},b.Element.filter.prototype=new b.Element.ElementBase,b.Element.feColorMatrix=function(a){function c(a,b,c,d,e,f){return a[c*d*4+4*b+f]}function d(a,b,c,d,e,f,g){a[c*d*4+4*b+f]=g}this.base=b.Element.ElementBase,this.base(a),this.apply=function(a,b,e,f,g){for(var h=a.getImageData(0,0,f,g),e=0;e<g;e++)for(var b=0;b<f;b++){var i=c(h.data,b,e,f,g,0),j=c(h.data,b,e,f,g,1),k=c(h.data,b,e,f,g,2),l=(i+j+k)/3;d(h.data,b,e,f,g,0,l),d(h.data,b,e,f,g,1,l),d(h.data,b,e,f,g,2,l)}a.clearRect(0,0,f,g),a.putImageData(h,0,0)}},b.Element.filter.prototype=new b.Element.feColorMatrix,b.Element.feGaussianBlur=function(a){function c(a){a=Math.max(a,.01);var b=Math.ceil(4*a)+1;mask=[];for(var c=0;c<b;c++)mask[c]=Math.exp(-.5*(c/a)*(c/a));return mask}function d(a){for(var b=0,c=1;c<a.length;c++)b+=Math.abs(a[c]);b=2*b+Math.abs(a[0]);for(var c=0;c<a.length;c++)a[c]/=b;return a}function e(a,b,c,d,e){for(var h=0;h<e;h++)for(var i=0;i<d;i++)for(var j=f(a,i,h,d,e,3)/255,k=0;k<4;k++){for(var l=c[0]*(0==j?255:f(a,i,h,d,e,k))*(0==j||3==k?1:j),m=1;m<c.length;m++){var n=f(a,Math.max(i-m,0),h,d,e,3)/255,o=f(a,Math.min(i+m,d-1),h,d,e,3)/255;l+=c[m]*((0==n?255:f(a,Math.max(i-m,0),h,d,e,k))*(0==n||3==k?1:n)+(0==o?255:f(a,Math.min(i+m,d-1),h,d,e,k))*(0==o||3==k?1:o))}g(b,h,i,e,d,k,l)}}function f(a,b,c,d,e,f){return a[c*d*4+4*b+f]}function g(a,b,c,d,e,f,g){a[c*d*4+4*b+f]=g}function h(a,b,f,g){var h=a.getImageData(0,0,b,f),i=c(g);i=d(i),tmp=[],e(h.data,tmp,i,b,f),e(tmp,h.data,i,f,b),a.clearRect(0,0,b,f),a.putImageData(h,0,0)}this.base=b.Element.ElementBase,this.base(a),this.apply=function(a,b,c,d,e){h(a,d,e,this.attribute("stdDeviation").numValue())}},b.Element.filter.prototype=new b.Element.feGaussianBlur,b.Element.title=function(a){},b.Element.title.prototype=new b.Element.ElementBase,b.Element.desc=function(a){},b.Element.desc.prototype=new b.Element.ElementBase,b.Element.MISSING=function(a){console&&console.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")},b.Element.MISSING.prototype=new b.Element.ElementBase,b.CreateElement=function(a){var c=a.nodeName.replace(/^[^:]+:/,"");c=c.replace(/\-/g,"");var d=null;return d="undefined"!=typeof b.Element[c]?new b.Element[c](a):new b.Element.MISSING(a),d.type=a.nodeName,d},b.load=function(a,c){b.loadXml(a,b.ajax(c))},b.loadXml=function(a,c){b.loadXmlDoc(a,b.parseXml(c))},b.loadXmlDoc=function(a,c){b.init(a);var d=function(b){for(var c=a.canvas;c;)b.x-=c.offsetLeft,b.y-=c.offsetTop,c=c.offsetParent;return window.scrollX&&(b.x+=window.scrollX),window.scrollY&&(b.y+=window.scrollY),b};1!=b.opts.ignoreMouse&&(a.canvas.onclick=function(a){var c=d(new b.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));b.Mouse.onclick(c.x,c.y)},a.canvas.onmousemove=function(a){var c=d(new b.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));b.Mouse.onmousemove(c.x,c.y)});var e=b.CreateElement(c.documentElement);e.root=!0;var f=!0,g=function(){b.ViewPort.Clear(),a.canvas.parentNode&&b.ViewPort.SetCurrent(a.canvas.parentNode.clientWidth,a.canvas.parentNode.clientHeight),1!=b.opts.ignoreDimensions&&(e.style("width").hasValue()&&(a.canvas.width=e.style("width").toPixels("x"),a.canvas.style.width=a.canvas.width+"px"),e.style("height").hasValue()&&(a.canvas.height=e.style("height").toPixels("y"),a.canvas.style.height=a.canvas.height+"px"));var c=a.canvas.clientWidth||a.canvas.width,d=a.canvas.clientHeight||a.canvas.height;if(1==b.opts.ignoreDimensions&&e.style("width").hasValue()&&e.style("height").hasValue()&&(c=e.style("width").toPixels("x"),d=e.style("height").toPixels("y")),b.ViewPort.SetCurrent(c,d),null!=b.opts.offsetX&&(e.attribute("x",!0).value=b.opts.offsetX),null!=b.opts.offsetY&&(e.attribute("y",!0).value=b.opts.offsetY),null!=b.opts.scaleWidth&&null!=b.opts.scaleHeight){var g=1,h=1,i=b.ToNumberArray(e.attribute("viewBox").value);e.attribute("width").hasValue()?g=e.attribute("width").toPixels("x")/b.opts.scaleWidth:isNaN(i[2])||(g=i[2]/b.opts.scaleWidth),e.attribute("height").hasValue()?h=e.attribute("height").toPixels("y")/b.opts.scaleHeight:isNaN(i[3])||(h=i[3]/b.opts.scaleHeight),e.attribute("width",!0).value=b.opts.scaleWidth,e.attribute("height",!0).value=b.opts.scaleHeight,e.attribute("viewBox",!0).value="0 0 "+c*g+" "+d*h,e.attribute("preserveAspectRatio",!0).value="none"}1!=b.opts.ignoreClear&&a.clearRect(0,0,c,d),e.render(a),f&&(f=!1,"function"==typeof b.opts.renderCallback&&b.opts.renderCallback())},h=!0;b.ImagesLoaded()&&(h=!1,g()),b.intervalID=setInterval(function(){var a=!1;if(h&&b.ImagesLoaded()&&(h=!1,a=!0),1!=b.opts.ignoreMouse&&(a|=b.Mouse.hasEvents()),1!=b.opts.ignoreAnimation)for(var c=0;c<b.Animations.length;c++)a|=b.Animations[c].update(1e3/b.FRAMERATE);"function"==typeof b.opts.forceRedraw&&1==b.opts.forceRedraw()&&(a=!0),a&&(g(),b.Mouse.runEvents())},1e3/b.FRAMERATE)},b.stop=function(){b.intervalID&&clearInterval(b.intervalID)},b.Mouse=new function(){this.events=[],this.hasEvents=function(){return 0!=this.events.length},this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){a.onclick&&a.onclick()}})},this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){a.onmousemove&&a.onmousemove()}})},this.eventElements=[],this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}},this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}},this.runEvents=function(){b.ctx.canvas.style.cursor="";for(var a=0;a<this.events.length;a++)for(var c=this.events[a],d=this.eventElements[a];d;)c.run(d),d=d.parent;this.events=[],this.eventElements=[]}},b}this.canvg=function(a,c,d){if(null!=a||null!=c||null!=d){d=d||{},"string"==typeof a&&(a=document.getElementById(a)),null!=a.svg&&a.svg.stop();var e=b();1==a.childNodes.length&&"OBJECT"==a.childNodes[0].nodeName||(a.svg=e),e.opts=d;var f=a.getContext("2d");"undefined"!=typeof c.documentElement?e.loadXmlDoc(f,c):"<"==c.substr(0,1)?e.loadXml(f,c):e.load(f,c)}else for(var g=document.getElementsByTagName("svg"),h=0;h<g.length;h++){var i=g[h],j=document.createElement("canvas");j.width=i.clientWidth,j.height=i.clientHeight,i.parentNode.insertBefore(j,i),i.parentNode.removeChild(i);var k=document.createElement("div");k.appendChild(i),canvg(j,k.innerHTML)}}}(),window.CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=function(a,b,c,d,e){canvg(this.canvas,a,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:d,scaleHeight:e})}),function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;c=function(a){return new c.prototype.init(a)},"undefined"!=typeof require&&"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=c:a.Globalize=c,c.cultures={},c.prototype={constructor:c,init:function(a){return this.cultures=c.cultures,this.cultureSelector=a,this}},c.prototype.init.prototype=c.prototype,c.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}
},c.cultures["default"].calendar=c.cultures["default"].calendars.standard,c.cultures.en=c.cultures["default"],c.cultureSelector="en",d=/^0x[a-f0-9]+$/i,e=/^[+\-]?infinity$/i,f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/,g=/^\s+|\s+$/g,h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1},i=function(a,b){return a.substr(a.length-b.length)===b},j=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,n=arguments.length,o=!1;for("boolean"==typeof h&&(o=h,h=arguments[1]||{},i=2),"object"==typeof h||l(h)||(h={});i<n;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(o&&e&&(m(e)||(f=k(e)))?(f?(f=!1,g=d&&k(d)?d:[]):g=d&&m(d)?d:{},h[c]=j(o,g,e)):e!==b&&(h[c]=e));return h},k=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},l=function(a){return"[object Function]"===Object.prototype.toString.call(a)},m=function(a){return"[object Object]"===Object.prototype.toString.call(a)},n=function(a,b){return 0===a.indexOf(b)},o=function(a){return(a+"").replace(g,"")},p=function(a){return isNaN(a)?NaN:Math[a<0?"ceil":"floor"](a)},q=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a},r=function(a,b){for(var c=0,d=!1,e=0,f=a.length;e<f;e++){var g=a.charAt(e);switch(g){case"'":d?b.push("'"):c++,d=!1;break;case"\\":d&&b.push("\\"),d=!d;break;default:b.push(g),d=!1}}return c},s=function(a,b){b=b||"F";var c,d=a.patterns,e=b.length;if(1===e){if(c=d[b],!c)throw"Invalid date format string '"+b+"'.";b=c}else 2===e&&"%"===b.charAt(0)&&(b=b.charAt(1));return b},t=function(a,b,c){function d(a,b){var c,d=a+"";return b>1&&d.length<b?(c=u[b-2]+d,c.substr(c.length-b,b)):c=d}function e(){return o||p?o:(o=y.test(b),p=!0,o)}function f(a,b){if(q)return q[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b}}var g,h=c.calendar,i=h.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(i)g=t(a,h.patterns.F,c);else{var j=new Date(a.getTime()),k=w(a,h.eras);j.setFullYear(x(a,h,k)),g=j.toLocaleString()}else g=a.toString();return g}var l=h.eras,m="s"===b;b=s(h,b),g=[];var n,o,p,q,u=["0","00","000"],y=/([^d]|^)(d|dd)([^d]|$)/g,z=0,A=v();for(!m&&i&&(q=i.fromGregorian(a));;){var B=A.lastIndex,C=A.exec(b),D=b.slice(B,C?C.index:b.length);if(z+=r(D,g),!C)break;if(z%2)g.push(C[0]);else{var E=C[0],F=E.length;switch(E){case"ddd":case"dddd":var G=3===F?h.days.namesAbbr:h.days.names;g.push(G[a.getDay()]);break;case"d":case"dd":o=!0,g.push(d(f(a,2),F));break;case"MMM":case"MMMM":var H=f(a,1);g.push(h.monthsGenitive&&e()?h.monthsGenitive[3===F?"namesAbbr":"names"][H]:h.months[3===F?"namesAbbr":"names"][H]);break;case"M":case"MM":g.push(d(f(a,1)+1,F));break;case"y":case"yy":case"yyyy":H=q?q[0]:x(a,h,w(a,l),m),F<4&&(H%=100),g.push(d(H,F));break;case"h":case"hh":n=a.getHours()%12,0===n&&(n=12),g.push(d(n,F));break;case"H":case"HH":g.push(d(a.getHours(),F));break;case"m":case"mm":g.push(d(a.getMinutes(),F));break;case"s":case"ss":g.push(d(a.getSeconds(),F));break;case"t":case"tt":H=a.getHours()<12?h.AM?h.AM[0]:" ":h.PM?h.PM[0]:" ",g.push(1===F?H.charAt(0):H);break;case"f":case"ff":case"fff":g.push(d(a.getMilliseconds(),3).substr(0,F));break;case"z":case"zz":n=a.getTimezoneOffset()/60,g.push((n<=0?"+":"-")+d(Math.floor(Math.abs(n)),F));break;case"zzz":n=a.getTimezoneOffset()/60,g.push((n<=0?"+":"-")+d(Math.floor(Math.abs(n)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case"g":case"gg":h.eras&&g.push(h.eras[w(a,l)].name);break;case"/":g.push(h["/"]);break;default:throw"Invalid date format pattern '"+E+"'."}}}return g.join("")},function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],f=1,g=Math.pow(10,b),h=Math.round(a*g)/g;isFinite(h)||(h=a),a=h;var i=a+"",j="",k=i.split(/e/i),l=k.length>1?parseInt(k[1],10):0;i=k[0],k=i.split("."),i=k[0],j=k.length>1?k[1]:"";l>0?(j=q(j,l,!1),i+=j.slice(0,l),j=j.substr(l)):l<0&&(l=-l,i=q(i,l+1,!0),j=i.slice(-l,i.length)+j,i=i.slice(0,-l)),j=b>0?c["."]+(j.length>b?j.slice(0,b):q(j,b)):"";for(var m=i.length-1,n=c[","],o="";m>=0;){if(0===e||e>m)return i.slice(0,m+1)+(o.length?n+o+j:j);o=i.slice(m-e+1,m+1)+(o.length?n+o:""),m-=e,f<d.length&&(e=d[f],f++)}return i.slice(0,m+1)+n+o+j},u=function(b,c,d){if(!isFinite(b))return b===1/0?d.numberFormat.positiveInfinity:b===-(1/0)?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";var e,f=d.numberFormat,g=Math.abs(b),h=-1;c.length>1&&(h=parseInt(c.slice(1),10));var i,j=c.charAt(0).toUpperCase();switch(j){case"D":e="n",g=p(g),h!==-1&&(g=q(""+g,h,!0)),b<0&&(g="-"+g);break;case"N":i=f;case"C":i=i||f.currency;case"P":i=i||f.percent,e=b<0?i.pattern[0]:i.pattern[1]||"n",h===-1&&(h=i.decimals),g=a(g*("P"===j?100:1),h,i);break;default:throw"Bad number format specifier: "+j}for(var k=/n|\$|-|%/g,l="";;){var m=k.lastIndex,n=k.exec(e);if(l+=e.slice(m,n?n.index:e.length),!n)break;switch(n[0]){case"n":l+=g;break;case"$":l+=f.currency.symbol;break;case"-":/[1-9]/.test(g)&&(l+=f["-"]);break;case"%":l+=f.percent.symbol}}return l}}(),v=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g},w=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,f=b.length;e<f;e++)if(c=b[e].start,null===c||d>=c)return e;return 0},x=function(a,b,c,d){var e=a.getFullYear();return!d&&b.eras&&(e-=b.eras[c].offset),e},function(){var a,b,c,d,e,f,g;a=function(a,b){if(b<100){var c=new Date,d=w(c),e=x(c,a,d),f=a.twoDigitYearMax;f="string"==typeof f?(new Date).getFullYear()%100+parseInt(f,10):f,b+=e-e%100,b>f&&(b-=100)}return b},b=function(a,b,c){var d,e=a.days,i=a._upperDays;return i||(a._upperDays=i=[g(e.names),g(e.namesAbbr),g(e.namesShort)]),b=f(b),c?(d=h(i[1],b),d===-1&&(d=h(i[2],b))):d=h(i[0],b),d},c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,i=a._upperMonths,j=a._upperMonthsGen;i||(a._upperMonths=i=[g(d.names),g(d.namesAbbr)],a._upperMonthsGen=j=[g(e.names),g(e.namesAbbr)]),b=f(b);var k=h(c?i[1]:i[0],b);return k<0&&(k=h(c?j[1]:j[0],b)),k},d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var e,f=s(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),g=["^"],h=[],i=0,j=0,k=v();null!==(e=k.exec(f));){var l=f.slice(i,e.index);if(i=k.lastIndex,j+=r(l,g),j%2)g.push(e[0]);else{var m,n=e[0],o=n.length;switch(n){case"dddd":case"ddd":case"MMMM":case"MMM":case"gg":case"g":m="(\\D+)";break;case"tt":case"t":m="(\\D*)";break;case"yyyy":case"fff":case"ff":case"f":m="(\\d{"+o+"})";break;case"dd":case"d":case"MM":case"M":case"yy":case"y":case"HH":case"H":case"hh":case"h":case"mm":case"m":case"ss":case"s":m="(\\d\\d?)";break;case"zzz":m="([+-]?\\d\\d?:\\d{2})";break;case"zz":case"z":m="([+-]?\\d\\d?)";break;case"/":m="(\\/)";break;default:throw"Invalid date format pattern '"+n+"'."}m&&g.push(m),h.push(e[0])}}r(f.slice(i),g),g.push("$");var p=g.join("").replace(/\s+/g,"\\s+"),q={regExp:p,groups:h};return c[b]=q},e=function(a,b,c){return a<b||a>c},f=function(a){return a.split(" ").join(" ").toUpperCase()},g=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=f(a[c]);return b},y=function(f,g,h){f=o(f);var i=h.calendar,j=d(i,g),k=new RegExp(j.regExp).exec(f);if(null===k)return null;for(var l,m=j.groups,p=null,q=null,r=null,s=null,t=null,u=0,v=0,w=0,x=0,y=null,z=!1,A=0,B=m.length;A<B;A++){var C=k[A+1];if(C){var D=m[A],E=D.length,F=parseInt(C,10);switch(D){case"dd":case"d":if(s=F,e(s,1,31))return null;break;case"MMM":case"MMMM":if(r=c(i,C,3===E),e(r,0,11))return null;break;case"M":case"MM":if(r=F-1,e(r,0,11))return null;break;case"y":case"yy":case"yyyy":if(q=E<4?a(i,F):F,e(q,0,9999))return null;break;case"h":case"hh":if(u=F,12===u&&(u=0),e(u,0,11))return null;break;case"H":case"HH":if(u=F,e(u,0,23))return null;break;case"m":case"mm":if(v=F,e(v,0,59))return null;break;case"s":case"ss":if(w=F,e(w,0,59))return null;break;case"tt":case"t":if(z=i.PM&&(C===i.PM[0]||C===i.PM[1]||C===i.PM[2]),!z&&(!i.AM||C!==i.AM[0]&&C!==i.AM[1]&&C!==i.AM[2]))return null;break;case"f":case"ff":case"fff":if(x=F*Math.pow(10,3-E),e(x,0,999))return null;break;case"ddd":case"dddd":if(t=b(i,C,3===E),e(t,0,6))return null;break;case"zzz":var G=C.split(/:/);if(2!==G.length)return null;if(l=parseInt(G[0],10),e(l,-12,13))return null;var H=parseInt(G[1],10);if(e(H,0,59))return null;y=60*l+(n(C,"-")?-H:H);break;case"z":case"zz":if(l=F,e(l,-12,13))return null;y=60*l;break;case"g":case"gg":var I=C;if(!I||!i.eras)return null;I=o(I.toLowerCase());for(var J=0,K=i.eras.length;J<K;J++)if(I===i.eras[J].name.toLowerCase()){p=J;break}if(null===p)return null}}}var L,M=new Date,N=i.convert;if(L=N?N.fromGregorian(M)[0]:M.getFullYear(),null===q?q=L:i.eras&&(q+=i.eras[p||0].offset),null===r&&(r=0),null===s&&(s=1),N){if(M=N.toGregorian(q,r,s),null===M)return null}else{if(M.setFullYear(q,r,s),M.getDate()!==s)return null;if(null!==t&&M.getDay()!==t)return null}if(z&&u<12&&(u+=12),M.setHours(u,v,w,x),null!==y){var O=M.getMinutes()-(y+M.getTimezoneOffset());M.setHours(M.getHours()+parseInt(O/60,10),O%60)}return M}}(),z=function(a,b,c){var d,e=b["-"],f=b["+"];switch(c){case"n -":e=" "+e,f=" "+f;case"n-":i(a,e)?d=["-",a.substr(0,a.length-e.length)]:i(a,f)&&(d=["+",a.substr(0,a.length-f.length)]);break;case"- n":e+=" ",f+=" ";case"-n":n(a,e)?d=["-",a.substr(e.length)]:n(a,f)&&(d=["+",a.substr(f.length)]);break;case"(n)":n(a,"(")&&i(a,")")&&(d=["-",a.substr(1,a.length-2)])}return d||["",a]},c.prototype.findClosestCulture=function(a){return c.findClosestCulture.call(this,a)},c.prototype.format=function(a,b,d){return c.format.call(this,a,b,d)},c.prototype.localize=function(a,b){return c.localize.call(this,a,b)},c.prototype.parseInt=function(a,b,d){return c.parseInt.call(this,a,b,d)},c.prototype.parseFloat=function(a,b,d){return c.parseFloat.call(this,a,b,d)},c.prototype.culture=function(a){return c.culture.call(this,a)},c.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!=typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!=typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]),this.cultures[a]=j(!0,{},d,c),e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)},c.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];if("string"==typeof a&&(a=a.split(",")),k(a)){var c,d,e=this.cultures,f=a,g=f.length,h=[];for(d=0;d<g;d++){a=o(f[d]);var i,j=a.split(";");c=o(j[0]),1===j.length?i=1:(a=o(j[1]),0===a.indexOf("q=")?(a=a.substr(2),i=parseFloat(a),i=isNaN(i)?0:i):i=1),h.push({lang:c,pri:i})}for(h.sort(function(a,b){return a.pri<b.pri?1:a.pri>b.pri?-1:0}),d=0;d<g;d++)if(c=h[d].lang,b=e[c])return b;for(d=0;d<g;d++)for(c=h[d].lang;;){var l=c.lastIndexOf("-");if(l===-1)break;if(c=c.substr(0,l),b=e[c])return b}for(d=0;d<g;d++){c=h[d].lang;for(var m in e){var n=e[m];if(n.language==c)return n}}}else if("object"==typeof a)return a;return b||null},c.format=function(a,b,c){var d=this.findClosestCulture(c);return a instanceof Date?a=t(a,b,d):"number"==typeof a&&(a=u(a,b,d)),a},c.localize=function(a,b){return this.findClosestCulture(b).messages[a]||this.cultures["default"].messages[a]},c.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e,f;if(b){if("string"==typeof b&&(b=[b]),b.length)for(var g=0,h=b.length;g<h;g++){var i=b[g];if(i&&(d=y(a,i,c)))break}}else{f=c.calendar.patterns;for(e in f)if(d=y(a,f[e],c))break}return d||null},c.parseInt=function(a,b,d){return p(c.parseFloat(a,b,d))},c.parseFloat=function(a,b,c){"number"!=typeof b&&(c=b,b=10);var g=this.findClosestCulture(c),h=NaN,i=g.numberFormat;if(a.indexOf(g.numberFormat.currency.symbol)>-1&&(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."])),a.indexOf(g.numberFormat.percent.symbol)>-1&&(a=a.replace(g.numberFormat.percent.symbol,"")),a=a.replace(/ /g,""),e.test(a))h=parseFloat(a);else if(!b&&d.test(a))h=parseInt(a,16);else{var j=z(a,i,i.pattern[0]),k=j[0],l=j[1];""===k&&"(n)"!==i.pattern[0]&&(j=z(a,i,"(n)"),k=j[0],l=j[1]),""===k&&"-n"!==i.pattern[0]&&(j=z(a,i,"-n"),k=j[0],l=j[1]),k=k||"+";var m,n,o=l.indexOf("e");o<0&&(o=l.indexOf("E")),o<0?(n=l,m=null):(n=l.substr(0,o),m=l.substr(o+1));var p,q,r=i["."],s=n.indexOf(r);s<0?(p=n,q=null):(p=n.substr(0,s),q=n.substr(s+r.length));var t=i[","];p=p.split(t).join("");var u=t.replace(/\u00A0/g," ");t!==u&&(p=p.split(u).join(""));var v=k+p;if(null!==q&&(v+="."+q),null!==m){var w=z(m,i,"-n");v+="e"+(w[0]||"+")+w[1]}f.test(v)&&(h=parseFloat(v))}return h},c.culture=function(a){return"undefined"!=typeof a&&(this.cultureSelector=a),this.findClosestCulture(a)||this.cultures["default"]}}(this),function(a,b,c){function d(a){var b,c="";a=Math.abs(a);do b=a%26,c=String.fromCharCode(b+97)+c,a=(a-b)/26;while(a>0);return c}function e(){return D+d(Q++)}function f(){return R++}function g(){var a=[8,9,"a","b"],b=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return b()+b()+"-"+b()+"-4"+b().substr(0,3)+"-"+a[Math.floor(4*Math.random())]+b().substr(0,3)+"-"+b()+b()+b()}function h(a,b){return typeof Globalize===H&&typeof Globalize.format===H?Globalize.parseDate(a,b):new Date(a)}function i(a){var b;return b=_.defined(a)&&typeof Globalize===H&&typeof Globalize.parseFloat===H?Globalize.parseFloat(a):Number(a),isNaN(b)?null:b}function j(a){if(!_.defined(a)||""===a)return"";var b=/\{([\.\d\w\:\-\/\' \[\]]+)\}/g,c=arguments,d=c&&c.length>1&&typeof c[1]===F,e=typeof Globalize===H&&typeof Globalize.format===H;return a.replace(b,function(a,b){var f,g,h=b.indexOf(":");if(h>0){var i=b;b=i.substring(0,h),g=i.substring(h+1)}return f=d?/^\d+$/.test(b)?c[parseInt(b,10)+1]:r(c[1],b):c[parseInt(b,10)+1],g&&e&&(f=Globalize.format(f,g)),f})}function k(a){if(_.func(a)){var b=[].slice.call(arguments);return b.shift(),a.apply(this,b)}return j.apply(this,arguments)}function l(){return typeof Globalize===H&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].calendar?Globalize.cultures[Globalize.cultureSelector].calendar:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},firstDay:0,months:{names:["January","February","March","April","May","June","July","August","September","October","November","December",""],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec",""]}}}function m(){return typeof Globalize===H&&Globalize.cultures&&Globalize.cultures[Globalize.cultureSelector]&&Globalize.cultures[Globalize.cultureSelector].numberFormat?Globalize.cultures[Globalize.cultureSelector].numberFormat.currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}}function n(a,d){if(d=d!==c?d:x.dieOnError)throw new Error(a);b.console&&(b.console.error?console.error(a):console.log(a))}function o(a){var b=Object.prototype.toString.call(a);return null===a?"null":a===c?"undefined":b.substr(8,b.length-9).toLowerCase()}function p(b){var d,e,f,g,h,i=Array.apply(null,arguments),j=_.array(b)&&b.length&&!z(b,function(a){return!_.func(a)}).length,k=i[1],l=function(a,b){return a instanceof b};if(!j)return y.apply(a,i);for(_.object(k)||_.array(k)||(k={}),e=2;e<i.length;e++)if(d=i[e])for(f in d)d.hasOwnProperty(f)&&(h=d[f],g=k[f],h&&z(b,A(l,null,h)).length?k[f]=h:_.object(h)||_.array(h)?(_.object(g)||(g=k[f]=_.array(h)?[]:{}),k[f]=p(b,g,h)):_.date(h)?k[f]=new Date(h.getTime()):h!==c&&(k[f]=h));return k}function q(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c}function r(a,b){var c;if(!_.string(b))throw new Error("shield.get: parameter 'path' must be a string.");if(b=t(b),c=T[b])return c(a);try{c=new Function("a","try{return a"+b+"}catch(e){return arguments[1];}")}catch(d){throw new Error("shield.get: invalid 'path' parameter")}return T[b]=c,c(a)}function s(a,b,c){var d;if(!_.string(b))throw new Error("shield.set: parameter 'path' must be a string");if(b=t(b),d=U[b])return d(a,c);try{d=new Function("obj,val","obj"+b+"=val;")}catch(e){throw new Error("shield.set: invalid 'path' parameter")}return U[b]=d,d(a,c),a}function t(a){var b,c,d,e,f,g=a.split(".");for(c=0,d=g.length;c<d;c++)e=g[c],b=e.indexOf("["),e&&(b<0?(f=e.indexOf("'")<0?"'":'"',e=g[c]="["+f+e+f+"]"):b>0&&(e=g[c]="."+e));return g.join("")}function u(b,c){var d,e,f=[],g=a(b).length,h=c?E+"-"+c:E;for(e=0;e<g;e++)d=a(a(b)[e]).data(h),d&&f.push(d);return f}function v(b,d){x.ui[b]=d,a.fn[D+b]=function(e){var f,g=this;return typeof e===G?(f=[].slice.call(arguments,1),this.each(function(){var d,h,i=a(this).data(E);if(!i)throw new Error(k("shield: cannot call method '{0}' on uninitialized {1}.",e,b));if(d=i[e],typeof d!==H)throw new Error(k("shield: cannot find method '{0}' of {1}",e,b));if(h=d.apply(i,f),h!==c)return g=h,!1}),g):this.each(function(){var c=new d(this,e);a(this).data(E,c),a(this).data(E+"-"+b,c)})}}function w(a){a?C.onselectstart==w.handler&&(C.onselectstart=w.onselectstart,C.ondragstart=w.ondragstart):C.onselectstart!=w.handler&&(w.onselectstart=C.onselectstart,w.ondragstart=C.ondragstart,C.onselectstart=C.ondragstart=w.handler)}var x=b.shield=b.shield||{},y=a.extend,z=a.grep,A=a.proxy,B=navigator.userAgent,C=document,D="shield",E="shieldWidget",F="object",G="string",H="function",I="array",J="number",K="date",L="boolean",M="null",N="undefined",O="sui-vc-top",P=function(){},Q=100,R=1e3,S={},T={},U={},V=function(){},W={SVG_NS:"http://www.w3.org/2000/svg",XHTML_NS:"http://www.w3.org/1999/xhtml",KeyCode:{BACK:8,TAB:9,ENTER:13,CTRL:17,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DEL:46}};V.extend=function(a){var b,c,d,e,f=this,g=a&&a.init?a.init:function(){f.apply(this,arguments)},h=function(){};h.prototype=f.prototype,b=g.fn=g.prototype=new h;for(c in a)a.hasOwnProperty(c)&&(d=a[c],e=o(d),d&&typeof d===F?b[c]=y(!0,e===I?[]:{},f.prototype[c],d):b[c]=d);return b.constructor=g,g.extend=f.extend,g},Date.prototype.toISOString||!function(){function a(a){var b=String(a);return 1===b.length&&(b="0"+b),b}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}();var X=V.extend({init:function(a){var b,c=this,d=(a||{}).events;c.events={},a=a||{};for(b in d)typeof d[b]===H&&c.on(b,d[b])},on:function(a,b,c){var d,e,f,g,h,i=this,j=i.events,k=aa.array(a),l=_.func(b);if(_.object(a)){k=[];for(h in a)a.hasOwnProperty(h)&&k.push(h);l=!1,b=a}for(f=0,g=k.length;f<g;f++)a=k[f],d=i._eventType(a),e=l?b:b[a],_.func(e)&&(c&&(e=i._one(a,e)),(j[d]||(j[d]=[])).push({name:a,handler:e}));return i},_one:function(a,b){var c=this,d=function(){c.off(a,d),b.apply(this,arguments)};return d},_eventType:function(a){var b=(a+="").indexOf(".");return b>-1?a.substring(0,b):a},_eventNameMatch:function(b,c){var d,e,f,g,h=this,i=h._eventType(b),j=h._eventType(c);if(b+="",c+="",(i===j||!j)&&(d=b.split("."),d.shift(),d=z(d,function(a){return _.string(a)&&a.length>0}),e=c.split("."),j&&e.shift(),e=z(e,function(a){return _.string(a)&&a.length>0}),d&&e)){for(f=0,g=0;g<e.length;g++)a.inArray(e[g],d)>-1&&f++;return f>=e.length}return!1},one:function(a,b){this.on(a,b,!0)},off:function(a,b){var d,e,f,g,h,i,j=this,k=j.events,l=aa.array(a),m=_.func(b);if(_.object(a)){l=[];for(i in a)a.hasOwnProperty(i)&&l.push(i);m=!1,b=a}if(_.string(a)&&0===a.indexOf(".")){for(d in k)if(k.hasOwnProperty(d)){for(e=k[d]||[],f=m?b:b||c,h=e.length-1;h>=0;h--)!j._eventNameMatch(e[h].name,a)||_.defined(f)&&e[h].handler!==f||e.splice(h,1);e.length||delete k[d]}}else for(g=0;g<l.length;g++){for(a=l[g],d=j._eventType(a),e=k[d]||[],f=m?b:(b||{})[a],h=e.length-1;h>=0;h--)!j._eventNameMatch(e[h].name,a)||_.defined(f)&&e[h].handler!==f||e.splice(h,1);e.length||delete k[d]}return j},trigger:function(a,b){var c,d,e=this,f=e._eventType(a),g=(e.events[f]||[]).slice();for(c=0,d=g.length;c<d;c++)g[c].handler.apply(e,[].slice.call(arguments,1));return b},destroy:function(){this.events={}}}),Y=V.extend({init:function(a){var b=!1,c=!1;y(this,{timeStamp:(new Date).getTime(),isDefaultPrevented:function(){return b},isPropagationStopped:function(){return c},preventDefault:function(){b=!0},stopPropagation:function(){c=!0}},a)}}),Z=X.extend({init:function(b,c){var d=this,e=d.constructor;c=c||{},d.element=a(b),d.initialOptions=c,d.options=y(!0,{},e.defaults,(e.themes||{})[c.theme],c),d._iid=f(),X.fn.init.call(d,c)},getInstanceId:function(){return this._iid},refresh:function(a){this.refreshWithElement(this.element,a)},refreshWithElement:function(a,b){var c=this,d=p([V],c.options,b);c.destroy(),c.init(a,d)},hide:function(){a(this.element).hide()},show:function(){a(this.element).show()},isVisible:function(){return a(this.element).is(":visible")},visible:function(){var a=this,b=[].slice.call(arguments);return b.length>0?void(b[0]?a.show():a.hide()):a.isVisible()},focus:function(){a(this.element).focus()},trigger:function(b,c,d){var e,f=this;return c=_.event(c)?{domEvent:c}:c,!c||!c.domEvent||c.domEvent instanceof a.Event||(c.domEvent=a.Event(c.domEvent)),e=new Y(y({type:b,target:f},c)),X.fn.trigger.call(f,b,e),typeof d!==H||e.isDefaultPrevented()||d.call(f,e),e}}),$=X.extend({options:{total:0,pageBuffer:2,createContainer:P,getItems:P,eventNS:".shieldVirtualized",skipRender:!1},init:function(b,c){var d=this;c=d.options=y({},d.options,c),d.element=a(b),X.fn.init.call(d,c),c.skipRender||d.render()},_elements:function(){var b,c,d=this,e=d.element,f=d.options;b=d.wrapper=e.off(f.eventNS).empty().css({overflow:"auto",position:"relative"}).on("scroll"+f.eventNS,A(d.scroll,d)).append('<div class="sui-virtualized"/>').find(".sui-virtualized").css({position:"relative",overflow:"visible"}),c=d.container=a(f.createContainer(b)),b.children().css({position:"absolute",top:0}),d._positionedContainer=b.children().first()},_dimensions:function(){var a=this,b=a.options,c=b.total,d=b.itemHeight,e=Math.min(c*d,x.support.maxElementHeight),f=a.element.height(),g=Math.ceil(f/d),h=g*d,i=e-f;return{total:c,itemHeight:d,totalHeight:e,viewportHeight:f,itemsPerPage:g,pageHeight:h,totalScrollableHeight:i}},render:function(){var a,b=this,c=b.element,d=b.options;b._elements(),b.prevScroll=0,a=b.dimensions=b._dimensions(),c.find(".sui-virtualized").height(a.totalHeight),b._renderItems(0,Math.min(d.total,(d.pageBuffer+1)*a.itemsPerPage))},_renderItems:function(a,b,c){var d=this;d.options.getItems(a,b,function(a,b){var e,f=a.length;for(b=!_.defined(b)||!!b,b&&d.container.empty(),e=0;e<f;e++)d.container.append(a[e]);c&&c()})},scroll:function(){var a,b,c,d=this,e=d.options,f=e.pageBuffer,g=d.dimensions,h=d.element.scrollTop(),i=d.prevScroll,j=h-i,k=h/g.totalScrollableHeight,l=d._positionedContainer,m=l.data(O)||0,n=h-k*(g.pageHeight-g.viewportHeight),o=j>0&&n-m>(f/4+1)*g.pageHeight,p=j<0&&n-m<=f/4*g.pageHeight;(p||o)&&(b=Math.min(g.total,Math.floor(k*g.total-k*g.itemsPerPage)),a=Math.max(0,b-f/2*g.itemsPerPage),c=Math.min(g.total,a+(f+1)*g.itemsPerPage),n=Math.max(0,n-(b-a)*g.itemHeight),d._renderItems(a,c,function(){l.css("top",n),l.data(O,n)})),d.prevScroll=h},scrollTop:function(a){var b=this,c=b.element;return _.defined(a)?void c.scrollTop(a):c.scrollTop()},destroy:function(){var a=this,b=a.options;a.element.off(b.eventNS),a.element=null,b.createContainer=P,b.getItems=P,X.fn.destroy.call(a)}});a.fn.swidget=function(a){var b=u(this,a);return b.length?b.length>1?b:b[0]:null},a.fn.swidgets=function(a){return u(this,a)};var _={string:function(a){return o(a)===G},number:function(a){return o(a)===J},integer:function(a){return o(a)===J&&/^[\+\-]?\d+$/.test(a+"")},"float":function(a){return o(a)===J&&/^[\+\-]?\d+\.\d+$/.test(a+"")},func:function(a){return o(a)===H},object:function(a){return o(a)===F},array:function(a){return o(a)===I},date:function(a){return o(a)===K},"boolean":function(a){return o(a)===L},"null":function(a){return o(a)===M},undefined:function(a){return o(a)===N},defined:function(a){return a!==c&&null!==a},event:function(a){return typeof b.Event==H&&a instanceof b.Event||a&&a.altKey!==c}},aa={"int":function(a,b){return parseInt(a,b||10)},"float":function(a){return parseFloat(a)},number:function(a){return i(a+"")},array:function(a){return a instanceof Array?a:a!==c?[a]:[]},string:function(a){return a+""},key:function(b){var c,d,e,f,g=o(b);switch(g){case M:case N:return g;case F:return c=q(b).sort(),d=[],a.each(c,function(a,c){d.push(c+":"+aa.key(b[c]))}),"{"+d.join(",")+"}";case I:for(d="[",e=0,f=b.length;e<f;e++)d+=aa.key(b[e]),e<f-1&&(d+=",");return d+="]";case K:return b.toISOString();default:return b+""}}};!function(){S.stableSort=function(){var a="abcdefghijklmnopqrstuvwxyz";return"xyzvwtursopqmnklhijfgdeabc"==a.split("").sort(function(b,c){return~~(a.indexOf(c)/2.3)-~~(a.indexOf(b)/2.3)}).join("")}(),S.scrollbar=function(){var a,b=C.createElement("div");return b.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",b.innerHTML="&nbsp;",C.body.appendChild(b),a=b.offsetWidth-b.scrollWidth,C.body.removeChild(b),a},S.isRtl=function(b){return a(b).closest(".sui-rtl").length>0},S.transitions=function(){var a,b=(C.body||C.documentElement).style,c="Transition",d=["Moz","webkit","Webkit","Khtml","O","ms"];if(_.string(b[c.toLowerCase()]))return!0;for(a=0;a<d.length;a++)if(_.string(b[d[a]+c]))return!0;return!1}(),S.hasScrollbarY=function(b){var c=a(b).get(0);return c.scrollHeight>c.clientHeight},S.hasScrollbarX=function(b){var c=a(b).get(0);return c.scrollWidth>c.clientWidth}}(),function(){x.rAF=function(a){return(b.requestAnimationFrame||b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(a){return this.setTimeout(a,1e3/60)}).call(b,a)},x.cAF=function(a){return(b.cancelAnimationFrame||b.clearTimeout)(a)}}(),function(){var a=/MSIE/i.test(B),b=/Trident/i.test(B),c=/Firefox/i.test(B),d=/Opera/i.test(B),e=/Safari/i.test(B),f=/Chrome/i.test(B),g=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(B);S.browser={ie:a||b,firefox:c,opera:d,safari:!f&&e,chrome:f,mobile:g,version:a?parseInt(B.substr(B.indexOf("MSIE ")+5),10):b?parseInt(B.substr(B.indexOf("rv:")+3),10):c?parseInt(B.substr(B.indexOf("Firefox/")+8),10):d?parseInt(B.substr(B.indexOf("Version/")+8),10):f?parseInt(B.substr(B.indexOf("Chrome/")+7),10):e?parseInt(B.substr(B.indexOf("Version/")+8),10):0}}(),a(function(){for(var b,c=1e6,d=S.browser.firefox?6e6:1e9,e=a('<div style="display:none;"/>').appendTo(C.body),f=c;;){if(b=f+c,e.css("height",b),b>d||e.height()!==b)break;f=b}e.remove(),S.maxElementHeight=f}),w.handler=function(){return!1},y(x,{Class:V,Dispatcher:X,Event:Y,Constants:W,format:k,formatString:j,parseDate:h,getCalendarInfo:l,getCurrencyInfo:m,error:n,dieOnError:!0,iid:f,strid:e,guid:g,support:S,extend:p,selection:w,type:o,is:_,to:aa,keys:q,get:r,set:s,ui:y({},x.ui||{},{Widget:Z,VirtualizedContainer:$,plugin:v})})}(jQuery,this),function(a,b,c,d){function e(a,b){var c,d,e=[];if(a.map)return a.map(b);for(c=0,d=a.length;c<d;c++)e[c]=b(a[c],c,a);return e}function f(a,b,c,e){var f=B(a,b);return f===d?c&&(f=u.def(c,e,!0)):f=u.convert(f,c),f}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=b.Class,w=b.Dispatcher,x=Math.min,y=Math.max,z=b.is,A=b.to,B=b.get,C=b.set,D=(b.support,b.type),E=function(){},F=a.extend,G=a.proxy,H=a.each,I=a.grep,J=a.inArray,K=a.Deferred,L="function",M="array",N="object",O="string",P="change",Q="error",R="start",S="complete",T="save",U="afterset",V="insert",W="remove";g=v.extend({init:function(a){this.data=a},read:function(a,b,c,d){return b(this.data,!1,d)},modify:function(a,b,c,d){b(d)}}),h=v.extend({init:function(a,b){this.options=a,this.cache=b},read:function(b,c,e,f){var g,h=this.options,i=h.read,j=this.cache;return z.func(i)?void i(b,c,e,f):(i=z.string(i)?{url:i}:F(!0,{},i),z.func(i.data)&&(b=i.data(b,f)),g=j.get(b),void(g!==d?c(g,!0,f):(i.data=b,i.error=e,i.success=function(a){j.set(b,a),c(a,!1,f)},a.ajax(i))))},modify:function(b,c,d,f){var g,h,i,j,k,l=this.options,m=l.modify||{},n=["create","update","remove"],o=["added","edited","removed"],p=[],q=function(a){return a.data};if(z.func(m))return void m(b,c,d,f);for(k=0;k<n.length;k++)i=n[k],j=o[k],h=m[i],b[j].length?(z.string(h)&&(h={url:h,type:"POST"}),z.func(h)?(g=p[k]=new K,h(b[j],G(g.resolve,g),G(g.reject,g),f)):z.object(h)?(h=F(!0,{},h),z.func(h.data)?h.data=h.data(b[j],f):(h.data={},h.data[j]=e(b[j],q)),g=p[k]=a.ajax(h)):(g=p[k]=new K,g.resolve())):(g=p[k]=new K,g.resolve());a.when.apply(a,p).then(c,d)}}),i=v.extend({init:function(){this.values={}},get:function(a){return this.values[A.key(a)]},set:function(a,b){return this.values[A.key(a)]=b,b},remove:function(a){var b=A.key(a),c=this.values[b];return delete this.values[b],c},clear:function(){this.values=[]}}),i.noop={get:E,set:E},k=v.extend({init:function(a,b){z.object(a)?a=A.array(a):z.string(a)&&(a=[{path:a,desc:!!b}]),this._expr=a},build:function(){var a=this._expr,b=k.cache;return z.func(a)?function(a){return function(b,c){var d=a(b.item,c.item);return 0!==d?d:b.index-c.index}}(a):z.array(a)?b.get(a)||b.set(a,function(a){return function(b,c){var d,e,f,g,h,i,j,k;for(g=0,h=a.length;g<h;g++)if(i=b.item,j=c.item,d=a[g]||{},e=d.path,f=d.desc?-1:1,z.string(e)?(i=B(i,e),j=B(j,e)):z.func(e)&&(i=e(i),j=e(j)),z.date(i)&&(i=i.getTime()),z.date(j)&&(j=j.getTime()),i!==j&&(null!=i||null!=j)){if(null==i)return-1*f;if(null==j)return 1*f;if(z.number(i)&&z.number(j)||(i=i.toString(),j=j.toString()),i.localeCompare){if(k=i.localeCompare(j),0===k)continue;return k*f}if(i>j)return 1*f;if(i<j)return-1*f}return b.index-c.index}}([].concat(a))):void 0}}),k.cache=new i,l=v.extend({init:function(a){this._expr=a||[]},build:function(){var a=this,b=l.cache,c=a._expr,d=a._func||(a._func=b.get(c));return d||(d=a._buildRecursive(c,!0),d&&b.set(c,d)),d},_single:function(a){var b;if(a){if(z.func(a.filter))return a.filter;if(b=l.filters[l.filterAliases[a.filter]])return function(a,b,c,d){return function(e){return b(B(e,a),c,d)}}(a.path,b,a.value,a.sensitive)}},_multiple:function(a,b){return function(c){var d,e=!0,f=a.length;for(d=0;d<f;d++)if(e=a[d](c),b){if(!e)break}else if(e)break;return e}},_buildRecursive:function(a,b){var c,d,e=this,f=[];if(z.array(a)){for(c=0,d=a.length;c<d;c++)f.push(e._buildRecursive(a[c]));return f.length>1?e._multiple(f,b):f[0]}return a.and||a.or?e._buildRecursive(a.and||a.or,!!a.and):e._single(a)}}),l.cache=new i,l.normalize={equatable:function(a,b,c){return z.date(a)?{a:a.getTime(),b:new Date(b).getTime()}:l.normalize.string(a,b,c)},string:function(a,b,c){return{a:c?a+"":(a+"").toLowerCase(),b:c?b+"":(b+"").toLowerCase()}},scalar:function(a,b){return z.date(a)?{a:a.getTime(),b:new Date(b).getTime()}:isNaN(parseFloat(a))?{a:a,b:b}:{a:parseFloat(a),b:parseFloat(b)}}},l.filters={eq:function(a,b,c){var d=l.normalize.equatable(a,b,c);return d.a===d.b},neq:function(a,b,c){var d=l.normalize.equatable(a,b,c);return d.a!==d.b},con:function(a,b,c){var d=l.normalize.string(a,b,c);return d.a.indexOf(d.b)>-1},notcon:function(a,b,c){var d=l.normalize.string(a,b,c);return d.a.indexOf(d.b)<0},starts:function(a,b,c){var d=l.normalize.string(a,b,c);return 0===d.a.indexOf(d.b)},ends:function(a,b,c){var d=l.normalize.string(a,b,c);return d.a.indexOf(d.b)===d.a.length-d.b.length},gt:function(a,b){var c=l.normalize.scalar(a,b);return c.a>c.b},lt:function(a,b){var c=l.normalize.scalar(a,b);return c.a<c.b},gte:function(a,b){var c=l.normalize.scalar(a,b);return c.a>=c.b},lte:function(a,b){var c=l.normalize.scalar(a,b);return c.a<=c.b},isnull:function(a){return null==a},notnull:function(a){return null!=a}},l.filterAliases={eq:"eq",equal:"eq",equals:"eq","==":"eq",neq:"neq",ne:"neq",doesnotequal:"neq",notequal:"neq",notequals:"neq","!=":"neq",con:"con",contains:"con",notcon:"notcon",doesnotcontain:"notcon",notcontains:"notcon",starts:"starts",startswith:"starts",ends:"ends",endswith:"ends",gt:"gt",greaterthan:"gt",
">":"gt",lt:"lt",lessthan:"lt","<":"lt",gte:"gte",ge:"gte",greaterthanorequal:"gte",">=":"gte",lte:"lte",le:"lte",lessthanorequal:"lte","<=":"lte",isnull:"isnull","null":"isnull",notnull:"notnull",isnotnull:"notnull"},m=v.extend({init:function(){},build:function(a){var b=this,c=m.cache,d=c.get(a);return d||(d=b._build(a),d&&c.set(a,d)),d},_build:function(a){if(!a)return null;var b=a.field,c=a.aggregate,g=a.type||Number,h=function(a){return a===d?u.def(g):u.convert(a,g)};return z.func(c)?c:"count"==c?function(a){return a.length}:"sum"==c?function(a){var c,d,e=0,i=a.length;for(c=0;c<i;c++)d=f(a[c],b,g),e+=g==Date&&z.date(d)?d.getTime():d;return h(e)}:"average"==c?function(a){var c,d,e=0,i=a.length;for(c=0;c<i;c++)d=f(a[c],b,g),e+=g==Date&&z.date(d)?d.getTime():d;return h(e/i)}:"min"==c?function(a){return h(x.apply(null,e(a,function(a){return f(a,b,g)})))}:"max"==c?function(a){return h(y.apply(null,e(a,function(a){return f(a,b,g)})))}:d}}),m.cache=new i,j=v.extend({init:function(a,b,c,d,f){var g=this;g.data=a,g.total=null!=b?b:a?a.length:0,g.aggregates=c,g.groups=d,g.indices=z.array(f)?f.slice(0):e(a||[],function(a,b){return b})},filter:function(a){var b,c,d,e=this,f=new l(a).build(),g=e.data,h=[],i=[];if(f){for(b=0,c=g.length;b<c;b++)d=g[b],f(d)&&(h.push(d),i.push(e.indices[b]));e.indices=i}else h=g.slice(0);return new j(h,h.length,e.aggregates,e.groups,e.indices)},aggregate:function(a){var b,c,d,e,f=this,g=new m,h=f.data;for(z.array(a)||(a=[a]),f.aggregates=[],b=0;b<a.length;b++)c=a[b],d=g.build(c),d&&(e=d(h,c)),f.aggregates.push(F({},c,{value:e}));return new j(h.slice(0),f.total,f.aggregates,f.groups,f.indices)},aggregateGroups:function(a){var b=this,c=b.data.slice(0),d=new j(b._getInnerMostItems(c),null,null,null,null).aggregate(a);return new j(c,b.total,d.aggregates,b.groups,b.indices)},_getInnerMostItems:function(a){var b=[];return H(this._getInnerMostGroups(a),function(a,c){b=b.concat(c.items)}),b},_getInnerMostGroups:function(a){var b=this,c=[];return H(a||[],function(a,d){c=c.concat(b._hasInnerGroups(d)?b._getInnerMostGroups(d.items):d)}),c},_hasInnerGroups:function(a){return!!(a&&a.items&&a.items.length>0)&&(a.items[0].field&&z.array(a.items[0].items))},group:function(a){var b,c=this,d=c.data.slice(0);return z.array(a)||(a=[a]),a.length>0&&(b=c._groupData(a,d,c.indices),d=b[0],c.indices=b[1]),new j(d,c.total,c.aggregates,c.groups,c.indices)},_groupData:function(a,b,c){var d,e,f,g,h,i=this,l=[],m=[],n=a.slice(0),o=n.shift(),p=o.field,q=o.aggregate,r=o.order,s={};if(H(b,function(a,b){e=B(b,p),f=s[e],z.defined(f)?l[f].items.push({item:b,index:c[a]}):(s[e]=l.length,l.push(F({},o,{value:e,items:[{item:b,index:c[a]}]})))}),r&&(d=new k("value","desc"==r).build())){for(g=0;g<l.length;g++)l[g]={item:l[g],index:g};for(l.sort(d),g=0;g<l.length;g++)l[g]=l[g].item}for(g=0;g<l.length;g++)for(h=0;h<l[g].items.length;h++)m.push(l[g].items[h].index),l[g].items[h]=l[g].items[h].item;if(q&&H(l,function(a,b){l[a].aggregate=new j(b.items).aggregate(q).aggregates}),n&&n.length>0){var t=0,u=[];for(g=0;g<l.length;g++){var v=l[g],w=m.slice(t,t+(v.items?v.items.length:0)),x=i._groupData(n,v.items,w);l[g].items=x[0],u=u.concat(x[1]),t+=v.items?v.items.length:0}m=u}return[l,m]},sort:function(a,b){var c,d=this,e=new k(a,b).build(),f=d.data.slice(0),g=[],h=f?f.length:0,i=d.indices;if(e){for(c=0;c<h;c++)g.push({index:i[c],item:f[c]});for(g.sort(e),c=0;c<h;c++)f[c]=g[c].item,d.indices[c]=g[c].index}return new j(f,d.total,d.aggregates,d.groups,d.indices)},sortGroups:function(a,b){var c,d=this,e=d.data.slice(0),f=[],g=0;return c=function(e){if(d._hasInnerGroups(e))H(e.items,function(a,b){c(b)});else{var h=new j(e.items,null,null,null,d.indices.slice(g,g+(e.items?e.items.length:0))).sort(a,b);e.items=h.data,f=f.concat(h.indices),g+=e.items?e.items.length:0}},H(e,function(a,b){c(b)}),new j(e,d.total,d.aggregates,d.groups,f)},_sliceGroups:function(a,b,c,d){var e,f=this,g=0,h=[],i=[],j=z.defined(d);return 0!==c||j?(e=function(a){if(f._hasInnerGroups(a)){var h=[],k=0;return H(a.items,function(a,b){var c=e(b);c>0&&(h.push(b),k+=c)}),a.items=h,k}var l,m,n=g,o=a.items.length,p=n+o-1;return j?d-1>=p?c<=p&&(l=y(0,c-n),m=o):d-1>=n&&c<=p&&(l=y(0,c-n),m=x(o,d-n)):c<=n?(l=0,m=o):c>=n&&c<=p&&(l=y(0,c-n),m=o),z.defined(l)&&z.defined(m)&&m>l?(a.items=a.items.slice(l,m),i=i.concat(b.slice(n+l,n+m))):a.items=[],g+=o,a.items.length},H(a,function(a,b){var c=e(b);c>0&&h.push(b)}),[h,i]):[a.slice(0),b.slice(0)]},skip:function(a){var b=this;return new j(b.data.slice(a),b.total,b.aggregates,b.groups,b.indices.slice(a))},skipGroups:function(a){var b=this,c=b._sliceGroups(b.data,b.indices,a);return new j(c[0],b.total,b.aggregates,b.groups,c[1])},take:function(a){var b=this;return new j(b.data.slice(0,a),b.total,b.aggregates,b.groups,b.indices.slice(0,a))},takeGroups:function(a){var b=this,c=b._sliceGroups(b.data,b.indices,0,a);return new j(c[0],b.total,b.aggregates,b.groups,c[1])}}),j.create=function(a,b,c,d,e){b=b||{};var f=new j(a,c,d,e),g=b.remoteOperations||[],h=g.join(" "),i=h.indexOf("group")>-1;return b.group||i?(b.group?(b.filter&&(f=f.filter(b.filter)),f=f.group(b.group)):f.data=f.groups,b.aggregate&&(f=f.aggregateGroups(b.aggregate)),b.sort&&(f=f.sortGroups(b.sort)),b.skip&&(f=f.skipGroups(b.skip)),b.take&&(f=f.takeGroups(b.take))):(b.filter&&(f=f.filter(b.filter)),b.aggregate&&(f=f.aggregate(b.aggregate)),b.sort&&(f=f.sort(b.sort)),b.skip&&(f=f.skip(b.skip)),b.take&&(f=f.take(b.take))),f},n=w.extend({init:function(a){var b=this,c=b.options=z.array(a)?{data:a}:a||{},d=c.schema||{},e=n.schemas[d.type||"json"];b.data=null,b.filter=c.filter,b.sort=c.sort,b.skip=c.skip,b.take=c.take,b.group=c.group,b.aggregate=c.aggregate,b.schema=new e(d),b.remote=c.remote,b.cache=new i,b._recursive=!!c.resursive,w.fn.init.call(b,c)},isRecursive:function(){return this._recursive},trigger:b.ui.Widget.fn.trigger,_client:function(){var a=this,b=a.remote;return z.object(b)?new h(b,b.cache?a.cache:i.noop):new g(a.options.data)},_params:function(){var a,b=this,c=["filter","aggregate","group","sort","skip","take"],d=b.remote,e=b._remoteOperations().join(" "),f={local:{},remote:{}};return H(c,function(c,g){a=b[g],null!=a&&(d&&e.indexOf(g)>-1?f.remote[g]=a:f.local[g]=a)}),f},_remoteOperations:function(){var a=this.remote;return a&&a.read?a.read.operations||a.operations||[]:[]},_success:function(a,b,c,d,e){var f=this,g=f.schema,h=g.process(c);f.data=h.data,f._pTotal=h.total,f._pAggregates=h.aggregates,f._pGroups=h.groups,f._createView(h.data,b),f.trigger(S),f.trigger(P,{fromCache:!!d,extra:e}),a.resolve(f.view,!!d)},_createView:function(a,b){var c=this,d=j.create(a,F({},b||c._params().local,{remoteOperations:c._remoteOperations()}),c._pTotal,c._pAggregates,c._pGroups);c.view=d.data,c.total=d.total,c._indices=d.indices,c.aggregates=d.aggregates},_error:function(a,b,c,d,e){var f=this;a.reject(d),b&&f.trigger(S),f.trigger(Q,{errorType:"transport",error:d,operation:c,extra:e})},read:function(a){var b=this,c=new K,d=b._params(),e=b.trigger(R,{params:d,extra:a});return e.isDefaultPrevented()?c.resolve():(b.cancel(),b._client().read(d.remote,G(b._success,b,c,d.local),G(b._error,b,c,!0,"read"),a)),c.promise()},_ensureTracker:function(){var a=this,b=a.tracker,c=a.data;if(!b){if(!c||!z.array(c))throw new Error("shield.DataSource: cannot modify when no data array is available.");b=a.tracker=new t({data:c,model:a.schema.model,events:{change:function(b){a._createView(a.data),b&&b.afterset||a.trigger(P)},error:function(b){a.trigger(Q,{errorType:"tracker",path:b?b.path:"undefined path",value:b?b.value:"undefined value",error:b?b.reason:"undefined error",model:b?b.target:"undefined target model"})}}}),a.data=b.data}},getDataIndex:function(a){return this._indices[a]},add:function(a){return this._ensureTracker(),this.tracker.add(a)},insert:function(a,b){return this._ensureTracker(),this.tracker.insert(a,b)},remove:function(a){return this._ensureTracker(),this.tracker.remove(a)},removeAt:function(a){return this._ensureTracker(),this.tracker.removeAt(a)},edit:function(a){return this._ensureTracker(),this.tracker.edit(a)},insertView:function(a,b){return this.insert(this._indices[a],b)},removeAtView:function(a){return this.removeAt(this._indices[a])},editView:function(a){return this.edit(this._indices[a])},save:function(a,b){var c,d,e,f,g=this,h=g.tracker,i=h?h.changes:{added:[],edited:[],removed:[]},j=h&&g.trigger(T,{changes:i}),k=new K;if(a=!z.defined(a)||!!a,j&&!j.isDefaultPrevented()){for(c=g.data=h.original,d=h.data,c.length=0,e=0;e<d.length;e++)c[e]=d[e];g.options.data&&!z.func(g.options.data)&&k.done(G(g._syncLocalData,g)),g._client().modify(i,G(k.resolve,k),G(g._error,g,k,!1,"save"),b),h.destroy(),h=g.tracker=null}else k.resolve(i);return a&&(f=function(){g._createView(g.data),g.trigger(P,{extra:b})},k.then(f,f)),k.promise()},_syncLocalData:function(){var a,b=this,c=b.schema,d=(c.options.fields,b.data),e=(b.options.data,[]),f=z.array(c.getReverseDataFirstItem(b.options.data));for(a=0;a<d.length;a++)e[a]=f?[]:{},c.reverseFields(d[a],e[a]);c.reverseData(e,b.options.data)},cancel:function(){var a=this,b=a.tracker,c=b&&(b.changes.added.length||b.changes.edited.length||b.changes.removed.length);b&&(a.data=b.original,b.destroy(),b=a.tracker=null,c&&(a._createView(a.data),a.trigger(P)))},destroy:function(){var a,b=this,c=["options","data","total","aggregates","filter","sort","aggregate","group","skip","take","schema","remote","view","cache"];for(b.cancel(),b.cache&&b.cache.clear(),a=0;a<c.length;a++)delete b[c[a]];w.fn.destroy.call(b)}}),n.create=function(a,b){return a instanceof n?a:new n(z.array(a)?F({data:a},b):F({},a,b))},p=v.extend({init:function(a){this.options=a},parse:function(b){var c=this.options.parse;if(z.func(c))return c(b);if(z.string(b))try{b=a.parseJSON(b)}catch(d){}return b},data:function(a){var b=this.options.data;return z.func(b)?b(a):z.string(b)?B(a,b):a},aggregates:function(a){var b=this.options.aggregates;return z.func(b)?b(a):z.string(b)?B(a,b):d},groups:function(a){var b=this.options.groups;return z.func(b)?b(a):z.string(b)?B(a,b):d},reverseData:function(a,b){var c,d=this.options.data;if(z.func(d))d(a,b);else if(z.string(d))C(b,d,a);else if(z.array(b))for(b.length=0,c=0;c<a.length;c++)b[c]=a[c]},getReverseDataFirstItem:function(a){var b=this.data(a);return z.array(b)&&b.length>0?b[0]:d},total:function(a,b){var c=this.options.total;return a=a||[],b=b||[],z.func(c)?c(a):z.string(c)?B(a,c):b.length},fields:function(a){var b=this,c=b.options.fields,d=b.model=u.define(c);return c?e(a,function(a){return p.mapFields(a,d.fn.fields)}):a},reverseFields:function(){var a,b,c,d=this,e=d.options.fields,f=[].slice.call(arguments),g=f[0],h=f.length<=1,i=h?g:f[1];for(c in e)e.hasOwnProperty(c)&&(a=e[c],b=g[c],z.string(a.path)?C(i,a.path,b):z.func(a.path)?a.path(g,b):i[c]=b,h&&delete i[c])},process:function(a){var b=this,c=b.parse(a),d=b.aggregates(a),e=b.groups(a),f=b.fields(b.data(c));return{data:f,aggregates:d,groups:e,total:b.total(c,f)}}}),p.mapFields=function(a,b){var c,e,f,g={};a=a||{};for(c in b)b.hasOwnProperty(c)&&(e=b[c],z.string(e.path)?(f=B(a,e.path),f===d&&(f=B(a,c))):f=z.func(e.path)?e.path(a):a[c],f===d?e.type&&(f=u.def(e.type,e.def,e.nullable)):f=u.convert(f,e.type),g[c]=f);return g},q=p.extend({parse:function(b){var c=this,d=c.options;if(z.func(d.parse))b=d.parse(b);else if(z.string(b))try{b=a.parseXML(b)}catch(e){}return b&&9===b.nodeType&&(b=c._json(c._root(b))),b},_root:function(a){var b,c,d=a.childNodes;for(b=0,c=d.length;b<c;b++)if(1===d[b].nodeType)return d[b];return null},_json:function(a){var b,c,d,e,f={},g={},h="";for(d=0,e=a.attributes.length;d<e;d++)b=a.attributes[d],f["_"+b.nodeName]=b.nodeValue;for(d=0,e=a.childNodes.length;d<e;d++)switch(b=a.childNodes[d],c=b.nodeName,b.nodeType){case 1:g[c]?(z.array(f[c])||(f[c]=[f[c]]),f[c].push(this._json(b))):(f[c]=this._json(b),g[c]=!0);break;case 3:h+=b.nodeValue;break;case 4:f._cdata=b.nodeValue}return h=h.replace(/^\s+(.*)\s+$/gim,"$1"),h&&(f._text=h),f}}),r=p.extend({parse:function(b){var c,d=this.options,e=d.parse,f=a(b),g=[],h=[];if(z.func(e))return e(b);if(d.result)return d.result;if(!f[0]||"table"!==f[0].tagName.toLowerCase())return b;f.eq(0).find("thead th").each(function(){h.push(a(this).text())}).end().find("tbody tr").each(function(){c={},a(this).children().each(function(b){c[h[b]]=a(this).text()}),g.push(c)});return d.result=g,g}}),s=p.extend({parse:function(b){var c=this.options,d=c.parse,e=a(b),f=[];return z.func(d)?d(b):c.result?c.result:e[0]&&"select"===e[0].tagName.toLowerCase()?(e.find("option").each(function(b){var c=a(this);f.push({value:c.attr("value"),text:c.text(),selected:c.is(":selected")})}),c.result=f,f):b}}),n.schemas={json:p,xml:q,table:r,select:s},t=w.extend({init:function(a){var b=this;b.original=a.data,b.data=Array.apply(null,a.data),b.model=a.model,b.changes={added:[],edited:[],removed:[]},w.fn.init.call(this,a)},_model:function(a){var b=this,c=new b.model(a);return c.on(P,G(b.trigger,b,P)),c.on(Q,G(b.trigger,b,Q)),c.on(U,G(b.trigger,b,P,{afterset:!0})),c},add:function(a){return this.insert(this.data.length,a)},insert:function(a,b){var c,d=this,e=d.data,f=d.changes;if(a<0||a>e.length)throw new Error("shield.DataSource: invalid item index.");return c=d._model(b),f.added.push(c),e.splice(a,0,c.data),d.trigger(P,{operation:V,index:a,model:c}),c},edit:function(a){var b,c=this,d=c.data,e=c.changes;if(isNaN(a)||a<0||a>=d.length)throw new Error("shield.DataSource: invalid item index.");return(b=I(e.added.concat(e.edited),function(b){return b.data===d[a]})[0])?b:(b=c._model(d[a]),e.edited.push(b),d[a]=b.data,b)},remove:function(a){var b=this,c=b.changes,d=I(c.added.concat(c.edited),function(b){return b===a})[0],e=-1;if(a instanceof u?d&&(e=J(d.data,b.data)):e=J(a,b.data),e>-1)return b.removeAt(e)},removeAt:function(a){var b=this,c=b.data,d=b.changes,e=I(d.added.concat(d.edited),function(b){return b.data===c[a]})[0];if(a<0||a>c.length)throw new Error("shield.DataSource: invalid item index.");return e?e.destroy():e=new b.model(c[a]),d.removed.push(e),c.splice(a,1),b.trigger(P,{operation:W,index:a,model:e}),e},destroy:function(){var a,b=this,c=b.changes,d=c.added.concat(c.edited).concat(c.removed);for(a=0;a<d.length;a++)d[a].destroy();c.added.length=c.edited.length=c.removed.length=0,b.data=b.original=null,w.fn.destroy.call(b)}}),u=w.extend({init:function(a,b){var c=this;w.fn.init.call(c,b),c.fields=F(!0,{},c.constructor.prototype.fields),c.data=F(!0,{},a)},trigger:b.ui.Widget.fn.trigger,get:function(a){return B(this.data,a)},set:function(a,b){var c=this;b=c.validate(a,b),b!==d&&(C(c.data,a,b),c.trigger(U))},validate:function(a,b){var c,e,f=this,g=B(f.fields,a);if(!g)return b;if(D(g.validator)===L)c=g.validator;else if(D(g.type.validate)===L)c=g.type.validate;else{var h=g.type.toString().split("(")[0].split(" ")[1].toLowerCase();c=u.validators[h]}if(c){if(e=c(b),e===d)return void f.trigger(Q,{errorType:"validation",path:a,value:b,error:"validation error"});b=e}return null===b&&g.nullable===!1?void f.trigger(Q,{errorType:"validation",path:a,value:b,error:"null value not allowed"}):b}}),u.define=function(a){return u.extend({fields:u.normalize(F(!0,{},a))})},u.normalize=function(a){var b,c,d;a=a||{};for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=D(c),d===L?a[b]={type:c}:d===M?a[b]={type:c}:d===O&&(a[b]={path:c}));return a},u.def=function(a,b,c){var e;return b!==d?D(b)===L?b():b:c?null:a===String?"":a===Number?0:a===Date?new Date:a!==Boolean&&(a===Array?[]:a===Object?{}:(e=D(a),e===M?[]:e===N?{}:e===L?a():null))},u.convert=function(a,b){var c;return null==a?a:b===String?a.toString():b===Number?(c=parseFloat(a),isNaN(c)?a:c):b===Date?(c=new Date(a),isNaN(c.getTime())?a:c):b===Boolean?z.string(a)?!/^(false|0)$/i.test(a):!!a:a},u.validators={string:function(a){return null==a?null:a.toString()},number:function(a){return null===a?null:isNaN(+a)?d:+a},date:function(a){return null===a?null:a instanceof Date?a:(a=new Date(a),isNaN(a.getTime())?d:a)},"boolean":function(a){return null===a?null:null==a?d:!!a},array:function(a){return null===a?null:D(a)===M?a:d},object:function(a){return null===a?null:D(a)===N?a:d}},o=n.extend({init:function(a){F(a,{resursive:!0}),n.fn.init.call(this,a)}}),F(b,{map:e,DataSource:n,RecursiveDataSource:o,DataQuery:j,Model:u})}(jQuery,shield,this),function(a,b,c,d){function e(){if(M(m))return m;var b,c,d=a('<div style="width:50px;position:absolute;overflow:hidden;height:50px;display:block;"><div style="width:auto;height:100px;"></div></div>'),e=d.children()[0];return a(C.body).append(d),b=e.offsetWidth,d.css(ra,ya),c=e.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),m=b-c}function f(a){var b=a.isWindow||a.isDocument?"":a.element.css(wa),c=a.isWindow||a.isDocument?"":a.element.css(xa),d=b===ya||b===sa&&a.width<a.element[0].scrollWidth,f=c===ya||c===sa&&a.height<a.element[0].scrollHeight;return{width:f?e():0,height:d?e():0}}function g(b){var d=a(b||c),e=L(d[0]),f=!!d[0]&&9===d[0].nodeType;return{element:d,isWindow:e,isDocument:f,offset:e?{left:0,top:0}:d.offset()||{left:0,top:0},scrollLeft:d.scrollLeft(),scrollTop:d.scrollTop(),width:e||f?d.width():d.outerWidth(),height:e||f?d.height():d.outerHeight()}}function h(a,b,c){return[T(a[0])*(Z.test(a[0])?b/100:1),T(a[1])*(Z.test(a[1])?c/100:1)]}function i(a,b){var c=a.css(b);return c?S(c)||0:0}function j(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:L(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:a.outerWidth(),height:a.outerHeight(),offset:a.offset()}}function k(b,c){var d=0,e=M(c)?a(c).find(b):a(b);return e.each(function(b){d=F(d,i(a(this),"z-index"))}),d}function l(a){return a.pageX||a.pageY?{x:a.pageX,y:a.pageY}:{x:a.clientX+C.body.scrollLeft-C.body.clientLeft,y:a.clientY+C.body.scrollTop-C.body.clientTop}}var m,n,o,p,q,r,s,t,u,v,w,x,y,z=b.ui.Widget,A=(b.Class,b.Constants.KeyCode),B=b.error,C=document,D=Math.abs,E=Math.min,F=Math.max,G=Math.round,H=Math.floor,I=a.extend,J=a.proxy,K=a.each,L=a.isWindow,M=b.is.defined,N=b.is.func,O=b.is.number,P=b.is.object,Q=(b.is["null"],b.is.string),R=b.is.array,S=b.to["int"],T=b.to.number,U=b.to.string,V=/left|center|right/,W=/top|center|bottom/,X=/[\+\-]\d+(\.[\d]+)?%?/,Y=/^\w+/,Z=/%$/,$="mousedown",_="mouseup",aa="mousemove",ba="keydown",ca="start",da="stop",ea="resize",fa="resized",ga="drag",ha="drop",ia="cancel",ja="disabled",ka="px",la="left",ma="right",na="top",oa="bottom",pa="middle",qa="center",ra="overflow",sa="auto",ta="position",ua="absolute",va="relative",wa="overflow-x",xa="overflow-y",ya="scroll",za="horizontal",Aa="vertical",Ba="my",Ca="at",Da="marginLeft",Ea="marginRight",Fa="marginTop",Ga="marginBottom",Ha="flip",Ia="pointer",Ja="fit",Ka="intersect",La="sui-resizable",Ma=La+"-"+ja,Na="sui-draggable",Oa=Na+"-"+ja,Pa=Na+"-dragging",Qa="sui-unselectable",Ra="sui-droppable",Sa=Ra+"-"+ja,Ta=Ra+"-over",Ua=0;p={},p.GetWithinInfo=g,p.GetMaxZIndex=k,p.GetCoordinates=l,b.ui.Util=p,n=function(){return Ua++,o?o:(this.init(),void(o=this))},n.prototype={_pos:null,init:function(){var b=this;a(C).on(aa+".suiMouseTracker",J(b._onMouseMove,b))},_onMouseMove:function(a){this._pos=this.getPosFromEvent(a)},getPosFromEvent:function(a){return l(a)},getPosition:function(a){var b=this;return null===b._pos&&M(a)&&(b._pos=b.getPosFromEvent(a)),b._pos},isInWindow:function(b){var d=this,e=d.getPosition(b),f=e.x,g=e.y,h=a(c).scrollTop(),i=a(c).scrollLeft();return f>=i&&f<=i+a(c).width()&&g>=h&&g<=h+a(c).height()},destroy:function(){--Ua>0||(a(C).off(aa+".suiMouseTracker"),o=null)}},b.MouseTracker=n,q={},q.Set=function(b,c,d){if(!b||!c||!d)throw"Invalid arguments passed to Position.Set";var e,k,l,m,n,o,p={my:d.source,at:d.target,collision:d.overflow,inside:d.inside},q=a(c),s=g(p.inside),t=f(s),u=(p.collision||Ha).split(" "),v={};o=j(q),q[0].preventDefault&&(p.at="left top"),k=o.width,l=o.height,m=o.offset,n=I({},m),K([Ba,Ca],function(){var a,b,c=this,d=(p[c]||"").split(" ");1===d.length&&(d=V.test(d[0])?d.concat([qa]):W.test(d[0])?[qa].concat(d):[qa,qa]),d[0]=V.test(d[0])?d[0]:qa,d[1]=W.test(d[1])?d[1]:qa,a=X.exec(d[0]),b=X.exec(d[1]),v[c]=[a?a[0]:0,b?b[0]:0],p[c]=[Y.exec(d[0])[0],Y.exec(d[1])[0]]}),1===u.length&&(u[1]=u[0]),p.at[0]===ma?n.left+=k:p.at[0]===qa&&(n.left+=k/2),p.at[1]===oa?n.top+=l:p.at[1]===qa&&(n.top+=l/2),e=h(v.at,k,l),n.left+=e[0],n.top+=e[1];var w,x,y=a(b),z=y.outerWidth(),A=y.outerHeight(),B=i(y,Da),C=i(y,Fa),E=z+B+i(y,Ea)+t.width,H=A+C+i(y,Ga)+t.height,J=I({},n),L=h(v.my,y.outerWidth(),y.outerHeight());p.my[0]===ma?J.left-=z:p.my[0]===qa&&(J.left-=z/2),p.my[1]===oa?J.top-=A:p.my[1]===qa&&(J.top-=A/2),J.left+=L[0],J.top+=L[1],J.left=G(J.left),J.top=G(J.top),w={marginLeft:B,marginTop:C},K([la,na],function(a,b){r[u[a]]&&r[u[a]][b](J,{targetWidth:k,targetHeight:l,elemWidth:z,elemHeight:A,collisionPosition:w,collisionWidth:E,collisionHeight:H,offset:[e[0]+L[0],e[1]+L[1]],my:p.my,at:p.at,within:s,elem:y})}),N(d.callback)&&(x=function(){var a=m.left-J.left,b=a+k-z,c=m.top-J.top,e=c+l-A,f={target:{element:q,left:m.left,top:m.top,width:k,height:l},element:{element:y,left:J.left,top:J.top,width:z,height:A},horizontal:b<0?la:a>0?ma:qa,vertical:e<0?na:c>0?oa:pa};k<=z&&D(a+b)<=k&&(f.horizontal=qa),l<=A&&D(c+e)<=l&&(f.vertical=pa),F(D(a),D(b))>F(D(c),D(e))?f.important=za:f.important=Aa,d.callback(f)}),y.offset(J),x&&x()},r={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,f=d.width,g=a.left-b.collisionPosition.marginLeft,h=e-g,i=g+b.collisionWidth-f-e;b.collisionWidth>f?h>0&&i<=0?(c=a.left+h+b.collisionWidth-f-e,a.left+=h-c):i>0&&h<=0?a.left=e:h>i?a.left=e+f-b.collisionWidth:a.left=e:h>0?a.left+=h:i>0?a.left-=i:a.left=F(a.left-g,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,f=b.within.height,g=a.top-b.collisionPosition.marginTop,h=e-g,i=g+b.collisionHeight-f-e;b.collisionHeight>f?h>0&&i<=0?(c=a.top+h+b.collisionHeight-f-e,a.top+=h-c):i>0&&h<=0?a.top=e:h>i?a.top=e+f-b.collisionHeight:a.top=e:h>0?a.top+=h:i>0?a.top-=i:a.top=F(a.top-g,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,h=e.isWindow?e.scrollLeft:e.offset.left,i=a.left-b.collisionPosition.marginLeft,j=i-h,k=i+b.collisionWidth-g-h,l=b.my[0]===la?-b.elemWidth:b.my[0]===ma?b.elemWidth:0,m=b.at[0]===la?b.targetWidth:b.at[0]===ma?-b.targetWidth:0,n=-2*b.offset[0];j<0?(c=a.left+l+m+n+b.collisionWidth-g-f,(c<0||c<D(j))&&(a.left+=l+m+n)):k>0&&(d=a.left-b.collisionPosition.marginLeft+l+m+n-h,(d>0||D(d)<k)&&(a.left+=l+m+n))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,h=e.isWindow?e.scrollTop:e.offset.top,i=a.top-b.collisionPosition.marginTop,j=i-h,k=i+b.collisionHeight-g-h,l=b.my[1]===na,m=l?-b.elemHeight:b.my[1]===oa?b.elemHeight:0,n=b.at[1]===na?b.targetHeight:b.at[1]===oa?-b.targetHeight:0,o=-2*b.offset[1];j<0?(d=a.top+m+n+o+b.collisionHeight-g-f,a.top+m+n+o>j&&(d<0||d<D(j))&&(a.top+=m+n+o)):k>0&&(c=a.top-b.collisionPosition.marginTop+m+n+o-h,a.top+m+n+o>k&&(c>0||D(c)<k)&&(a.top+=m+n+o))}},flipfit:{left:function(){r.flip.left.apply(this,arguments),r.fit.left.apply(this,arguments)},top:function(){r.flip.top.apply(this,arguments),r.fit.top.apply(this,arguments)}}},b.ui.Position=q,y={enabled:!0,cls:d,iframeFix:!1,resizeCls:d,delta:1,handles:["e","w","n","s","se","sw","ne","nw"],handleWidth:8,handleZIndex:105,minHeight:16,minWidth:16,maxHeight:d,maxWidth:d,events:{}},x=z.extend({init:function(){z.fn.init.apply(this,arguments),M(this.initialOptions.handles)&&(this.options.handles=this.initialOptions.handles);var b=this,c=a(b.element),d=b.options,e=d.cls;b._eventNS=".shieldResizable"+b.getInstanceId(),b.mouseTracker=new n,c.addClass(La+(e?" "+e:"")),b._initHandles(),b.enabled(d.enabled)},_initHandles:function(){var b,c,d,e=this,f=a(e.element),g=(f.width(),f.height()),h=e.options,i=h.handles,j=h.handleWidth,k=j+ka,l=j+2+ka,m="-"+(j-2)+ka,n=h.handleZIndex;for(e.handles=[],d=0;d<i.length;d++){switch(b=U(i[d]).toLowerCase(),c={},b){case"e":c={width:k,height:g+ka,top:0,right:m};break;case"w":c={width:k,height:g+ka,top:0,left:m};break;case"n":c={width:"100%",height:k,top:m};break;case"s":c={width:"100%",height:k,bottom:m};break;case"se":c={width:l,height:l,bottom:m,right:m};break;case"sw":c={width:l,height:l,bottom:m,left:m};break;case"ne":c={width:l,height:l,top:m,right:m};break;case"nw":c={width:l,height:l,top:m,left:m}}c.zIndex=n,e.handles[d]={type:b},e.handles[d][$]=J(e._handleMouseDown,e,d),e.handles[d].element=a('<div class="sui-resizable-handle sui-resizable-dir-'+b+'"></div>').appendTo(f).css(c).on($,e.handles[d][$])}a(C).on(_+e._eventNS,J(e._handleMouseUp,e)).on(aa+e._eventNS,J(e._handleMouseMove,e))},_destroyHandles:function(){var b,c=this,d=c.handles;for(a(C).off(c._eventNS),b=0;b<d.length;b++)a(c.handles[b].element).off($,c.handles[b][$]).remove();c.handles=[]},_fixIframes:function(){var b,c=this,d=c.options.iframeFix;d&&(b=d===!0?"iframe":d,c._fixedFrames=a(C.body).find(b).map(function(){var b=a(this);return a("<div/>").css(ta,ua).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(b,c){var d=this;d._enabled&&!d.resizing&&(d.resizing=!0,d.resizingHandle=b,d.oldPos=d.mouseTracker.getPosition(c),d.startSent=!1,a(d.element).addClass(Qa),d._fixIframes())},_handleMouseMove:function(b){var c,d,e,f,g,h,j,k,l,m,n,o,p,q,r=this,s=a(r.element),t=r.options,u=t.delta,v=t.minWidth,w=t.maxWidth,x=t.minHeight,y=t.maxHeight,z=t.resizeCls,A=r.resizingHandle,B=r.handles,C=r.mouseTracker,E=r.oldPos;if(C.isInWindow(b)&&r.resizing&&M(A)&&(e=C.getPosition(b),f=e.x-E.x,g=e.y-E.y,c=B[A],d=c.type,D(f)>=u||D(g)>=u)){switch(/^(se|sw|ne|nw)$/i.test(d)||(/^(e|w)$/i.test(d)?g=0:f=0),D(f)<u&&(f=0),D(g)<u&&(g=0),h=f,j=g,k=0,l=0,d){case"w":h=-f,k=-h;break;case"n":j=-g,l=-j;break;case"nw":h=-f,j=-g,k=-h,l=-j;break;case"sw":h=-f,k=-h;break;case"ne":j=-g,l=-j}if(o=s.width(),p=s.height(),m=i(s,na),n=i(s,la),h>0?(M(w)&&o+h>w&&(h=w-o,0!==k&&(k=-h)),n+k<0&&(h-=n-k,k=-h)):h<0&&M(v)&&o+h<v&&(h=v-o,0!==k&&(k=-h)),j>0?(M(y)&&p+j>y&&(j=y-p,0!==l&&(l=-j)),m+l<0&&(j-=m-l,l=-j)):j<0&&M(x)&&p+j<x&&(j=x-p,0!==l&&(l=-j)),0!==h||0!==j){r.startSent||(r.startSent=!0,r.trigger(ca),z&&s.addClass(z));var F=r.trigger(ea,{deltaX:h,deltaY:j});if(!F.isDefaultPrevented()){if(s.width(o+h).height(p+j),0===k&&0===l||s.css({top:m+l+ka,left:n+k+ka}),r.oldPos.x=r.oldPos.x+f,r.oldPos.y=r.oldPos.y+g,0!==g)for(q=0;q<B.length;q++)c=B[q],/^(e|w)$/i.test(c.type)&&a(c.element).height(p+j);r.trigger(fa)}}}},_handleMouseUp:function(b){var c=this,e=!!c.startSent,f=c.options.resizeCls;c._unfixIframes(),c.resizing&&(c.resizing=!1,c.resizingHandle=d,c.oldPos=d,c.startSent=!1,e&&c.trigger(da),a(c.element).removeClass(Qa+(f?" "+f:"")))},resize:function(b,c){var d=this,e=d.options;b=F(E(b,e.maxWidth),e.minWidth),c=F(E(c,e.maxHeight),e.minHeight),a(d.element).width(b).height(c)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeClass(Ma):d.addClass(Ma),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker.destroy(),b.mouseTracker=null,a(b.element).removeClass(La+(c?" "+c:"")),b._destroyHandles(),z.fn.destroy.call(b)}}),x.defaults=y,b.ui.plugin("Resizable",x),s={droppables:{"default":[]},Register:function(a){var b=a.options.scope;s.droppables[b]=s.droppables[b]||[],s.droppables[b].push(a)},UnRegister:function(a){var b,c=a.options.scope,d=s.droppables[c];for(b=0;b<d.length;b++)d[b]===a&&d.splice(b,1)},PrepareOffsets:function(b,c){var d,e,f,g=s.droppables[b.options.scope]||[],h=a(b.helper||b.element);for(f=0;f<g.length;f++)d=g[f].enabled(),e=g[f].visible(),g[f].ddIsEnabled=d,g[f].ddIsVisible=e,!d||!e||b&&!g[f].accepts(b.element)||b&&b.element.get(0)===g[f].element.get(0)||(g[f].ddOffset=g[f].element.offset(),g[f].proportions({width:g[f].element[0].offsetWidth,height:g[f].element[0].offsetHeight}));b.proportions({width:h[0].offsetWidth,height:h[0].offsetHeight})},DragStart:function(a,b){s.PrepareOffsets(a,b)},Drag:function(a,b){var c,d,e=s.droppables[a.options.scope]||[],f=e.length;for(d=0;d<f;d++)!e[d].ddIsEnabled||!e[d].ddIsVisible||a&&!e[d].accepts(a.element)||a&&a.element.get(0)===e[d].element.get(0)||(c=s.Intersects(a,e[d],b),c?e[d].ddIsOver||(e[d].ddIsOver=!0,e[d].over(a,b)):e[d].ddIsOver&&(e[d].ddIsOver=!1,e[d].out(a,b)))},Drop:function(a,b){var c,d,e,f,g,h=s.droppables[a.options.scope]||[],i=h.length;for(d=0;d<i;d++)!h[d].ddIsEnabled||!h[d].ddIsVisible||a&&!h[d].accepts(a.element)||a&&a.element.get(0)===h[d].element.get(0)||(h[d].stop(),c=s.Intersects(a,h[d],b),h[d].ddIsOver=!1,c&&(g=h[d].drop(a,b),g.isDefaultPrevented()&&(e=!0),g.skipAnimation&&(f=!0)));return{cancelled:e,skipAnimation:f}},Intersects:function(b,c,d){var e,f,g,h,i,j,k,l,m,o=c.options.tolerance,p=P(o)?o.x:o,q=P(o)?o.y:o,r=c.proportions(),t=c.ddOffset,u=r.width,v=r.height,w=t.left,x=t.top;if(p==Ia){var y=new n;m=y.getPosition(d),y.destroy(),e=w<=m.x&&w+u>=m.x}else g=b.proportions(),h=g.width,i=g.height,j=a(b.helper||b.element).offset(),k=j.left,l=j.top,e=p==Ja?s._linesOverlap(k,k+h,w,w+u,h):p==Ka?s._linesOverlap(k,k+h,w,w+u,h/2):s._linesOverlap(k,k+h,w,w+u,0);if(!e)return!1;if(q==Ia){if(!m){var z=new n;m=z.getPosition(d),z.destroy()}f=x<=m.y&&x+v>=m.y}else g||(g=b.proportions(),h=g.width,i=g.height,j=a(b.helper||b.element).offset(),k=j.left,l=j.top),f=q==Ja?s._linesOverlap(l,l+i,x,x+v,i):q==Ka?s._linesOverlap(l,l+i,x,x+v,i/2):s._linesOverlap(l,l+i,x,x+v,0);return e&&f},_linesOverlap:function(a,b,c,d,e){return M(e)||(e=0),a<c&&b<d?b-c>e:!(a>c&&b>d)||d-a>e}},b.ui.DDManager=s,u={enabled:!0,iframeFix:!1,cls:d,dragCls:d,scope:"default",handle:d,direction:d,min:d,max:d,step:d,allowedPositions:d,stack:!0,helper:d,appendTo:"parent",animation:{enabled:!0,revertDuration:200},events:{}},t=z.extend({init:function(){z.fn.init.apply(this,arguments);var b,c=this,d=a(c.element),e=c.options,f=e.cls;c._eventNS=".shieldDraggable"+c.getInstanceId(),c.mouseTracker=new n,d.addClass(Na+(f?" "+f:"")),b=d.css(ta),b!==va&&b!==ua&&(c._origPosStyle=b,d.css(ta,va)),c.enabled(e.enabled),c.startSent=!1},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},_fixIframes:function(){var b,c=this,d=c.options.iframeFix;d&&(b=d===!0?"iframe":d,c._fixedFrames=a(C.body).find(b).map(function(){var b=a(this);return a("<div/>").css(ta,ua).appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]}))},_unfixIframes:function(){var b=this;b._fixedFrames&&(a(b._fixedFrames).remove(),delete b._fixedFrames)},_handleMouseDown:function(b){var c=this,d=c._eventNS;c._enabled&&!c._dragging&&(a(C.body).addClass(Qa),c._dragging=!0,c.startSent=!1,c.helper=c._isCustomHelper=null,c.stepPosition=c.mousePos=c.mouseTracker.getPosition(b),a(C).on(aa+d,J(c._handleMouseMove,c)).on(_+d,J(c._handleMouseUp,c)).on(ba+d,J(c._handleKeyDown,c)),c._fixIframes())},_initHelper:function(b){var c,d=this,e=d.element,f=d.options,g=f.helper,h=f.appendTo,j=f.cls,k=f.dragCls;d._helperInitialized||(g&&"original"!==g?(c=N(g)?g.call(d,{position:d.oriPosition,event:b}):"clone"==g?e.clone():a(g),c.parents("body").length||("parent"===h?e.after(c):h&&"body"!==h?c.appendTo(a(h)):c.appendTo(C.body)),/(fixed|absolute)/i.test(c.css(ta))||c.css(ta,ua),q.Set(c,e,{source:"left top",target:"left top",overflow:"none"}),d._isCustomHelper=!0):(c=e,d._isCustomHelper=!1),d.helper=c,c.addClass(Qa+" "+Na+(j?" "+j:"")+" "+Pa+(k?" "+k:"")),d.oriPosition={left:i(c,la),top:i(c,na)},d._helperInitialized=!0)},_handleMouseMove:function(b){var c,e,f,g,h,j,k,l,m,n,o,p,q=this,r=q.options,t=r.step,u=r.direction,v=r.allowedPositions,w=v!==d&&v.length>0,x=r.min,y=r.max,z=q.mouseTracker,A=z.getPosition(b);
if(z.isInWindow(b)&&q._dragging){if(q._initHelper(b),n=a(q.helper),o=n.width(),p=n.height(),g=i(n,na),h=i(n,la),w){var B,C,G,I,J,K,L=d,Q=d,R=d,S=d;for(B=A.x-q.stepPosition.x,C=A.y-q.stepPosition.y,G=h+B,I=g+C,J=0;J<v.length;J++)K=v[J],K.x!==d&&(R===d||R>D(G-K.x))&&(R=D(G-K.x),L=J),K.y!==d&&(S===d||S>D(I-K.y))&&(S=D(I-K.y),Q=J);j=h,k=g,L!==d&&(j=v[L].x,q.stepPosition.x+=v[L].x-h),Q!==d&&(k=v[Q].y,q.stepPosition.y+=v[Q].y-g)}else{if(l=u==Aa?0:A.x-q.mousePos.x,m=u==za?0:A.y-q.mousePos.y,M(t)){if(c=N(t)?t.call(this,{deltaX:l,deltaY:m,element:n,domEvent:b,helperLeft:i(n,la),helperTop:i(n,na),mouse:A}):t,O(c)?e=f=c:P(c)&&(e=c.x,f=c.y),M(e)&&D(l)<e&&M(f)&&D(m)<f)return;M(e)&&e>1&&l%e!==0&&(l=(l>=0?1:-1)*H(D(l)/e)*e),M(f)&&f>1&&m%f!==0&&(m=(m>=0?1:-1)*H(D(m)/f)*f)}j=h+l,k=F(0,g+m)}u==za&&(x!==d&&(j=F(x,j),j===x&&(l=0)),y!==d&&(j=E(y-o,j),j===y-o&&(l=0))),u==Aa&&(x&&(k=F(x,k),k===x&&(m=0)),y&&(k=E(y-p,k),k===y-p&&(m=0))),n.css({left:j,top:k}),q.mousePos=A,q.startSent||(q.startSent=!0,q.trigger(ca,{element:n,domEvent:b}),q._adjustZIndex(),s.DragStart(q,b)),q.trigger(ga,{deltaX:l,deltaY:m,element:n,domEvent:b}),s.Drag(q,b)}},_handleMouseUp:function(b){var c,d,e,f,g=this,h=g.element,j=g.helper,k=g.options.animation;g._unfixIframes(),a(C.body).removeClass(Qa),g._dragging&&(g.startSent?(d=s.Drop(g,b),e=d.cancelled,f=d.skipAnimation,c=g.trigger(da,{left:i(j,la),top:i(j,na),element:j,domEvent:b,cancelled:e,skipAnimation:f}),f=c.skipAnimation,e=c.cancelled,e===!0||c.isDefaultPrevented()?a(j).animate({left:g.oriPosition.left,top:g.oriPosition.top},!f&&k&&k.enabled?k.revertDuration:0,J(g._endDrag,g)):(g._isCustomHelper&&(q.Set(h,j,{source:"left top",target:"left top",overflow:"none"}),g._adjustZIndex(h)),g._endDrag())):g._endDrag())},_adjustZIndex:function(b){var c=this,d=c.options.stack;d!==!1&&(M(b)||(b=c.helper),a(b).css("z-index",k(d===!0?"."+Na:d)+1))},_handleKeyDown:function(a){var b=this,c=a.keyCode;switch(c){case A.ESC:b._dragging&&(b.helper.css({left:b.oriPosition.left+ka,top:b.oriPosition.top+ka}),b.trigger(ia),b._unfixIframes(),b._endDrag())}},_endDrag:function(){var b=this,c=b.options.dragCls;b._dragging=!1,b._isCustomHelper?a(b.helper).remove():a(b.helper).removeClass(Qa+" "+Pa+(c?" "+c:"")),a(C).off(b._eventNS),b.mousePos=b.oriPosition=b.helper=b._isCustomHelper=b._helperInitialized=null},enabled:function(){var b,c=this,d=a(c.element),e=c.options,f=e.handle?a(e.handle):d,g=[].slice.call(arguments);return g.length>0?(b=!!g[0],b?(d.removeClass(Oa),c._mouseDownProxy||(c._mouseDownProxy=J(c._handleMouseDown,c),f.on($,c._mouseDownProxy))):(d.addClass(Oa),c._mouseDownProxy&&(f.off($,c._mouseDownProxy),c._mouseDownProxy=null)),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;b.mouseTracker&&(b.mouseTracker.destroy(),b.mouseTracker=null),a(b.element).removeClass(Na+(c?" "+c:"")),b._origPosStyle&&(a(b.element).css(ta,b._origPosStyle),b._origPosStyle=null),z.fn.destroy.call(b)}}),t.defaults=u,b.ui.plugin("Draggable",t),w={enabled:!0,accepts:"*",cls:d,hoverCls:d,tolerance:"intersect",scope:"default",events:{}},v=z.extend({init:function(){z.fn.init.apply(this,arguments);var b=this,c=a(b.element),d=b.options,e=d.dieOnError,f=d.accepts,g=d.cls;return Q(f)||R(f)||f instanceof a||N(f)?(b._eventNS=".shieldDroppable"+b.getInstanceId(),c.addClass(Ra+(g?" "+g:"")),s.Register(b),void b.enabled(d.enabled)):void B("shieldDroppable: The accepts option must be a string, array, function or jQuery object.",e)},accepts:function(b){var c=this.options.accepts;return N(c)?c.call(this,b):a(b).is(c)},proportions:function(){var a=this;return arguments.length>0?void(a._proportions=arguments[0]):a._proportions?a._proportions:a._proportions={width:a.element[0].offsetWidth,height:a.element[0].offsetHeight}},over:function(b,c){var d=this,e=d.options.hoverCls,f=d.trigger("over",{draggable:b.element,droppable:this.element,domEvent:c});f.isDefaultPrevented()||a(d.element).addClass(Ta+(e?" "+e:""))},out:function(b,c){var d=this,e=d.options.hoverCls;d.trigger("out",{draggable:b.element,droppable:this.element,domEvent:c}),a(d.element).removeClass(Ta+(e?" "+e:""))},stop:function(){var b=this.options.hoverCls;a(this.element).removeClass(Ta+(b?" "+b:""))},drop:function(a,b){return this.trigger(ha,{draggable:a.element,droppable:this.element,cancelled:b.cancelled,skipAnimation:b.skipAnimation,domEvent:b})},enabled:function(){var b,c=this,d=[].slice.call(arguments);return d.length>0?(b=!!d[0],b?a(c.element).removeClass(Sa):a(c.element).addClass(Sa),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this,c=b.options.cls;s.UnRegister(b),a(b.element).removeClass(Ra+Sa+Qa+(c?" "+c:"")),b._enabled=b._proportions=d,z.fn.destroy.call(b)}}),v.defaults=w,b.ui.plugin("Droppable",v)}(jQuery,shield,this),function(a,b,c,d){var e,f,g,h,i,j,k=b.exp=b.exp||{},l=b.Class,m=(b.DataSource,b.support.browser),n=b.iid,o=document,p=a.extend,q=a.map,r=a.each,s=b.is,t=s.string,u=s.array,v=s.number,w=s["boolean"],x=s.date,y=s.defined,z=s["null"],A=s.func,B=s.object,C=b.to["int"],D=b.to.key,E=b.error,F=b.keys,G=(b.get,b.Constants.XHTML_NS),H="application/octet-stream",I="download",J="Untitled",K=function(){},L="author",M="creator",N="l",O="p",P="mm",Q="in",R="pt",S="cm",T="px",U="pc",V="em",W="ex",X="RG",Y="helvetica",Z="times",$="sans-serif",_="arial",aa="verdana",ba="fixed",ca="monospace",da="serif",ea="terminal",fa="cursive",ga="fantasy",ha="courier",ia="normal",ja="bold",ka="italic",la="bolditalic",ma="center",na="both",oa="S",pa="F",qa="FD",ra="DF",sa="B",ta="f*",ua="B*",va=19.049976/25.4,wa=function(b){return a("<div/>").text(b).html().replace('"',"&quot;").replace(/(?:[\x00-\x08]|[\x0B-\x0C]|[\x0E-\x1F])/g,"")},xa=function(b){return a("<div/>").html(b).text()},ya=function(a){x(a)||(t(a)&&(a=a.replace(/\s+/g,"")),a=new Date(a));var b=25569+a.getTime()/864e5;return b.toString()},za=function(a){return y(a)?x(a)?a:new Date(t(a)?a.replace(/\s+/g,""):a):new Date},Aa=function(a){return za(a).toISOString().replace(/\.\d+/,"")},Ba=function(a){return y(a)&&t(a)&&a.length>0?a.charAt(0).toUpperCase()+a.substr(1):a},Ca=function(a){return a?1:0},Da=function(a){return("FF"+a).replace("#","").toUpperCase()},Ea=function(a){for(var b,c=C(a),d="";c>0;)b=(c-1)%26,d=String.fromCharCode(65+b)+d,c=C((c-b)/26);return d},Fa=function(a,b){return Ea(b)+a},Ga=function(a,b){return'<?xml version="1.0"'+(a?' encoding="UTF-8"':"")+(b?' standalone="yes"':"")+"?>\n"},Ha=function(){return Ga(1,1)},Ia=function(a){return a},Ja=function(a,b){return b=y(b)?b:7,Ia(((a-5)/7*100+.5)/100)},Ka=function(a,b){return b=y(b)?b:7,Ia((a*b+5)/b*256/256)},La=function(a,b){if(a&&b){var c=a.indexOf(b);return c>=0&&c===a.length-b.length}return!1};!function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";y(a.btoa)||(a.btoa=function(a){var c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!a)return a;do c=a.charCodeAt(k++),d=a.charCodeAt(k++),e=a.charCodeAt(k++),j=c<<16|d<<8|e,f=j>>18&63,g=j>>12&63,h=j>>6&63,i=63&j,n[l++]=b.charAt(f)+b.charAt(g)+b.charAt(h)+b.charAt(i);while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}),y(a.atob)||(a.atob=function(a){var c,d,e,f,g,h,i,j,k=0,l=0,m="",n=[];if(!a)return a;a+="";do f=b.indexOf(a.charAt(k++)),g=b.indexOf(a.charAt(k++)),h=b.indexOf(a.charAt(k++)),i=b.indexOf(a.charAt(k++)),j=f<<18|g<<12|h<<6|i,c=j>>16&255,d=j>>8&255,e=255&j,64==h?n[l++]=String.fromCharCode(c):64==i?n[l++]=String.fromCharCode(c,d):n[l++]=String.fromCharCode(c,d,e);while(k<a.length);return m=n.join("")})}(c),function(){if(c.URL=c.URL||c.webkitURL,c.Blob&&c.URL)try{new c.Blob;return void(k.Blob=c.Blob)}catch(a){}var b=c.BlobBuilder||c.WebKitBlobBuilder||c.MozBlobBuilder||function(){var a=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},b=function(){this.data=[]},d=function(a,b,c){var d=this;d.data=a,d.size=a.length,d.type=b,d.encoding=c},e=b.prototype,f=d.prototype,g=c.FileReaderSync,h=function(a){var b=this;b.code=b[b.name=a]},i="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),j=i.length,k=c.URL||c.webkitURL||c,l=k.createObjectURL,m=k.revokeObjectURL,n=k,p=c.btoa,q=c.atob,r=c.ArrayBuffer,s=c.Uint8Array,t=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(d.fake=f.fake=!0;j--;)h.prototype[i[j]]=j+1;return k.createObjectURL||(n=c.URL=function(a){var b,c=o.createElementNS(G,"a");return c.href=a,"origin"in c||("data:"===c.protocol.toLowerCase()?c.origin=null:(b=a.match(t),c.origin=b&&b[1])),c}),n.createObjectURL=function(a){var b,c=a.type;return z(c)&&(c=H),a instanceof d?(b="data:"+c,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):p?b+";base64,"+p(a.data):b+","+encodeURIComponent(a.data)):l?l.call(k,a):void 0},n.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&m&&m.call(k,a)},e.append=function(b){var e=this.data;if(y(s)&&(b instanceof r||b instanceof s)){var f,i="",j=new s(b),k=j.length;for(f=0;f<k;f++)i+=String.fromCharCode(j[f]);e.push(i)}else if("Blob"===a(b)||"File"===a(b)){if(!g)throw new h("NOT_READABLE_ERR");var l=new g;e.push(l.readAsBinaryString(b))}else b instanceof d?"base64"===b.encoding&&q?e.push(q(b.data)):"URI"===b.encoding?e.push(decodeURIComponent(b.data)):"raw"===b.encoding&&e.push(b.data):(b+="",e.push(c.unescape(encodeURIComponent(b))))},e.getBlob=function(a){return arguments.length||(a=null),new d(this.data.join(""),a,"raw")},e.toString=function(){return"[object BlobBuilder]"},f.slice=function(a,b,c){var e=this,f=arguments.length;return f<3&&(c=null),new d(e.data.slice(a,f>1?b:e.data.length),c,e.encoding)},f.toString=function(){return"[object Blob]"},f.close=function(){this.size=0,delete this.data},b}();k.Blob=function(a,d){var e,f,g,h=d?d.type||"":"",i=new b,j=c.Uint8Array;if(a)for(e=0,f=a.length;e<f;e++)y(j)&&j&&a[e]instanceof j?i.append(a[e].buffer):i.append(a[e]);return g=i.getBlob(h),!g.slice&&g.webkitSlice&&(g.slice=g.webkitSlice),g};var d=Object.getPrototypeOf||function(a){return a.__proto__};k.Blob.prototype=d(new k.Blob)}(),function(){var b=c.saveAs||function(){if(m.ie&&m.version<10)return d;var a=function(){return c.URL||c.webkitURL||c},b=o.createElementNS(G,"a"),e=I in b,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=c.webkitRequestFileSystem,h=c.requestFileSystem||g||c.mozRequestFileSystem,i=function(a){(c.setImmediate||c.setTimeout)(function(){throw a},0)},j=H,k=0,l=500,n=function(b){var d=function(){t(b)?a().revokeObjectURL(b):b.remove()};c.chrome?d():setTimeout(d,l)},p=function(a,b,c){var d,e;for(b=[].concat(b),d=b.length;d--;)if(e=a["on"+b[d]],A(e))try{e.call(a,c||a)}catch(f){i(f)}},q=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\ufeff",a],{type:a.type}):a},r=function(d,i,l){l||(d=q(d));var m,o,r,s=this,t=d.type,u=!1,v=function(){p(s,"writestart progress write writeend".split(" "))},w=function(){var b;!u&&m||(m=a().createObjectURL(d)),o?o.location.href=m:(b=c.open(m,"_blank"),y(b)||"undefined"==typeof safari||(c.location.href=m)),s.readyState=s.DONE,v(),n(m)},x=function(a){return function(){if(s.readyState!==s.DONE)return a.apply(this,arguments)}},z={create:!0,exclusive:!1};return s.readyState=s.INIT,i||(i=J),e?(m=a().createObjectURL(d),b.href=m,b.download=i,void setTimeout(function(){f(b),v(),n(m),s.readyState=s.DONE})):(c.chrome&&t&&t!==j&&(r=d.slice||d.webkitSlice,d=r.call(d,0,d.size,j),u=!0),g&&i!==I&&(i+="."+I),(t===j||g)&&(o=c),h?(k+=d.size,void h(c.TEMPORARY,k,x(function(a){a.root.getDirectory("saved",z,x(function(a){var b=function(){a.getFile(i,z,x(function(a){a.createWriter(x(function(b){b.onwriteend=function(b){o.location.href=a.toURL(),s.readyState=s.DONE,p(s,"writeend",b),n(a)},b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(a){b["on"+a]=s["on"+a]}),b.write(d),s.abort=function(){b.abort(),s.readyState=s.DONE},s.readyState=s.WRITING}),w)}),w)};a.getFile(i,{create:!1},x(function(a){a.remove(),b()}),x(function(a){a.code===a.NOT_FOUND_ERR?b():w()}))}),w)}),w)):void w())},s=r.prototype,u=function(a,b,c){return new r(a,b,c)};return y(navigator)&&navigator.msSaveOrOpenBlob?function(a,b,c){return c||(a=q(a)),navigator.msSaveOrOpenBlob(a,b||J)}:(s.abort=function(){var a=this;a.readyState=a.DONE,p(a,"abort")},s.readyState=s.INIT=0,s.WRITING=1,s.DONE=2,s.error=s.onwritestart=s.onprogress=s.onwrite=s.onabort=s.onerror=s.onwriteend=null,u)}();k.saveAs=function(d){var f=d.content,g=d.contentType,h=d.name,i=d.noAutoBom,j=d.proxy,l="suidlifrm"+n();y(b)&&!d.forceProxy?b(new k.Blob([f],{type:g}),h,i):j?(a(e).remove(),e=a('<div style="display:none;"><iframe name="'+l+'"></iframe></div>').appendTo(o.body),a('<form action="'+j+'" target="'+l+'" method="POST"><input type="hidden" name="fileName" value="'+h+'"/><input type="hidden" name="contentType" value="'+g+'"/><input type="hidden" name="base64content" value="'+c.btoa(f)+'"/></form>').appendTo(e).submit()):E("shield.export.saveAs: No proxy url set for older browser support",d.dieOnError)},k.saveAsNative=y(b)}(),f=l.extend({init:function(a){this.options=p(!0,{},a)},getExt:null,getContentType:null,getContent:null,saveAs:function(a){var b=this,c=a.fileName,d=!y(a.forceExt)||!!a.forceExt,e=b.getExt(),f=!k.saveAsNative||a.forceProxy?{type:"string"}:{},g=b.getContent(f);return y(g)?(c||(c=J),c+="",!La(c,e)&&d&&(c+=e),void k.saveAs({content:g,contentType:b.getContentType(),name:c,proxy:a.proxy,forceProxy:a.forceProxy,noAutoBom:a.noAutoBom,dieOnError:a.dieOnError})):void E("shield.export.ExportBase.saveAs: Error generating content",b.options.dieOnError)},destroy:K}),j=f.extend({getExt:function(){return".xml"},getContentType:function(){return"text/xml;charset=utf-8"},getContent:function(a){var b,c,d=this,e=d.options,f=Aa(e.created||new Date),g=e.author,h=e.worksheets||[],i=20,j=[],k=[];for(g=xa("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),c=Ga()+'<?mso-application progid="Excel.Sheet"?><Workbook xmlns="urn:schemas-microsoft-com:office:spreadsheet" xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns:ss="urn:schemas-microsoft-com:office:spreadsheet" xmlns:html="http://www.w3.org/TR/REC-html40"><DocumentProperties xmlns="urn:schemas-microsoft-com:office:office"><Created>'+f+"</Created>"+(g?"<Author>"+g+"</Author>":"")+'</DocumentProperties><ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><ProtectStructure>False</ProtectStructure><ProtectWindows>False</ProtectWindows></ExcelWorkbook>',b=0;b<h.length;b++){var l,m,n,o,p,q,r,s,t,u,A,C,D=h[b],E=D.name,F=D.columns||[],G=[],H=D.rows||[],I=[];for(m=0;m<F.length;m++)o=F[m],G.push("<Column"+(y(o.autoWidth)?' ss:AutoFitWidth="'+Ca(o.autoWidth)+'"':"")+(y(o.width)?' ss:Width="'+o.width+'"':"")+(y(o.index)?' ss:Index="'+o.index+'"':"")+"/>");for(m=0;m<H.length;m++){for(p=H[m],l=p.cells||[],q="<Row"+(y(p.height)?' ss:Height="'+p.height+'"':"")+(y(p.index)?' ss:Index="'+p.index+'"':"")+">",n=0;n<l.length;n++)r=l[n],s=r.type,A=r.value,C=r.style,u=null,t=y(s)&&!z(s)?s===Date?"DateTime":s===Number?"Number":s===Boolean?"Boolean":"String":x(A)?"DateTime":v(A)?"Number":w(A)?"Boolean":"String","DateTime"==t&&(A=Aa(A)),B(C)&&(u="s"+i++,j.push('<Style ss:ID="'+u+'"><Alignment'+(C.textAlign?' ss:Horizontal="'+Ba(C.textAlign)+'"':"")+(C.verticalAlign?' ss:Vertical="'+Ba(C.verticalAlign)+'"':"")+(y(C.wrap)?' ss:WrapText="'+Ca(C.wrap)+'"':"")+"/>"+(y(C.format)?'<NumberFormat ss:Format="'+wa(C.format)+'"/>':"")+"<Font"+(y(C.bold)?' ss:Bold="'+Ca(C.bold)+'"':"")+(y(C.italic)?' ss:Italic="'+Ca(C.italic)+'"':"")+(y(C.color)?' ss:Color="'+C.color+'"':"")+(y(C.fontName)?' ss:FontName="'+C.fontName+'"':"")+(y(C.fontSize)?' ss:Size="'+C.fontSize+'"':"")+"/><Interior"+(y(C.background)?' ss:Color="'+C.background+'" ss:Pattern="Solid"':"")+"/></Style>")),q+="<Cell"+(u?' ss:StyleID="'+u+'"':"")+(y(r.index)?' ss:Index="'+r.index+'"':"")+(y(r.colSpan)?' ss:MergeAcross="'+r.colSpan+'"':"")+(y(r.rowSpan)?' ss:MergeDown="'+r.rowSpan+'"':"")+'><Data ss:Type="'+t+'">'+(y(A)?wa(A):"")+"</Data></Cell>";q+="</Row>",I.push(q)}k.push('<Worksheet ss:Name="'+(E?wa(E):"Sheet1")+'"><Table>'+G.join("")+I.join("")+"</Table></Worksheet>")}return c+='<Styles><Style ss:ID="Default" ss:Name="Normal"><Alignment ss:Vertical="Bottom"/><Borders/><Font/><Interior/><NumberFormat/><Protection/></Style>'+j.join("")+"</Styles>",c+=k.join(""),c+="</Workbook>"}}),i=f.extend({getExt:function(){return".xlsx"},getContentType:function(){return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"},getContent:function(a){var b=this,e=b.options,f=e.dieOnError;if(!y(c.JSZip))return e.noLegacyFallback?void E("shield.export.OOXMLWorkbook.getContent: No ZIP library found",f):new j(e).getContent();var g,h,i,k,l,m,n,o,r,s,t,u,A,B=Aa(e.created||new Date),C=e.author,G=e.worksheets||[],H=G.length,I=new c.JSZip,J=[],K={},L=[],M=100,N=['<font><sz val="11"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font>'],O=['<fill><patternFill patternType="none"/></fill>','<fill><patternFill patternType="gray125"/></fill>'],P=['<xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0"/>'],Q=function(a){var b,c,e,f="";return!a||F(a).length<=0?d:(b=D(a),K[b]?K[b].cellXfsIndex:(y(a.format)&&(M++,L.push('<numFmt numFmtId="'+M+'" formatCode="'+wa(a.format).replace(" ","\\ ")+'"/>'),f+=' numFmtId="'+M+'" applyNumberFormat="1"'),a.background&&(O.push('<fill><patternFill patternType="solid"><fgColor rgb="'+Da(a.background)+'"/></patternFill></fill>'),f+=' fillId="'+(O.length-1)+'" applyFill="1"'),(y(a.bold)||y(a.color)||y(a.fontName)||y(a.fontSize)||y(a.italic))&&(N.push("<font>"+(y(a.bold)?'<b val="'+!!a.bold+'"/>':"")+(y(a.color)?'<color rgb="'+Da(a.color)+'"/>':"")+(y(a.fontName)?'<name val="'+a.fontName+'"/>':"")+(y(a.fontSize)?'<sz val="'+a.fontSize+'"/>':"")+(y(a.italic)?'<i val="'+!!a.italic+'"/>':"")+"</font>"),f+=' fontId="'+(N.length-1)+'" applyFont="1"'),(y(a.textAlign)||y(a.verticalAlign)||y(a.wrap))&&(c="<alignment"+(y(a.textAlign)?' horizontal="'+a.textAlign+'"':"")+(y(a.verticalAlign)?' vertical="'+a.verticalAlign+'"':"")+(y(a.wrap)?' wrapText="'+!!a.wrap+'"':"")+"/>"),f||c?(e="<xf"+(f?f:"")+(c?">"+c+"</xf>":"/>"),P.push(e),K[b]={cellXfsIndex:P.length-1},P.length-1):d))};for(g=Ha()+'<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types"><Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml"/><Default Extension="xml" ContentType="application/xml"/><Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"/>'+q(G,function(a,b){return'<Override PartName="/xl/worksheets/sheet'+(b+1)+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"/>'}).join("")+'<Override PartName="/xl/theme/theme1.xml" ContentType="application/vnd.openxmlformats-officedocument.theme+xml"/><Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/><Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/><Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml"/><Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml"/></Types>',h=Ha()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/></Relationships>',i=Ha()+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes"><Application>Microsoft Excel</Application><DocSecurity>0</DocSecurity><ScaleCrop>false</ScaleCrop><HeadingPairs><vt:vector size="2" baseType="variant"><vt:variant><vt:lpstr>Worksheets</vt:lpstr></vt:variant><vt:variant><vt:i4>'+H+'</vt:i4></vt:variant></vt:vector></HeadingPairs><TitlesOfParts><vt:vector size="'+H+'" baseType="lpstr">'+q(G,function(a,b){return"<vt:lpstr>"+(a.name?wa(a.name):"Sheet"+(b+1))+"</vt:lpstr>"}).join("")+"</vt:vector></TitlesOfParts><LinksUpToDate>false</LinksUpToDate><SharedDoc>false</SharedDoc><HyperlinksChanged>false</HyperlinksChanged><AppVersion>15.0300</AppVersion></Properties>",C=xa("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;"),k=Ha()+'<cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dc:creator>'+(C?C:"")+'</dc:creator><dcterms:created xsi:type="dcterms:W3CDTF">'+B+"</dcterms:created></cp:coreProperties>",l=Ha()+'<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x15" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><fileVersion appName="xl" lastEdited="6" lowestEdited="4" rupBuild="14420"/><workbookPr filterPrivacy="1" defaultThemeVersion="124226"/><sheets>'+q(G,function(a,b){return'<sheet name="'+(a.name?wa(a.name):"Sheet"+(b+1))+'" sheetId="'+(b+1)+'" r:id="rId'+(b+1)+'"/>'}).join("")+"</sheets></workbook>",n=Ha()+'<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"/>',s=1,o=Ha()+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">'+q(G,function(a,b){var c=s++;return'<Relationship Id="rId'+c+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+c+'.xml"/>'}).join("")+'<Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme1.xml"/><Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml"/><Relationship Id="rId'+s++ +'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml"/></Relationships>',r=Ha()+'<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme"><a:themeElements><a:clrScheme name="Office"><a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1><a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1><a:dk2><a:srgbClr val="1F497D"/></a:dk2><a:lt2><a:srgbClr val="EEECE1"/></a:lt2><a:accent1><a:srgbClr val="4F81BD"/></a:accent1><a:accent2><a:srgbClr val="C0504D"/></a:accent2><a:accent3><a:srgbClr val="9BBB59"/></a:accent3><a:accent4><a:srgbClr val="8064A2"/></a:accent4><a:accent5><a:srgbClr val="4BACC6"/></a:accent5><a:accent6><a:srgbClr val="F79646"/></a:accent6><a:hlink><a:srgbClr val="0000FF"/></a:hlink><a:folHlink><a:srgbClr val="800080"/></a:folHlink></a:clrScheme><a:fontScheme name="Office"><a:majorFont><a:latin typeface="Cambria" panose="020F0302020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="宋体"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Times New Roman"/><a:font script="Hebr" typeface="Times New Roman"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="MoolBoran"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Times New Roman"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/></a:majorFont><a:minorFont><a:latin typeface="Calibri" panose="020F0502020204030204"/><a:ea typeface=""/><a:cs typeface=""/><a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/><a:font script="Hang" typeface="맑은 고딕"/><a:font script="Hans" typeface="宋体"/><a:font script="Hant" typeface="新細明體"/><a:font script="Arab" typeface="Arial"/><a:font script="Hebr" typeface="Arial"/><a:font script="Thai" typeface="Tahoma"/><a:font script="Ethi" typeface="Nyala"/><a:font script="Beng" typeface="Vrinda"/><a:font script="Gujr" typeface="Shruti"/><a:font script="Khmr" typeface="DaunPenh"/><a:font script="Knda" typeface="Tunga"/><a:font script="Guru" typeface="Raavi"/><a:font script="Cans" typeface="Euphemia"/><a:font script="Cher" typeface="Plantagenet Cherokee"/><a:font script="Yiii" typeface="Microsoft Yi Baiti"/><a:font script="Tibt" typeface="Microsoft Himalaya"/><a:font script="Thaa" typeface="MV Boli"/><a:font script="Deva" typeface="Mangal"/><a:font script="Telu" typeface="Gautami"/><a:font script="Taml" typeface="Latha"/><a:font script="Syrc" typeface="Estrangelo Edessa"/><a:font script="Orya" typeface="Kalinga"/><a:font script="Mlym" typeface="Kartika"/><a:font script="Laoo" typeface="DokChampa"/><a:font script="Sinh" typeface="Iskoola Pota"/><a:font script="Mong" typeface="Mongolian Baiti"/><a:font script="Viet" typeface="Arial"/><a:font script="Uigh" typeface="Microsoft Uighur"/><a:font script="Geor" typeface="Sylfaen"/></a:minorFont></a:fontScheme><a:fmtScheme name="Office"><a:fillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="1"/></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:shade val="51000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="80000"><a:schemeClr val="phClr"><a:shade val="93000"/><a:satMod val="130000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="94000"/><a:satMod val="135000"/></a:schemeClr></a:gs></a:gsLst><a:lin ang="16200000" scaled="0"/></a:gradFill></a:fillStyleLst><a:lnStyleLst><a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln><a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln></a:lnStyleLst><a:effectStyleLst><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst></a:effectStyle><a:effectStyle><a:effectLst><a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw></a:effectLst><a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d><a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d></a:effectStyle></a:effectStyleLst><a:bgFillStyleLst><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path></a:gradFill><a:gradFill rotWithShape="1"><a:gsLst><a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs><a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs></a:gsLst><a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path></a:gradFill></a:bgFillStyleLst></a:fmtScheme></a:themeElements><a:objectDefaults/><a:extraClrSchemeLst/></a:theme>',t=0;t<G.length;t++){var R,S=G[t],T=S.columns||[],U=T.length,V=S.rows||[],W=V.length,X="",Y=[],Z=[];for(u=0;u<W;u++){var $=V[u],_=[],aa=$.cells||[],ba=aa.length;for(A=0;A<ba;A++){var ca,da,ea,fa=aa[A],ga=fa.type,ha=fa.value,ia=p({},fa.style||{});y(ga)&&!z(ga)?ga===Date?(ca=d,ha=ya(ha),ia.format||(ia.format="m/d/yyyy hh:mm")):ca=ga===Number?d:ga===Boolean?"b":"inlineStr":x(ha)?(ca=d,ha=ya(ha),ia.format||(ia.format="m/d/yyyy hh:mm")):ca=v(ha)?d:w(ha)?"b":"inlineStr",da=Q(ia),ea=(ha+"").length,(!y(Y[A])||Y[A]<ea)&&(Y[A]=ea),_.push("<c"+(y(fa.index)?' r="'+Fa(y($.index)?$.index:u+1,fa.index)+'"':"")+(y(ca)?' t="'+ca+'"':"")+(y(da)?' s="'+da+'"':"")+">"+("inlineStr"==ca?"<is><t>"+wa(ha)+"</t></is>":"<v>"+ha+"</v>")+"</c>")}Z.push("<row"+(y($.index)?' r="'+$.index+'"':"")+(y($.height)?' ht="'+$.height+'" customHeight="1"':"")+">"+_.join("")+"</row>")}if(U>0){for(X="<cols>",A=0;A<U;A++){var ja=T[A];X+="<col"+(y(ja.index)?' min="'+ja.index+'" max="'+ja.index+'"':' min="'+(A+1)+'" max="'+(A+1)+'"')+(y(ja.width)?' width="'+Ja(ja.width)+'"':"")+(ja.autoWidth!==!0&&y(ja.width)?"":' width="'+Ka(Y[A])+'"')+(ja.autoWidth===!0?' bestFit="1"':"")+(y(ja.autoWidth)||y(ja.width)?' customWidth="1"':"")+"/>"}X+="</cols>"}R=Ha()+'<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><dimension ref="A1"/><sheetViews><sheetView tabSelected="1" workbookViewId="0"/></sheetViews><sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>'+X+"<sheetData>"+Z.join("")+'</sheetData><pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/></worksheet>',J.push(R)}for(m=Ha()+'<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac"><numFmts count="'+L.length+'">'+L.join("")+'</numFmts><fonts count="'+N.length+'" x14ac:knownFonts="1">'+N.join("")+'</fonts><fills count="'+O.length+'">'+O.join("")+'</fills><borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders><cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs><cellXfs count="'+P.length+'">'+P.join("")+'</cellXfs><cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles><dxfs count="0"/><tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9"/><extLst><ext uri="{EB79DEF2-80B8-43e5-95BD-54CBDDF9020C}" xmlns:x14="http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"><x14:slicerStyles defaultSlicerStyle="SlicerStyleLight1"/></ext><ext uri="{9260A510-F301-46a8-8635-F512D64BE5F5}" xmlns:x15="http://schemas.microsoft.com/office/spreadsheetml/2010/11/main"><x15:timelineStyles defaultTimelineStyle="TimeSlicerStyleLight1"/></ext></extLst></styleSheet>',
I.file("[Content_Types].xml",g),I.file("_rels/.rels",h),I.file("docProps/app.xml",i),I.file("docProps/core.xml",k),I.file("xl/workbook.xml",l),I.file("xl/styles.xml",m),I.file("xl/sharedStrings.xml",n),I.file("xl/_rels/workbook.xml.rels",o),I.file("xl/theme/theme1.xml",r),t=0;t<J.length;t++)I.file("xl/worksheets/sheet"+(t+1)+".xml",J[t]);return a&&"string"!=a.type&&c.JSZip.support.uint8array?I.generate({type:"uint8array"}):I.generate({type:"string"})},saveAs:function(a){var b=this,d=b.options;return y(c.JSZip)?f.fn.saveAs.call(this,a):d.noLegacyFallback?void E("shield.export.OOXMLWorkbook.saveAs: No ZIP library found",d.dieOnError):new j(d).saveAs(a)}}),h={unit:R,textColor:"0 g",drawColor:"0 G",fontSize:12,lineHeight:1.15,lineWidth:.200025,producer:"ShieldUI PDF Builder",created:new Date},g=f.extend({_version:"1.3",_formats:{a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"credit-card":[153,243]},_documentProps:["title","subject",L,"keywords",M],_capJoinStyles:{0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},_noMargins:{left:0,top:0,bottom:0},init:function(a){this.options=p(!0,h,a,{});var b=this,c=b.options;c.dieOnError;b._scaleFactor=b._getScaleFactor(),b._fontSize=c.fontSize,b._textColor=c.textColor,b._objectNumber=2,b._printToDoc=!0,b._offsets=[],b._fonts={},b._fontmap={},b._pages=[],b._pagesContext=[],b._pageDim=[],b._content=[],b._additionalObjects=[],b._page=b._lineCapID=b._lineJoinID=b._contentLength=0,b._fontKey=b._tmp=b._currentPage=b._pageWidth=b._pageHeight=b._pageMode=b._zoomMode=b._layoutMode=d,b._cellPadding=3,b._cellMargin=13,b._lastCellPos={x:d,y:d,w:d,h:d,ln:d},b._cellHeaderFunction=b._tablePrintHeader=b._cellMargins=b._cellTableHeaderRow=b._cellPrintingHeaderRow=b._tableFontSize=d,b._cellPages=1,b.addFonts(),b._fontKey="F1"},getExt:function(){return".pdf"},getContentType:function(){return"application/pdf"},getContent:function(a){var b=this;return a&&"string"!=a.type?b._getArrayBuffer():b._build()},_toString:function(a){return(""+a).toLowerCase()},_getScaleFactor:function(){var a=this,b=a.options.unit;switch(b){case R:return 1;case P:return 72/25.4000508;case S:return 72/2.54000508;case Q:return 72;case T:return 96/72;case U:return 12;case V:return 12;case W:return 6;default:return void E("shieldExport: Invalid measurement unit: "+b,a.options.dieOnError)}},_setNumberPrecision:function(a,b){return a.toFixed(b)},_setPadding:function(a,b,c){return("0"+parseInt(a,b)).slice(-c)},_write:function(a){var b=this;b._printToDoc?(b._contentLength+=a.length+1,b._content.push(a)):b._pages[b._currentPage].push(a)},_createObject:function(){var a=this;return a._objectNumber++,a._offsets[a._objectNumber]=a._contentLength,a._write(a._objectNumber+" 0 obj"),a._objectNumber},_createAdditionalObject:function(){var a=this,b=2*a._pages.length+1+a._additionalObjects.length,c={objId:b,content:""};return a._additionalObjects.push(c),c},_createObjectDeferred:function(){var a=this;return a._objectNumber++,a._offsets[a._objectNumber]=function(){return a._contentLength},a._objectNumber},_createObjectDeferredBegin:function(a){var b=this;b._offsets[a]=b._contentLength},_writeStream:function(a){var b=this;b._write("stream"),b._write(a),b._write("endstream")},_writePages:function(){var a,b,c,d,e,f,g,h=this,i=(h.options,!1),j=(h._pages,h._pageDim);for(a=1;a<=h._page;a++)h._createObject(),e=(h._pageWidth=j[a].width)*h._scaleFactor,f=(h._pageHeight=j[a].height)*h._scaleFactor,h._write("<</Type /Page"),h._write("/Parent 1 0 R"),h._write("/Resources 2 0 R"),h._write("/MediaBox [0 0 "+h._setNumberPrecision(e,2)+" "+h._setNumberPrecision(f,2)+"]"),h._write("/Contents "+(h._objectNumber+1)+" 0 R"),h._write(">>"),h._write("endobj"),b=h._pages[a].join("\n"),h._createObject(),i?(c=[],d=b.length):h._write("<</Length "+b.length+">>"),h._writeStream(b),h._write("endobj");for(h._offsets[1]=h._contentLength,h._write("1 0 obj"),h._write("<</Type /Pages"),g="/Kids [",d=0;d<h._page;d++)g+=3+2*d+" 0 R ";h._write(g+"]"),h._write("/Count "+h._page),h._write(">>"),h._write("endobj")},_writeFont:function(a){var b=this;a.objectNumber=b._createObject(),b._write("<</BaseFont/"+a.PostScriptName+"/Type/Font"),"string"==typeof a.encoding&&b._write("/Encoding/"+a.encoding),b._write("/Subtype/Type1>>"),b._write("endobj")},_writeFonts:function(){var a=this,b=a._fonts;for(var c in b)b.hasOwnProperty(c)&&a._writeFont(b[c])},_writeXObjectDictionary:function(){},_writeResourceDictionary:function(){var a,b=this,c=b._fonts;b._write("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),b._write("/Font <<");for(a in c)c.hasOwnProperty(a)&&b._write("/"+a+" "+c[a].objectNumber+" 0 R");b._write(">>"),b._write("/XObject <<"),b._writeXObjectDictionary(),b._write(">>")},_writeResources:function(){var a=this,b=a._offsets;a._writeFonts(),b[2]=a._contentLength,a._write("2 0 obj"),a._write("<<"),a._writeResourceDictionary(),a._write(">>"),a._write("endobj")},_writeAdditionalObjects:function(){var a,b,c=this,d=c._offsets,e=c._additionalObjects;for(b=0;b<e.length;b++)a=e[b],d[a.objId]=c._contentLength,c._write(a.objId+" 0 obj"),c._write(a.content),c._write("endobj");c._objectNumber+=e.length},_writeToFontDictionary:function(a,b,c){var d=this;d._fontmap.hasOwnProperty(b)||(d._fontmap[b]={}),d._fontmap[b][c]=a},_to8bitStream:function(a,b){var c,e,f,g,h,i,j,k,l,m=this,n=m._fonts,o=m._fontKey;if(b=b||{},c=b.sourceEncoding||"Unicode",e=b.outputEncoding,(b.autoencode||e)&&n[o].metadata&&n[o].metadata[c]&&n[o].metadata[c].encoding&&(f=n[o].metadata[c].encoding,!e&&n[o].encoding&&(e=n[o].encoding),!e&&f.codePages&&(e=f.codePages[0]),t(e)&&(e=f[e]),e)){for(h=!1,g=[],l=0,k=a.length;l<k;l++)j=e[a.charCodeAt(l)],j?g.push(String.fromCharCode(j)):g.push(a[l]),g[l].charCodeAt(0)>>8&&(h=!0);a=g.join("")}for(l=a.length;void 0===h&&0!==l;)a.charCodeAt(l-1)>>8&&(h=!0),l--;if(!h)return a;for(g=b.noBOM?[]:[254,255],l=0,k=a.length;l<k;l++){if(j=a.charCodeAt(l),i=j>>8,i>>8)return void E("shieldExport: Character at position "+l+" of string '"+a+"' exceeds 16bits. Cannot be encoded into UCS-2 BE",m.options.dieOnError);g.push(i),g.push(j-(i<<8))}return String.fromCharCode.apply(d,g)},_escape:function(a,b){return this._to8bitStream(a,b).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_writeInfo:function(){var a,b,c,d,e,f,g,h,i,j=this,k=j.options,l=k.producer,m=k.created,n=j._documentProps;for(y(l)&&j._write("/Producer ("+l+")"),i=0;i<n.length;i++)g=n[i],h=k[g],g!==L&&g!==M||(h=xa("&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x20;&#x46;&#x72;&#x61;&#x6D;&#x65;&#x77;&#x6F;&#x72;&#x6B;")),h&&j._write("/"+Ba(g)+" ("+j._escape(h)+")");a=za(m),b=a.getTimezoneOffset(),c=b<0?"+":"-",d=Math.floor(Math.abs(b/60)),e=Math.abs(b%60),f=[c,j._setPadding(d,10,2),"'",j._setPadding(e,10,2),"'"].join(""),j._write(["/CreationDate (D:",a.getFullYear(),j._setPadding(a.getMonth()+1,10,2),j._setPadding(a.getDate(),10,2),j._setPadding(a.getHours(),10,2),j._setPadding(a.getMinutes(),10,2),j._setPadding(a.getSeconds(),10,2),f,")"].join(""))},_writeCatalog:function(){var a,b=this;switch(b._write("/Type /Catalog"),b._write("/Pages 1 0 R"),b._zoomMode||(b._zoomMode="fullwidth"),b._zoomMode){case"fullwidth":b._write("/OpenAction [3 0 R /FitH null]");break;case"fullheight":b._write("/OpenAction [3 0 R /FitV null]");break;case"fullpage":b._write("/OpenAction [3 0 R /Fit]");break;case"original":b._write("/OpenAction [3 0 R /XYZ null null 1]");break;default:a=""+b._zoomMode,"%"===a.substr(a.length-1)&&(b._zoomMode=parseInt(b._zoomMode,10)/100),v(b._zoomMode)&&b._write("/OpenAction [3 0 R /XYZ null null "+b._setNumberPrecision(b._zoomMode,2)+"]")}switch(b._layoutMode||(b._layoutMode="continuous"),b._layoutMode){case"continuous":b._write("/PageLayout /OneColumn");break;case"single":b._write("/PageLayout /SinglePage");break;case"two":case"twoleft":b._write("/PageLayout /TwoColumnLeft");break;case"tworight":b._write("/PageLayout /TwoColumnRight")}b._pageMode&&b._write("/PageMode /"+b._pageMode)},_writeTrailer:function(){var a=this,b=a._objectNumber;a._write("/Size "+(b+1)),a._write("/Root "+b+" 0 R"),a._write("/Info "+(b-1)+" 0 R")},addFont:function(a,b,c,d){var e,f=this,g="F"+(F(f._fonts).length+1).toString(10);return e=f._fonts[g]={id:g,PostScriptName:a,fontName:b,fontStyle:c,encoding:d,metadata:{}},f._writeToFontDictionary(g,b,c),g},addFonts:function(){var a,b,c,d,e=this,f="StandardEncoding",g=[["Helvetica",Y,ia],["Helvetica-Bold",Y,ja],["Helvetica-Oblique",Y,ka],["Helvetica-BoldOblique",Y,la],["Courier",ha,ia],["Courier-Bold",ha,ja],["Courier-Oblique",ha,ka],["Courier-BoldOblique",ha,la],["Times-Roman",Z,ia],["Times-Bold",Z,ja],["Times-Italic",Z,ka],["Times-BoldItalic",Z,la]];for(c=0,d=g.length;c<d;c++)a=e.addFont(g[c][0],g[c][1],g[c][2],f),b=g[c][0].split("-"),e._writeToFontDictionary(a,b[0],b[1]||"")},getActiveFontObj:function(){var a=this,b=a._fonts,c=a._fontKey;return b&&c&&b[c]?b[c]:d},getFontObj:function(a,b){var c=this,e=c._fonts,f=c.getFont(a,b);return e&&f&&e[f]?e[f]:d},getFont:function(a,b){var c,e=this,f=e._fonts,g=e._fontmap;switch(a=y(a)?a:f[e._fontKey].fontName,b=y(b)?b:e._fontKey?f[e._fontKey].fontStyle:d,y(a)&&(a=a.toLowerCase()),b){case $:case aa:case _:a=Y;break;case ba:case ca:case ea:a=ha;break;case da:case fa:case ga:a=Z;break;default:a=Z}try{c=g[a][b]}catch(h){}return c||(c=g[Z][b],null==c&&(c=g[Z][ia])),c},_setPage:function(a){var b=this,c=b._pageDim;a>0&&a<=b._page&&(b._currentPage=a,b._pageWidth=c[a].width,b._pageHeight=c[a].height)},_beginPage:function(a,b){var c,d=this,e=d._formats,f=d._pages,g=d._pageDim,h=d._pagesContext,i=t(b)&&b.toLowerCase();if(t(a)&&(c=a.toLowerCase(),e.hasOwnProperty(c)&&(a=e[c][0]/d._scaleFactor,b=e[c][1]/d._scaleFactor)),u(a)&&(b=a[1],a=a[0]),i){switch(i.substr(0,1)){case N:b>a&&(i="s");break;case O:a>b&&(i="s")}"s"===i&&(d._tmp=a,a=b,b=d._tmp)}d._printToDoc=!1,d._page++,f[d._page]=[],g[d._page]={width:Number(a)||d._pageWidth,height:Number(b)||d._pageHeight},h[d._page]={},d._setPage(d._page)},addPage:function(){var a=this,b=a.options,c=b.drawColor,d=b.lineWidth;a._beginPage.apply(a,arguments),a._write(a._setNumberPrecision(d*a._scaleFactor,2)+" w"),a._write(c),0!==a._lineCapID&&a._write(a._lineCapID+" J"),0!==a._lineJoinID&&a._write(a._lineJoinID+" j")},deletePage:function(a){var b=this,c=b._pages,d=b._pageDim;a>0&&a<=b._page&&(c.splice(a,1),d.splice(a,1),b._page--,b._currentPage>b._page&&(b._currentPage=b._page),b._setPage(b._currentPage))},getFontSize:function(){var a=this;return a._fontSize},getLineHeight:function(){var a=this;return a.getFontSize()*a.options.lineHeight},getCoordinateString:function(a){var b=this;return b._setNumberPrecision(a*b._scaleFactor,2)},getVerticalCoordinateString:function(a){var b=this;return b._setNumberPrecision((b._pageHeight-a)*b._scaleFactor,2)},getPageSize:function(){var a=this;return{width:a._pageWidth,height:a._pageHeight}},getNumberOfPages:function(){var a=this;return a._pages.length-1},getPages:function(){var a=this;return a._pages},getPageInfo:function(a){var b=this,c=2*(a-1)+3;return{objId:c,pageNumber:a,pageContext:b._pagesContext[a]}},getCurrentPageInfo:function(){return this.getPageInfo(this._currentPage)},movePage:function(a,b){var c,d,e,f,g=this,h=g._pages,i=g._pageDim,j=g._pagesContext;if(a>b){for(c=h[a],d=i[a],e=j[a],f=a;f>b;f--)h[f]=h[f-1],i[f]=i[f-1],j[f]=j[f-1];h[b]=c,i[b]=d,j[b]=e,g._setPage(b)}else if(a<b){for(c=h[a],d=i[a],e=j[a],f=a;f<b;f++)h[f]=h[f+1],i[f]=i[f+1],j[f]=j[f+1];h[b]=c,i[b]=d,j[b]=e,g._setPage(b)}return g},insertPage:function(){var a=this,b=[].slice.call(arguments),c=b.shift();return a.addPage.apply(a,b),a.movePage(a._currentPage,c),a},setDisplayMode:function(a,b,c){var d=this;return d._zoomMode=a,d._layoutMode=b,d._pageMode=c,d},_ESC:function(a,b){var c=this,d=c.options;return a=a.split("\t").join(new Array(d.TabLen||9).join(" ")),c._escape(a,b)},text:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,r,s,u,w,x=this,z="",A="Td",B="",C=x.getCurrentPageInfo().pageContext,D=x.getLineHeight();if(t(a)&&(a=a.match(/[\n\r]/)?a.split(/\r\n|\r|\n/g):[a]),t(e)&&(f=e,e=null),t(d)&&(f=d,d=null),v(d)&&(e=d,d=null),e&&(e*=Math.PI/180,h=Math.cos(e),i=Math.sin(e),z=[x._setNumberPrecision(h,2),x._setNumberPrecision(i,2),x._setNumberPrecision(i*-1,2),x._setNumberPrecision(h,2),""].join(" "),A="Tm"),d=d||{},"noBOM"in d||(d.noBOM=!0),"autoencode"in d||(d.autoencode=!0),d.stroke===!0?C.lastTextWasStroke!==!0&&(B="1 Tr\n",C.lastTextWasStroke=!0):(C.lastTextWasStroke&&(B="0 Tr\n"),C.lastTextWasStroke=!1),y(x._runningPageHeight)||(x._runningPageHeight=0),t(a))a=x._ESC(a,d);else{if(!(a instanceof Array))return void E('Type of text must be string or Array. "'+a+'" is not recognized.',x.options.dieOnError);for(j=a.concat(),k=[],m=j.length;m--;)k.push(x._ESC(j.shift(),d));if(n=Math.ceil((x._pageHeight-c-x._runningPageHeight)*x._scaleFactor/x.getLineHeight()),f){if(w=q(a,function(a){return x._getStringWidth(a)*x.getFontSize()/x._scaleFactor}),u=Math.max.apply(Math,w),f===ma)o=b-u/2,b-=w[0]/2;else{if("right"!==f)return void E('Unrecognized alignment option, use "center" or "right".',x.options.dieOnError);o=b-u,b-=w[0]}for(p=b,a=k[0]+") Tj\n",l=1,m=k.length;l<m;l++)r=u-w[l],"center"===f&&(r/=2),a+=o-p+r+" -"+D+" Td ("+k[l],p=o+r,l<m-1&&(a+=") Tj\n")}else a=k.join(") Tj\nT* (")}return g||(s=x._setNumberPrecision((x._pageHeight-c)*x._scaleFactor,2)),x._write("BT\n/"+x._fontKey+" "+x.getFontSize()+" Tf\n"+x.getLineHeight()+" TL\n"+B+x._textColor+"\n"+z+x._setNumberPrecision(b*x._scaleFactor,2)+" "+s+" "+A+"\n("+a+") Tj\nET"),g&&x.text(g,b,c),x},lstext:function(a,b,c,d){var e,f,g=this;for(e=0,f=a.length;e<f;e++,b+=d)g.text(a[e],b,c)},line:function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)},clip:function(){var a=this;a._write("W"),a._write("S")},lines:function(a,b,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=this;for(v(a)&&(r._tmp=c,c=b,b=a,a=r._tmp),d=d||[1,1],r._write(r._setNumberPrecision(b*r._scaleFactor,3)+" "+r._setNumberPrecision((r._pageHeight-c)*r._scaleFactor,3)+" m "),g=d[0],h=d[1],j=a.length,p=b,q=c,i=0;i<j;i++)k=a[i],2===k.length?(p=k[0]*g+p,q=k[1]*h+q,r._write(r._setNumberPrecision(p*r._scaleFactor,3)+" "+r._setNumberPrecision((r._pageHeight-q)*r._scaleFactor,3)+" l")):(l=k[0]*g+p,m=k[1]*h+q,n=k[2]*g+p,o=k[3]*h+q,p=k[4]*g+p,q=k[5]*h+q,r._write(r._setNumberPrecision(l*r._scaleFactor,3)+" "+r._setNumberPrecision((r._pageHeight-m)*r._scaleFactor,3)+" "+r._setNumberPrecision(n*r._scaleFactor,3)+" "+r._setNumberPrecision((r._pageHeight-o)*r._scaleFactor)+" "+r._setNumberPrecision(p*r._scaleFactor)+" "+r._setNumberPrecision((r._pageHeight-q)*r._scaleFactor)+" c"));return f&&r._write(" h"),null!==e&&r._write(r.getStyle(e)),r},rect:function(a,b,c,d,e){var f=this;f.getStyle(e);return f._write([f._setNumberPrecision(a*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-b)*f._scaleFactor,2),f._setNumberPrecision(c*f._scaleFactor,2),f._setNumberPrecision(-d*f._scaleFactor,2),"re"].join(" ")),null!==e&&f._write(f.getStyle(e)),f},triangle:function(a,b,c,d,e,f,g){var h=this;return h.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g,!0),h},roundedRect:function(a,b,c,d,e,f,g){var h=this,i=4/3*(Math.SQRT2-1);return h.lines([[c-2*e,0],[e*i,0,e,f-f*i,e,f],[0,d-2*f],[0,f*i,-(e*i),f,-e,f],[-c+2*e,0],[-(e*i),0,-e,-(f*i),-e,-f],[0,-d+2*f],[0,-(f*i),e*i,-f,e,-f]],a+e,b,[1,1],g),h},ellipse:function(a,b,c,d,e){var f=this,g=4/3*(Math.SQRT2-1)*c,h=4/3*(Math.SQRT2-1)*d;return f._write([f._setNumberPrecision((a+c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-b)*f._scaleFactor,2),"m",f._setNumberPrecision((a+c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b-h))*f._scaleFactor,2),f._setNumberPrecision((a+g)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b-d))*f._scaleFactor,2),f._setNumberPrecision(a*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b-d))*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((a-g)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b-d))*f._scaleFactor,2),f._setNumberPrecision((a-c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b-h))*f._scaleFactor,2),f._setNumberPrecision((a-c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-b)*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((a-c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b+h))*f._scaleFactor,2),f._setNumberPrecision((a-g)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b+d))*f._scaleFactor,2),f._setNumberPrecision(a*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b+d))*f._scaleFactor,2),"c"].join(" ")),f._write([f._setNumberPrecision((a+g)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b+d))*f._scaleFactor,2),f._setNumberPrecision((a+c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-(b+h))*f._scaleFactor,2),f._setNumberPrecision((a+c)*f._scaleFactor,2),f._setNumberPrecision((f._pageHeight-b)*f._scaleFactor,2),"c"].join(" ")),null!==e&&f._write(f.getStyle(e)),f},circle:function(a,b,c,d){var e=this;return e.ellipse(a,b,c,c,d)},setFontSize:function(a){var b=this;return b._fontSize=a,b},setFont:function(a,b){var c=this;return c._fontKey=c.getFont(a,b),c},setFontStyle:function(a){var b=this;return b._fontKey=b.getFont(d,a),b},getFontList:function(){var a,b,c,d=this,e={},f=d._fontmap;for(a in f)if(f.hasOwnProperty(a)){e[a]=c=[];for(b in f[a])f[a].hasOwnProperty(b)&&c.push(b)}return e},addFontScriptName:function(a,b,c){var d=this;d.addFont(a,b,c,"StandardEncoding")},setLineWidth:function(a){var b=this;return b._write((a*b._scaleFactor).toFixed(2)+" w"),b},setDrawColor:function(a,b,c,d){var e,f=this;return e=!y(b)||!y(d)&&a===b===c?t(a)?a+" G":f._setNumberPrecision(a/255,2)+" G":y(d)?t(a)?[a,b,c,d,"K"].join(" "):[f._setNumberPrecision(a,2),f._setNumberPrecision(b,2),f._setNumberPrecision(c,2),f._setNumberPrecision(d,2),"K"].join(" "):t(a)?[a,b,c,X].join(" "):[f._setNumberPrecision(a/255,2),f._setNumberPrecision(b/255,2),f._setNumberPrecision(c/255,2),X].join(" "),f._write(e),f},setFillColor:function(a,b,c,d){var e,f=this;return!y(b)||!y(d)&&a===b===c?e=t(a)?a+" g":f._setNumberPrecision(a/255,2)+" g":!y(d)||B(d)?(e=t(a)?[a,b,c,"rg"].join(" "):[f._setNumberPrecision(a/255,2),f._setNumberPrecision(b/255,2),f._setNumberPrecision(c/255,2),"rg"].join(" "),d&&0===d.a&&(e=["255","255","255","rg"].join(" "))):e=t(a)?[a,b,c,d,"k"].join(" "):[f._setNumberPrecision(a,2),f._setNumberPrecision(b,2),f._setNumberPrecision(c,2),f._setNumberPrecision(d,2),"k"].join(" "),f._write(e),f},setTextColor:function(a,b,c){var d,e=this;return t(a)&&/^#[0-9A-Fa-f]{6}$/.test(a)&&(d=parseInt(a.substr(1),16),a=d>>16&255,b=d>>8&255,c=255&d),0===a&&0===b&&0===c||!y(b)?e._textColor=e._setNumberPrecision(a/255,3)+" g":e._textColor=[e._setNumberPrecision(a/255,3),e._setNumberPrecision(b/255,3),e._setNumberPrecision(c/255,3),"rg"].join(" "),e},_build:function(){var a,b,c,d,e=this;for(e._printToDoc=!0,e._objectNumber=2,e._write("%PDF-"+e._version),e._writePages(),e._writeAdditionalObjects(),e._writeResources(),e._createObject(),e._write("<<"),e._writeInfo(),e._write(">>"),e._write("endobj"),e._createObject(),e._write("<<"),e._writeCatalog(),e._write(">>"),e._write("endobj"),a=e._contentLength,b="0000000000",e._write("xref"),e._write("0 "+(e._objectNumber+1)),e._write(b+" 65535 f "),d=1;d<=e._objectNumber;d++)c=e._offsets[d],A(c)?e._write((b+e._offsets[d]()).slice(-10)+" 00000 n "):e._write((b+e._offsets[d]).slice(-10)+" 00000 n ");return e._write("trailer"),e._write("<<"),e._writeTrailer(),e._write(">>"),e._write("startxref"),e._write(a),e._write("%%EOF"),e._printToDoc=!1,e._content.join("\n")},getStyle:function(a){var b=oa;return a===pa?b=pa.toLowerCase():a===qa||a===ra?b=sa:a!==pa.toLowerCase()&&a!==ta&&a!==na&&a!==ua||(b=a),b},_getArrayBuffer:function(){for(var a=this,b=a._build(),c=b.length,d=new ArrayBuffer(c),e=new Uint8Array(d);c--;)e[c]=b.charCodeAt(c);return d},_getCharWidths:function(a,b){var c,d,e,f=this,g=b||{},h=f.getActiveFontObj(),i=g.widths?g.widths:h.metadata.Unicode.widths,j=i.fof?i.fof:1,k=g.kerning?g.kerning:h.metadata.Unicode.kerning,l=k.fof?k.fof:1,m=0,n=i[0]||j,o=[];for(c=0,d=a.length;c<d;c++)e=a.charCodeAt(c),o.push((i[e]||n)/j+(k[e]&&k[e][m]||0)/l),m=e;return o},_sum:function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c},_getStringWidth:function(a,b){var c=this;return c._sum(c._getCharWidths.call(c,a,b))},_getTextDimensions:function(a){var b,c,d=this,e=d.getActiveFontObj(),f=e.fontName,g=d._tableFontSize||d.getFontSize(),h=e.fontStyle;c=o.createElement("font");try{c.style.fontStyle=h}catch(i){c.style.fontWeight=h}c.style.fontName=f,c.style.fontSize=g+R;try{c.textContent=a}catch(i){c.innerText=a}return o.body.appendChild(c),b={w:(c.offsetWidth+1)*va,h:(c.offsetHeight+1)*va},o.body.removeChild(c),b},_setLastCellPosition:function(a,b,c,d,e){this._lastCellPos={x:a,y:b,w:c,h:d,ln:e}},_getLastCellPosition:function(){return this._lastCellPos},_cellAddPage:function(){var a=this,b=a._cellMargins||a._noMargins;a.addPage(),a._setLastCellPosition(b.left,b.top),a._cellPages++},_setTableHeaderConfig:function(a){this._cellTableHeaderRow=a},_splitWord:function(a,b,c,d){for(var e,f=[],g=0,h=a.length,i=0;g!==h&&i+b[g]<c;)i+=b[g],g++;for(f.push(a.slice(0,g)),e=g,i=0;g!==h;)i+b[g]>d&&(f.push(a.slice(e,g)),i=0,e=g),i+=b[g],g++;return e!==g&&f.push(a.slice(e,g)),f},_splitParagraph:function(a,b,c){var d,e,f,g,h,i=this,j=c||{},k=[],l=[k],m=j.textIndent||0,n=0,o=0,p=a.split(" "),s=i._getCharWidths(" ",j)[0],t=j.lineIndent===-1?p[0].length+2:j.lineIndent||0;if(t){var u=new Array(t).join(" "),v=[];r(p,function(a,b){b=b.split(/\s*\n/),b.length>1?v=v.concat(q(b,function(a,b){return(b&&a.length?"\n":"")+a})):v.push(b[0])}),p=v,t=i._getStringWidth(u,j)}for(f=0,g=p.length;f<g;f++){var w=0;if(d=p[f],t&&"\n"==d[0]&&(d=d.substr(1),w=1),e=i._getCharWidths(d,j),o=i._sum(e),m+n+o>b||w){if(o>b){for(h=i._splitWord(d,e,b-(m+n),b),k.push(h.shift()),k=[h.pop()];h.length;)l.push([h.shift()]);o=i._sum(e.slice(d.length-k[0].length))}else k=[d];l.push(k),m=o+t,n=s}else k.push(d),m+=n+o,n=s}var x=t?function(a,b){return(b?u:"")+a.join(" ")}:function(a){return a.join(" ")};return q(l,x)},_splitText:function(a,b,c){var d,e,f,g,h=this,i=c||{},j=u(a)?a.join(" "):a,k=h._getTextDimensions(j).w/j.length,l=[],m=function(a){var b,c,d={0:1},e={};return a.widths&&a.kerning?{widths:a.widths,kerning:a.kerning}:(b=h.getFontObj(a.fontName,a.fontStyle)||h.getActiveFontObj(),c="Unicode",b.metadata[c]?{widths:b.metadata[c].widths||d,kerning:b.metadata[c].kerning||e}:{widths:d,kerning:e})}.call(h,i);for(d=u(a)?a:a.split(/\r?\n/),e=1*h._scaleFactor*b/k,m.textIndent=i.textIndent?1*i.textIndent*h._scaleFactor/k:0,m.lineIndent=i.lineIndent,f=0,g=d.length;f<g;f++)l=l.concat(h._splitParagraph(d[f],e,m));return l},_getLineHeight:function(a,b,c){var d,e,f,g,h=this,i=0,j=h._cellPadding;for(f=0;f<a.length;f++)d=a[f],e=u(c)?c[f]:c[d],u(e)||(!y(e)||z(e)?e="":e+=""),c[d]=h._splitText(e,b[d]-j),g=h.getLineHeight()*c[d].length+1.6*j,g>i&&(i=g);return i},_cell:function(a,b,c,d,e,f,g){var h,i,j,k,l=this,m=l._getLastCellPosition(),n=l._cellMargins||l._noMargins,o=l._cellPadding;if(y(m.ln)&&(m.ln===f?(a=m.x+m.w,b=m.y):(m.y+m.h+d+l._cellMargin>=l._pageHeight-n.bottom&&(l._cellAddPage(),l._tablePrintHeader&&l._cellTableHeaderRow&&l._renderHeader(f,!0)),h=l._getLastCellPosition(),b=h.y+(h.h||0))),y(e[0]))if(l._cellPrintingHeaderRow?l.rect(a,b,c,d,qa):l.rect(a,b,c,d),"right"===g)for(u(e)||(e=[e]),k=0;k<e.length;k++)i=e[k],j=l._getStringWidth(i)*l.getFontSize(),l.text(i,a+c-j-o,b+l.getLineHeight()*(k+1));else l.text(e,a+o,b+l.getLineHeight());return l._setLastCellPosition(a,b,c,d,f),l},_renderHeader:function(a,b){var c,d,e,f,g,h=this,i=[];if(!h._cellTableHeaderRow)return void E("shieldExport: No table header configuration",h.options.dieOnError);for(h._cellPrintingHeaderRow=!0,y(h._cellHeaderFunction)&&(g=h._cellHeaderFunction.call(h,h._cellPages),h._setLastCellPosition(g[0],g[1],g[2],g[3],-1)),h.setFontStyle(ja),e=0,f=h._cellTableHeaderRow.length;e<f;e++)h.setFillColor(236,237,238),c=h._cellTableHeaderRow[e],b&&(c[1]=h._cellMargins&&h._cellMargins.top||0,i.push(c)),d=[].concat(c),h._cell.apply(h,d.concat(a));i.length>0&&h._setTableHeaderConfig(i),h.setFontStyle(ia),h._cellPrintingHeaderRow=!1},table:function(a,b,c,e,f){var g,h,i,j,k,l,m,n,o,p,r,s,u=this,v=u._cellPadding,w=[],x=[],A={},B=[],D=function(a){return a[g]},G=!0,H=u.getFontSize(),I=u._noMargins;if(!c)return void E("shieldExport: No data specified for PDF table",u.options.dieOnError);if(s=c.slice(0),f&&(f.printHeader===!1&&(G=!1),f.fontSize&&(H=f.fontSize),f.margins&&(I=f.margins)),u._lastCellPos={x:d,y:d,w:d,h:d,ln:d},u._cellPages=1,u._tablePrintHeader=G,u._cellMargins=I,u.setFontSize(H),u._tableFontSize=H,!y(e)||z(e))w=F(s[0]);else if(e[0]&&!t(e[0]))for(h=0,i=e.length;h<i;h++)g=e[h],w.push(g.field),x.push(g.title),A[g.field]=y(g.width)?C(g.width)*u._getScaleFactor():d;else w=e;for(h=0,i=w.length;h<i;h++)if(g=w[h],!y(A[g])){for(m=[],m.push(u._getTextDimensions(x[h]||g).w+2*v),l=q(s,D),n=0,j=l.length;n<j;n++)k=l[n],m.push(u._getTextDimensions(k).w+2*v);A[g]=Math.max.apply(Math,m)}if(G){for(r=u._getLineHeight(w,A,x.length?x:w),h=0,i=w.length;h<i;h++)g=w[h],B.push([a,b,A[g],r,(x.length?x[h]:g)+""]);u._setTableHeaderConfig(B),u._renderHeader(1,!1)}for(h=0,i=s.length;h<i;h++)for(o=s[h],r=u._getLineHeight(w,A,o),n=0,p=w.length;n<p;n++)g=w[n],u._cell(a,b,A[g],r,o[g],h+2,e[n].align);return u}}),p(k,{PDFDocument:g,OOXMLWorkbook:i,ExcelXMLSpreadsheet:j})}(jQuery,shield,this);
shield.version='1.7.29';
!function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C=b.ui.Widget,D=(b.Class,b.DataSource),E=b.Constants.KeyCode,F=b.error,G=b.is.func,H=b.is.array,I=b.is.defined,J=(b.is.number,b.to.array),K=b.to["int"],L=b.to.number,M=b.support.browser,N=b.format,O=b.strid,P=document,Q=Math.min,R=Math.max,S=Math.pow,T=a.extend,U=(a.map,a.each),V=a.proxy,W=a.inArray,X="id",Y="role",Z="true",$="false",_="listbox",aa="textbox",ba="button",ca="switch",da="aria",ea=da+"-selected",fa=da+"-autocomplete",ga=da+"-activedescendant",ha=da+"-multiline",ia=da+"-valuenow",ja=da+"-valuemin",ka=da+"-valuemax",la=da+"-valuetext",ma=da+"-disabled",na=da+"-haspopup",oa=da+"-checked",pa=da+"-label",qa=da+"-labelledby",ra=da+"-controls",sa=da+"-expanded",ta="alt",ua="title",va="disabled",wa="checked",xa="selected",ya="itemclick",za="tabindex",Aa="mousedown",Ba="mouseup",Ca="mouseout",Da="click",Ea="keydown",Fa="keypress",Ga="keyup",Ha="cut",Ia="paste",Ja="dragstart",Ka="dragenter",La="dragover",Ma="drop",Na="change",Oa="focus",Pa="blur",Qa="resize",Ra="select",Sa="input",Ta="value",Ua="placeholder",Va="selectstart",Wa="unselectable",Xa="on",Ya="width",Za="height",$a="suilbitemdata",_a="suilbitemindex",ab="suilbitemvalue",bb="suilbitemtext",cb="uts",db="uti",eb="utta",fb="uto",gb=function(b){var c=a(b).prop("tagName").toLowerCase();return c==Ra?cb:c==Sa?db:"textarea"==c?eb:fb},hb=function(b){return a("<div/>").text(b).html()},ib=function(b){var c,d=a(b);d.focus(),d.get(0).setSelectionRange?(c=2*d.val().length,d.get(0).setSelectionRange(c,c)):d.val(d.val())},jb=function(a){a+="";var b=a.lastIndexOf(".");return b>-1?a.length-b-1:0},kb=function(a,b){if(a&&!G(a))if(H(a))for(var c=0;c<a.length;c++)kb(a[c],b);else if(a.or||a.and)for(var d in a)a.hasOwnProperty(d)&&kb(a[d],b);else a.value=b};e={enabled:!0,cls:d,dataSource:d,readDataSource:!0,valueTemplate:d,textTemplate:d,multiple:d,selected:d,values:d,width:d,height:d,maxHeight:d,events:{}},f=C.extend({init:function(){C.fn.init.apply(this,arguments);var b,c,d,e,f=this,g=f.options,h=g.dieOnError,i=g.dataSource,j=g.selected,k=g.values,l=g.renderToINTERNAL,m=g.wrapOriginalINTERNAL,n=g.tabindexINTERNAL,o=g.filterINTERNAL,p=I(o)?{filter:o}:{},q=!I(m)||m;if(f._original=b=a(f.element),f._utype=e=gb(b),e==db&&g.multiple)return f.destroy(),void F("shieldListBox: Cannot initialize a multi-selection ListBox from an input element.",h);if(f._eventNS=".shieldListBox"+f.getInstanceId(),I(k)||I(j)||e!=cb&&e!=db||(k=b.val()),q?(f.wrapper=b.wrap("<span/>").parent(),f._isWrapped=!0):f._isWrapped=!1,b.hide(),f.element=d=a('<ul id="'+O()+'"/>').on(Oa+f._eventNS,V(f._focus,f)).on(Pa+f._eventNS,V(f._blur,f)),I(g.width)&&d.css(Ya,g.width),I(g.height)&&d.css(Za,g.height),I(g.maxHeight)&&d.css("max-height",g.maxHeight),a(l).length>0?a(l).append(d):b.after(d),i)f.dataSource=D.create(i,p),g.valueTemplate||(g.valueTemplate="{0}"),g.textTemplate||(g.textTemplate="{0}");else{if(e!=cb)return f.destroy(),void F("shieldListBox: No dataSource or underlying SELECT element found.",h);f.dataSource=D.create(T({},{data:b,schema:{type:Ra}},p)),g.valueTemplate||(g.valueTemplate="{value}"),g.textTemplate||(g.textTemplate="{text}"),I(g.multiple)||(g.multiple=b.not("[multiple]").length<=0)}d.addClass("sui-listbox"),g.cls&&d.addClass(g.cls),c=I(n)?n:b.attr(za),d.attr(za,I(c)?c:"0"),d.on(Ea+f._eventNS,V(f._keydown,f)),f.dataSource.on(Na+f._eventNS,V(f._dsChange,f)),I(k)?f._initValues=k:I(j)&&(f._initSelected=j),d.attr(Y,_),g.multiple&&d.attr("aria-multiselectable",Z),g.readDataSource&&f.dataSource.read(),f.enabled(g.enabled)},refresh:function(a){this.refreshWithElement(this._original,a)},_focus:function(a){var b=this;b._oldSelection=b.selected(),b.trigger(Oa)},_blur:function(b){var c=this,d=c._oldSelection,e=c.selected();0===a(d).not(e).length&&0===a(e).not(d).length||c.trigger(Na),c._oldSelection=e,c.trigger(Pa)},_dsChange:function(a){var b=this;b._render(),b._dsLoadedOnce||(b._dsLoadedOnce=!0,I(b._initValues)?b.values(b._initValues):I(b._initSelected)&&b.selected(b._initSelected))},_render:function(){var b=this,c=b.options,e=b.dataSource.view,f=a(b.element),g=b._utype,h=b._original,i=f.attr(X)+"_opt";g==db?b._original.val():d;f.empty(),g==cb?h.empty():g==db&&h.removeAttr(Ta),e&&U(e,function(d,e){var j=N.call(b,c.valueTemplate,e),k=N.call(b,c.textTemplate,e),l=a('<li id="'+i+d+'" role="option">'+k+"</li>").addClass("sui-listbox-item sui-unselectable").click(function(c){b._enabled&&(b._setActive(a(this)),b._toggleActive(c)),b.trigger(ya,{index:d,item:e})}).on(Va,function(){return!1}).data($a,e).data(_a,d).data(ab,j).data(bb,k);c.multiple&&l.attr(ea,$),f.append(l),g==cb&&h.append(a("<option/>").attr(Ta,j).text(k))})},_keydown:function(a){var b=this,c=!0;switch(a.keyCode){case E.UP:b._move("up",a);break;case E.DOWN:b._move("down",a);break;case E.HOME:b._move("first",a),c=!1;break;case E.END:b._move("last",a),c=!1;break;case E.SPACE:case E.ENTER:b._toggleActive(a);break;default:c=!1}c&&a.preventDefault()},_move:function(b,c){var d=this,e=a(d.element),f=e.find(".sui-listbox-item-active").first(),g=e.find(":first");d._enabled&&("up"==b?f.prev().length>0?g=f.prev():f.length>0&&(g=f):"down"==b?f.next().length>0?g=f.next():f.length>0&&(g=f):"first"==b?g=e.find(".sui-listbox-item").first():"last"==b&&(g=e.find(".sui-listbox-item").last()),g.length<=0||(d.options.multiple?(d._setActive(g),d._ensureInScrollableArea(g)):d._select(g)))},_ensureInScrollableArea:function(b){var c=this,d=a(c.element),e=d.height(),f=d.scrollTop(),g=b.outerHeight(),h=b.position().top,i=h+g;h<0?d.scrollTop(f+h):i>e&&d.scrollTop(f+(i-e))},ensureActiveViewableINTERNAL:function(){var a=this,b=a._getActive();b.length>0&&a._ensureInScrollableArea(b)},_getActive:function(){return a(this.element).find(".sui-listbox-item-active").first()},_setActive:function(b){b.addClass("sui-listbox-item-active").siblings().removeClass("sui-listbox-item-active"),a(this.element).attr(ga,b.attr(X))},_setSelected:function(a){a.addClass("sui-listbox-item-selected").attr(ea,Z)},_unsetSelected:function(a){a.removeClass("sui-listbox-item-selected"),this.options.multiple?a.attr(ea,$):a.removeAttr(ea)},_toggleActive:function(a){this._toggle(a,this._getActive())},_toggle:function(a,b){var c=this;c._enabled&&(!b||b.length<=0||(c.options.multiple&&b.hasClass("sui-listbox-item-selected")?c._deselect(b):c._select(b)))},_select:function(a,b){var c=this,d=c._original,e=c._utype,f=c.options.multiple;f||c.clearSelection(),c._setActive(a),c._ensureInScrollableArea(a),c._setSelected(a),e==cb?d.find("option:eq("+a.data(_a)+")").attr(xa,xa):e==db&&d.attr(Ta,a.data(ab)),b||c.trigger(Ra,{index:a.data(_a),item:a.data($a),value:a.data(ab),text:a.data(bb),selected:!0})},_deselect:function(a,b){var c=this,d=c._original,e=c._utype;c._setActive(a),c._unsetSelected(a),e==cb?d.find("option:eq("+a.data(_a)+")").removeAttr(xa):e==db&&d.removeAttr(Ta),b||c.trigger(Ra,{index:a.data(_a),item:a.data($a),value:a.data(ab),text:a.data(bb),selected:!1})},enabled:function(){var b,c=this,d=a(c.element),e=c._original,f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?(d.removeAttr(va).removeClass("sui-listbox-disabled"),e.removeAttr(va)):(d.attr(va,va).addClass("sui-listbox-disabled"),e.attr(va,va)),c._enabled=b,void 0):c._enabled},selected:function(){var b,c,d=this,e=a(d.element),f=[].slice.call(arguments);if(!(f.length>0)){var g=[];return e.find(".sui-listbox-item-selected").each(function(){g.push(a(this).data(_a))}),g}b=J(f[0]),c=!I(f[1])||!!f[1],e.find(".sui-listbox-item").each(function(e){W(e,b)>-1&&(c?d._select(a(this),!0):d._deselect(a(this),!0))})},selectedItems:function(){var b=[];return a(this.element).find(".sui-listbox-item-selected").each(function(){b.push(a(this).data($a))}),b},values:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);if(!(e.length>0)){var f=[];return d.find(".sui-listbox-item-selected").each(function(){f.push(a(this).data(ab))}),f}b=J(e[0]),d.find(".sui-listbox-item").each(function(){if(W(a(this).data(ab),b)>-1)return c._select(a(this),!0),!!c.options.multiple})},texts:function(){var b=[];return a(this.element).find(".sui-listbox-item-selected").each(function(){b.push(a(this).data(bb))}),b},clearSelection:function(){var b=this,c=b._original,d=b.options.multiple,e=b._utype;e==cb?c.find("option").removeAttr(xa):e==db&&c.removeAttr(Ta),a(b.element).find(".sui-listbox-item-selected").each(function(){a(this).removeClass("sui-listbox-item-selected sui-listbox-item-active"),d?a(this).attr(ea,$):a(this).removeAttr(ea)})},destroy:function(){var b=this,c=b._eventNS;b._dsLoadedOnce=!1,a(b.element).off(c).remove(),b.dataSource&&b.dataSource.off(Na+c),b._isWrapped&&b._original.unwrap(),b._original.show(),C.fn.destroy.call(b)}}),f.defaults=e,b.ui.plugin("ListBox",f),i={enabled:!0,cls:d,autoComplete:d,value:d,events:{}},j=C.extend({init:function(){C.fn.init.apply(this,arguments);var b=this,c=b.options,d=c.autoComplete,e=c.cls,f=c.value,g=a(b.element);b._eventNS=".shieldTextBox"+b.getInstanceId(),g.addClass("sui-input"),d&&(b.autoComplete=new h(g,d)),e&&g.addClass(e),g.on(Oa+b._eventNS,V(b._focus,b)).on(Pa+b._eventNS,V(b._blur,b)),g.attr(Y,aa),gb(g)==eb&&g.attr(ha,Z),b.enabled(c.enabled),I(f)&&b.value(f)},focus:function(){a(this.element).focus(),ib(a(this.element))},_focus:function(a){var b=this;b.oldValue=b._value(),b.interval=setInterval(V(b._detectChanges,b),1),b.trigger(Oa)},_blur:function(a){clearInterval(this.interval),this.trigger(Pa)},_detectChanges:function(){var a,b=this;b._enabled&&b.oldValue!==b._value()&&(a=b.trigger(Na,{value:b._value(),old:b.oldValue}),a.isDefaultPrevented()?b._value(b.oldValue):b.oldValue=b._value())},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){return this._value.apply(this,arguments)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeAttr(va).removeClass("sui-input-disabled"):d.attr(va,va).addClass("sui-input-disabled"),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.autoComplete,c=a.options.cls;clearInterval(a.interval),a.element.off(a._eventNS).removeClass("sui-input"+(c?" "+c:"")),b&&b.destroy(),C.fn.destroy.call(a)}}),j.defaults=i,b.ui.plugin("TextBox",j),g={dataSource:d,valueTemplate:"{0}",textTemplate:"{0}",open:!1,delay:200,minLength:2,dropDownWidth:d,animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}},h=C.extend({init:function(){C.fn.init.apply(this,arguments);var b=this,d=a(b.element),e=b.options,g=e.dataSource,h=e.dieOnError;return b.pending=0,b.oldValue=d.val(),g?(g.filter||(g.filter={and:[{path:"",filter:"contains",value:""}]}),b._eventNS=".shieldAutoComplete"+b.getInstanceId(),d.addClass("sui-input"),b.listElement=a("<span/>").appendTo(P.body),b.listBox=new f(b.listElement,{cls:"sui-autocomplete",dataSource:g,readDataSource:!1,textTemplate:e.textTemplate,multiple:!1,width:e.dropDownWidth||d.innerWidth(),events:{select:function(a){b._value(N.call(b,e.valueTemplate,a.item))},itemclick:function(a){d.focus(),b._inputBlur(a,0)},blur:function(a){b._inputBlur(a,0)}}}),b.listBox.element.hide(),b.dataSource=b.listBox.dataSource,d.on(Ea+b._eventNS,V(b._inputKeydown,b)).on(Pa+b._eventNS,V(b._inputBlur,b,100)),d.attr(fa,"list").attr(ra,b.listBox.element.attr(X)).attr(na,b.listBox.element.attr(Y)),d.attr(Y,aa),gb(d)==eb&&d.attr(ha,Z),b.listBox.dataSource.on(Na+b._eventNS,V(b._dsChange,b)),a(c).on(Qa+b._eventNS,V(b._position,b)),b._open=!1,void(e.open&&b._searchTimeout())):(b.destroy(),void F("shieldAutoComplete: No dataSource set",h))},_checkValueUpdated:function(){var a=this,b=a.element,c=b.val();a.oldValue!==c&&(a.trigger(Na,{value:a._value()}),a.oldValue=c)},_restoreOldValue:function(){this._value(this.oldValue)},_inputKeydown:function(a){var b=this;switch(a.keyCode){case E.TAB:break;case E.UP:case E.DOWN:b._inputUpDown(a);break;case E.ENTER:a.preventDefault(),b.cancelSearch=!0,b._hideItemList(),b._checkValueUpdated();break;case E.ESC:a.preventDefault(),b.cancelSearch=!0,b._hideItemList(),b._restoreOldValue();break;default:b._searchTimeout(a)}},_inputUpDown:function(b){var c=this;c._open?c._hasData()&&a(c.listBox.element).trigger(b):c._hasData()&&c._showItemList()},_inputBlur:function(b,c){var d=this;setTimeout(function(){a(d.listBox.element).is(":focus")||(d._hideItemList(),d._checkValueUpdated())},c)},_searchTimeout:function(a){var b=this;clearTimeout(b.searchTimeout),b.searchTimeout=setTimeout(function(){b.term!==b._value()&&b._search()},b.options.delay)},_search:function(){var b=this;return b.term=b._value(),b.term.length<b.options.minLength?void b._hideItemList():(b.cancelSearch=!1,b.pending++,a(b.element).addClass("sui-autocomplete-loading"),kb(b.listBox.dataSource.filter,b.term),void b.listBox.dataSource.read())},_dsChange:function(){var b=this;b.pending--,b.pending||a(b.element).removeClass("sui-autocomplete-loading"),!b.cancelSearch&&b._hasData()?b._showItemList():b._hideItemList()},_hasData:function(){var a=this.listBox.dataSource.view;return a&&a.length>0},_position:function(){var b=this,c=a(b.element),d=a(b.listBox.element),e=c.offset(),f=c.outerHeight();d.css({top:e.top+f,left:e.left,width:b.options.dropDownWidth||c.innerWidth()})},_showItemList:function(){var b=this,c=b.listBox,d=a(c.element),e=b.options.animation;b._position(),e&&e.enabled?d.slideDown(e.openDelay,V(c.ensureActiveViewableINTERNAL,c)):(d.show(),c.ensureActiveViewableINTERNAL()),b._open=!0},_hideItemList:function(){var b=this,c=a(b.listBox.element),d=b.options.animation;d&&d.enabled?c.slideUp(d.closeDelay):c.hide(),b._open=!1},_value:function(){return this.element.val.apply(this.element,arguments)},hide:function(){a(this.listBox.element).hide()},show:function(){a(this.listBox.element).show()},isVisible:function(){return a(this.listBox.element).is(":visible")},destroy:function(){var b=this;b.dataSource=null,b.listBox&&(b.listBox.dataSource.off(Na+b._eventNS),b.listBox.destroy(),b.listBox=null),b.element.off(b._eventNS).removeClass("sui-input"),a(c).off(Qa+b._eventNS),b.listElement&&b.listElement.remove(),C.fn.destroy.call(b)}}),h.defaults=g,b.ui.plugin("AutoComplete",h),k={enabled:!0,cls:"",min:0,max:100,value:d,step:d,editable:!0,spinners:!0,valueTemplate:d,textTemplate:d,labels:{increase:"Increase value",decrease:"Decrease value"},events:{}},l=C.extend({init:function(){C.fn.init.apply(this,arguments);var b,c,d,e,f,g,h,i,j=this,k=j.options,l=k.cls,m=k.value,n=k.step,o=k.editable,p=k.spinners,q=k.labels,r=q.increase,s=q.decrease,t=k.dieOnError;return j._original=b=a(j.element),gb(b)!=db?void F("shieldNumericTextBox: Underlying element is not INPUT",t):(I(n)?k.step=n=L(n):(h=jb(I(m)?m:j._value()),h>0?k.step=n=1/S(10,h):k.step=n=1),n?(j._eventNS=".shieldNumericTextBox"+j.getInstanceId(),j.element=d=b.wrap("<span/>").parent(),b.hide(),I(m)||(m=j._value()),o?(e=a('<input type="text" class="sui-input" />'),c=b.attr(Ua),I(c)&&e.attr(Ua,c)):e=a('<span class="sui-input">&nbsp;</span>').attr(za,"0"),j.textElement=e,e.appendTo(d),e.on(Oa+j._eventNS,V(j._focus,j)).on(Pa+j._eventNS,V(j._blur,j)),p&&(j._onSpinUpMDProxy=V(j._spinUpMD,j),j._onSpinDownMDProxy=V(j._spinDownMD,j),j._onSpinnerMUProxy=V(j._spinnerMU,j),j.spinUp=f=a('<span class="sui-spinner sui-spinner-up sui-unselectable"/>').html('<span class="sui-caret-up sui-unselectable" unselectable="on"/>').attr(Wa,Xa).attr(ta,r).attr(ua,r).on(Aa+j._eventNS,j._onSpinUpMDProxy).on(Ba+j._eventNS,j._onSpinnerMUProxy).on(Ca+j._eventNS,j._onSpinnerMUProxy).on(Va+j._eventNS,function(){return!1}),j.spinDown=g=a('<span class="sui-spinner sui-spinner-down sui-unselectable"/>').html('<span class="sui-caret-down sui-unselectable" unselectable="on"/>').attr(Wa,Xa).attr(ta,s).attr(ua,s).on(Aa+j._eventNS,j._onSpinDownMDProxy).on(Ba+j._eventNS,j._onSpinnerMUProxy).on(Ca+j._eventNS,j._onSpinnerMUProxy).on(Va+j._eventNS,function(){return!1}),d.append(a('<span class="sui-spinners"/>').append(f,g))),e.on(Ea+j._eventNS,V(j._keydown,j)),d.addClass("sui-numeric-textbox"+(p?"":" sui-numeric-textbox-nosp")+(l?" "+l:"")),i=jb(n),I(k.textTemplate)||(k.textTemplate="{0:n"+i+"}"),I(k.valueTemplate)||(k.valueTemplate="{0:n"+i+"}"),d.attr(Y,"spinbutton").attr(ja,k.min).attr(ka,k.max),j.enabled(k.enabled),I(m)&&j.value(m),void(j._destroyed=!1)):void F("shieldNumericTextBox: Invalid step",t))},refresh:function(a){this.refreshWithElement(this._original,a)},_focus:function(b){var c=this;c._hasFocus||(c._hasFocus=!0,a(c.element).addClass("sui-numeric-textbox-focus"),c.value(c.value()),c.trigger(Oa))},_blur:function(b){var c=this,d=a(c.element),e=a(c.textElement);if(c.options.editable){var f,g=c.value();c._updateIfDirty(),f=c.value(),f!==g&&c.trigger(Na,{value:f})}setTimeout(function(){if(!(d.is(":focus")||e.is(":focus")||c._destroyed)){if(c._hasFocus=!1,d.removeClass("sui-numeric-textbox-focus"),c.options.editable){var a,b=c.value();c.value(e.val()),a=c.value(),a!==b&&c.trigger(Na,{value:a})}else c.value(c.value());c.trigger(Pa)}},100)},_keydown:function(a){var b=this,c=a.keyCode,d=b._enabled;switch(c){case E.TAB:case E.LEFT:case E.RIGHT:break;case E.END:b._updateValue("max",!1),a.preventDefault();break;case E.HOME:b._updateValue("min",!1),a.preventDefault();break;case E.ESC:d&&b.value(b.value()),a.preventDefault();break;case E.UP:b._updateValue("inc",!1),a.preventDefault();break;case E.DOWN:b._updateValue("dec",!1),a.preventDefault();break;default:b.options.editable&&d&&(c>=48&&c<=57||c>=96&&c<=105||190==c||110==c||173==c||109==c||189==c||c==E.DEL||c==E.BACK||c==E.ENTER||a.ctrlKey&&(118==c||86==c))?b._dirty=!0:a.preventDefault()}},_spinUpMD:function(a){var b=this;a.preventDefault(),b._updateValue("inc",!1),b._spinUpCancel=!1,setTimeout(function(){b._spinUpInt||b._spinUpCancel||(b._spinUpInt=setInterval(V(b._updateValue,b,"inc",!1),20))},100)},_spinDownMD:function(a){var b=this;a.preventDefault(),b._updateValue("dec",!1),b._spinDownCancel=!1,setTimeout(function(){b._spinDownInt||b._spinDownCancel||(b._spinDownInt=setInterval(V(b._updateValue,b,"dec",!1),20))},100)},_spinnerMU:function(a){var b=this;b._spinUpCancel=b._spinDownCancel=!0,clearInterval(b._spinUpInt),clearInterval(b._spinDownInt),b._spinUpInt=b._spinDownInt=null},_updateIfDirty:function(){var b=this,c=a(b.textElement);b._dirty&&(b.value(c.val()),b._dirty=!1)},_updateValue:function(b,c,d){var e,f=this,g=f.options,h=g.min,i=g.max,j=g.step,k=a(f.textElement),l=!1;f._enabled&&(f._updateIfDirty(),e=f.value(),I(e)||(e=0),c=!I(c)||!!c,d=!I(d)||!!d,"inc"==b?e<i&&(f.value(e+j),l=!0):"dec"==b?e>h&&(f.value(e-j),l=!0):"min"==b?(f.value(h),l=!0):"max"==b&&(f.value(i),l=!0),d&&(k.focus(),g.editable&&ib(k)),l&&!c&&f.trigger(Na,{value:f.value()}))},increment:function(){this._updateValue("inc",!0,!1)},decrement:function(){this._updateValue("dec",!0,!1)},value:function(){var b,c,d=this,e=d.options,f=[].slice.call(arguments),g=d.element,h=a(d.textElement);return f.length>0?(I(f[0])&&null!==f[0]&&""!==f[0]?(b=R(Q(f[0],e.max),e.min),b=N.call(d,e.valueTemplate,b),b=L(b),c=N.call(d,e.textTemplate,b)+""):(b=null,c=""),e.editable?d._hasFocus&&d._enabled?h.val(b):h.val(c):h.html(c),d._value(b),null!==b?g.attr(ia,b):g.removeAttr(ia),g.attr(la,hb(c)),void 0):L(d._value())},_value:function(){return this._original.attr.apply(this._original,[Ta].concat([].slice.call(arguments)))},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeAttr(va).removeClass("sui-numeric-textbox-disabled"):d.attr(va,va).addClass("sui-numeric-textbox-disabled"),c._enabled=b,void 0):c._enabled},focus:function(){a(this.textElement).focus(),ib(a(this.textElement))},destroy:function(){var b=this;b._destroyed=!0,b.options.spinners&&(a(b.spinUp).off(b._eventNS).remove(),a(b.spinDown).off(b._eventNS).remove(),b.spinUp=b.spinDown=null),a(b.textElement).off(b._eventNS).remove(),b.textElement=null,b._original.unwrap().show(),b._original=null,C.fn.destroy.call(b)}}),l.defaults=k,b.ui.plugin("NumericTextBox",l),m={enabled:!0,mask:"00-00-0000",promptChar:"_",value:"",rules:{0:function(a){return/^[0-9]$/.test(a)},9:function(a){return/^[0-9 ]$/.test(a)},"#":function(a){return/^[0-9 \+\-]$/.test(a)},L:function(a){return/^[a-zA-Z]$/.test(a)},"?":function(a){return/^[a-zA-Z ]$/.test(a)},"&":function(a){return/^[\S]$/.test(a)},C:function(a){return/^[.]$/.test(a)},A:function(a){return/^[0-9a-zA-Z]$/.test(a)},a:function(a){return/^[0-9a-zA-Z ]$/.test(a)}},cultureSpecific:[".",",","$"],separators:["/","-"," ","(",")"],cls:d,events:{}},n=C.extend({init:function(){C.fn.init.apply(this,arguments);var b=this,c=b.options,d=c.dieOnError,e=c.value,f=a(b.element);return gb(f)!=db?void F("shieldMaskedTextBox: Underlying element is not INPUT",d):b._verifyMask()?(b._eventNS=".shieldMaskedTextBox"+b.getInstanceId(),f.addClass("sui-input"),c.cls&&f.addClass(c.cls),I(e)&&b.value(e),f.on(Oa+b._eventNS,V(b._focus,b)).on(Pa+b._eventNS,V(b._blur,b)).on(Ea+b._eventNS,V(b._keydown,b)).on(Fa+b._eventNS,V(b._keypress,b)).on(Ha+b._eventNS,V(b._cut,b)).on(Ia+b._eventNS,V(b._paste,b)).on(Ja+b._eventNS,V(b._dragstart,b)).on(Ka+b._eventNS,V(b._dragenter,b)).on(La+b._eventNS,V(b._dragover,b)).on(Ma+b._eventNS,V(b._drop,b)),f.attr(Y,aa),void b.enabled(c.enabled)):void F("shieldMaskedTextBox: Invalid mask",d)},_getMask:function(){var a,b,c=this,d=c.options.mask,e="";for(b=0;b<d.length;b++)a=d.charAt(b),e+=c._isCultureSpecific(a)?c._getCultureSpecific(a):a;return e},_isCultureSpecific:function(a){return W(a,this.options.cultureSpecific)!==-1},_getCultureSpecific:function(a){var c=b.getCurrencyInfo();return"$"==a?c.symbol:c[a]},_skipSymbol:function(a){var b=this,c=b.options.separators;return W(a,c)!==-1||b._isCultureSpecific(a)},_insertAt:function(a,b,c){return a.substr(0,c)+b+a.substr(c)},_removeAt:function(a,b){return a.substr(0,b)+a.substr(b+1)},_caret:function(b,c){var d,e=this,f=a(e.element);if(0!==f.length&&!f.is(":hidden"))return"number"==typeof b?(c="number"==typeof c?c:b,f.each(function(){f.setSelectionRange?f.setSelectionRange(b,c):f.createTextRange&&(d=f.createTextRange(),d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d.select())})):(f[0].setSelectionRange?(b=f[0].selectionStart,c=f[0].selectionEnd):P.selection&&P.selection.createRange&&(d=P.selection.createRange(),b=0-d.duplicate().moveStart("character",-1e5),c=b+d.text.length),{begin:b,end:c})},_caretTo:function(b){var c=this,e=a(c.element);if(e.prop("selectionStart")!==d)e.prop("selectionStart",b),e.prop("selectionEnd",b);else if(P.selection){e.focus();var f=P.selection.createRange();f.moveStart("character",-c.value().length),f.moveEnd("character",-c.value().length),f.moveStart("character",b),f.select()}},_isValid:function(a,b){var c,d=this,e=d._getMask(),f=d.options.rules;return!(b>=e.length)&&(c=e.charAt(b),G(f[c])&&f[c].call(d,a))},_removeRegion:function(a){var b,c,d=this,e=d.options,f=d._getMask(),g=d._value(),h=d._caret(),i=e.promptChar,j=h.begin;if(j==h.end)a?(b=f.charAt(--j),d._skipSymbol(b)||(j>=0?(g=d._removeAt(g,j),g=d._insertAt(g,i,j),d._value(g)):j=0)):j<g.length&&(b=f.charAt(j),d._skipSymbol(b)?j++:(g=d._shiftLeft(g,j),d._value(g)));else{for(c=j;c<h.end;c++)d._skipSymbol(f.charAt(c))||(g=d._removeAt(g,c),g=d._insertAt(g,i,c));for(;d._skipSymbol(f.charAt(j));)++j;for(c=j;c<h.end;c++)d._skipSymbol(f.charAt(c))||(g=d._shiftLeft(g,j));d._value(g)}d._caretTo(j)},_shiftLeft:function(a,b){for(var c,d,e,f=this,g=f.options,h=f._getMask(),i=g.promptChar,j=b;j<a.length-1;){for(e=j+1;f._skipSymbol(h.charAt(e));)e++;if(e>a.length-1)break;c=a.charAt(e),a=f._removeAt(a,j),d=f._isValid(c,j),a=f._insertAt(a,d?c:i,j),j=e}return a=f._removeAt(a,j),a=f._insertAt(a,i,j)},_shiftRightKey:function(a,b){var c,d,e,f=this,g=f.options,h=f._getMask(),i=a.charAt(b),j=g.promptChar;if(i!=j&&b<a.length-1){for(var k=b+1,l=a.charAt(k);l!=j&&k<=a.length;)l=a.charAt(++k);if(l==j)for(var m=k;m>b;){if(!f._skipSymbol(h.charAt(m))){for(d=m-1,c=a.charAt(d);f._skipSymbol(h.charAt(d));)c=a.charAt(--d);a=f._removeAt(a,m),e=f._isValid(c,m),a=f._insertAt(a,e?c:j,m)}m--}}return a},_shiftRightPaste:function(a,b){var c,d,e,f,g=this,h=g.options,i=g._getMask(),j=h.promptChar,k=b;for(d=a.charAt(k);k<a.length-1;){for(e=k+1;g._skipSymbol(i.charAt(e));)e++;if(e>a.length-1)break;c=a.charAt(e),a=g._removeAt(a,e),f=g._isValid(d,e),a=g._insertAt(a,f?d:j,e),d=c,k=e}return a},_commit:function(a){for(var b,c=this,d=c._getMask(),e=c._caret(),f=e.begin;c._skipSymbol(d.charAt(f));)++f;if(c._isValid(a,f)){for(e.end>e.begin&&c._removeRegion(!1),b=c._value(),b=c._shiftRightKey(b,f),b=c._removeAt(b,f),b=c._insertAt(b,a,f),c._value(b),f++;c._skipSymbol(d.charAt(f));)f++;c._caretTo(f)}},_verifyValue:function(a){var b=this,c=b._getMask();if(a.length!=c.length)return!1;for(var d=0;d<c.length;d++)if(b._skipSymbol(c.charAt(d))){if(c.charAt(d)!==a.charAt(d))return!1}else if(!b._isValid(a.charAt(d),d))return!1;return!0},_verifyMask:function(){for(var a,b=this,c=b._getMask(),d=b.options.rules,e=0;e<c.length;e++)if(!b._skipSymbol(c.charAt(e))&&(a=c.charAt(e),!G(d[a])))return!1;return!0},_applyMask:function(){for(var a=this,b=a.options,c=a._getMask(),d=b.promptChar,e="",f=0;f<c.length;f++)e+=a._skipSymbol(c.charAt(f))?c.charAt(f):d;a._value(e)},_isEmptyMask:function(){for(var a=this,b=a._value(),c=a.options,d=a._getMask(),e=c.promptChar,f=0;f<d.length;f++)if(!a._skipSymbol(d.charAt(f))&&b.charAt(f)!==e)return!1;return!0},_clearMaskOnBlur:function(){this._isEmptyMask()&&this._value("")},_focus:function(b){var c,d=this;a(d.element).addClass("sui-input-focus"),c=d._value(),c&&""!==c||d._applyMask(),d.trigger(Oa)},_blur:function(a){this._clearMaskOnBlur(),this.trigger(Pa)},_preventDrag:function(a){if(a.type==Ja||a.type==Ka||a.type==La||a.type==Ma){var b=a.originalEvent.dataTransfer;return a.type==Ja?b.effectAllowed="none":b.dropEffect="none",a.stopPropagation&&(a.preventDefault(),a.stopPropagation()),!1}},_triggerChange:function(a){var b,c=this;a!==c._value()&&(b=c.trigger(Na,{value:c._value(),old:a}),b.isDefaultPrevented()&&c._value(c.oldValue)),clearInterval(c.changeInterval),c.changeInterval=d},_dragstart:function(a){return this._preventDrag(a)},_dragenter:function(a){return this._preventDrag(a)},_dragover:function(a){return this._preventDrag(a)},_drop:function(a){return this._preventDrag(a)},_keydown:function(a){var b=this,c=a.keyCode,e=b._enabled,f=b._value();switch(e||a.preventDefault(),c){case E.BACK:case E.DEL:b._removeRegion(c==E.BACK),b.changeInterval===d&&(b.changeInterval=setInterval(V(b._triggerChange,b,f),20)),a.preventDefault();break;default:if(a.ctrlKey)switch(c){case 118:case 86:case 122:case 90:case 121:case 89:118==c||86==c?b._paste(a):122!=c&&90!=c||(b._undo(),b.changeInterval===d&&(b.changeInterval=setInterval(V(b._triggerChange,b,f),20))),a.preventDefault()}}},_keypress:function(a){var b,c=this,e=a.keyCode,f=a.which,g=(c._enabled,c._value());if(!a.ctrlKey){switch(e){case E.HOME:case E.END:case E.LEFT:case E.RIGHT:case E.TAB:if(!M.ie)return;break;default:b=String.fromCharCode(f),c._commit(b)}a.preventDefault(),c.changeInterval===d&&g!=c._value()&&(c.changeInterval=setInterval(V(c._triggerChange,c,g),20))}},_cut:function(a){var b=this,c=b._caret();b.cutInterval===d&&(b.cutInterval=setInterval(V(b._aftercut,b,c),20))},_aftercut:function(a){var b,c=this,e=c._getMask(),f=c.value(),g=f,h=c.options.promptChar,i=a.begin;for(b=i;b<a.end;b++)f=c._insertAt(f,c._skipSymbol(e.charAt(b))?e.charAt(b):h,b);for(c._value(f),c._caretTo(i);c._skipSymbol(e.charAt(i));)++i;for(var j=i;j<a.end;j++)c._skipSymbol(e.charAt(j))||(f=c._shiftLeft(f,i));c._value(f),c._caretTo(i),clearInterval(c.cutInterval),c.cutInterval=d,c._triggerChange(g)},_paste:function(a){var b,e,f,g,h=this,i=h._getMask(),j=h._value(),k=j,l=h._caret(),m=l.begin,n=h.options.promptChar,o=a.originalEvent||a;if(m==j.length)return void a.preventDefault();if(o.clipboardData?b=o.clipboardData.getData("text/plain"):c.clipboardData&&(b=c.clipboardData.getData("Text")),null==b)return void a.preventDefault();if(m==l.end){for(;h._skipSymbol(i.charAt(m));)m++;for(g=b.length-1;g>=0;g--)j=h._shiftRightPaste(j,m),j=h._removeAt(j,m),e=h._isValid(b.charAt(g),m),j=h._insertAt(j,e?b.charAt(g):n,m);m+=b.length}else{for(f=m;f<l.end;f++)h._skipSymbol(i.charAt(f))||(j=h._removeAt(j,f),j=h._insertAt(j,n,f));for(g=0;g<b.length;g++){for(;h._skipSymbol(i.charAt(m));)m++;j=h._removeAt(j,m),e=h._isValid(b.charAt(g),m),j=h._insertAt(j,e?b.charAt(g):n,m),m++}}h._value(j),h._caretTo(m),a.preventDefault(),h.changeInterval===d&&(h.changeInterval=setInterval(V(h._triggerChange,h,k),20))},_undo:function(){var a=this;a._applyMask()},_value:function(){return this.element.val.apply(this.element,arguments)},value:function(){if(arguments.length>0){var a=[].slice.call(arguments);if(!this._verifyValue(a[0]))return!1}return this._value.apply(this,arguments)},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeAttr(va).removeClass("sui-input-disabled"):d.attr(va,va).addClass("sui-input-disabled"),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.options.cls;a.element.off(a._eventNS).removeClass("sui-input"+(b?" "+b:"")),C.fn.destroy.call(a)}}),n.defaults=m,b.ui.plugin("MaskedTextBox",n),o={editable:!0,enabled:!0,open:!1,cls:d,dataSource:d,autoComplete:{enabled:!1,delay:200,minLength:0,filter:d},valueTemplate:d,textTemplate:d,inputTemplate:d,selected:d,value:d,width:d,height:d,dropDownWidth:d,dropDownHeight:200,animation:{enabled:!0,openDelay:200,closeDelay:100},events:{}},p=C.extend({init:function(){C.fn.init.apply(this,arguments);var b,e,g,h,i,j,k=this,l=k.options,m=l.editable,n=l.dieOnError,o=l.dataSource,p=l.autoComplete,q=l.selected,r=l.value,s=d;return k._original=b=a(k.element),k._utype=gb(b),o||k._utype==cb?(k._eventNS=".shieldComboBox"+k.getInstanceId(),k.pending=0,k.element=h=b.wrap("<span/>").parent(),b.hide(),k._onDDHandler=V(k._onDD,k),m?(i=a('<input type="text" class="sui-input"/>').focus(function(){a(this).parent().addClass("sui-combobox-focus")}).blur(function(){a(this).parent().removeClass("sui-combobox-focus"),k._blur()}).attr(Y,aa).attr(ha,$),g=b.attr(Ua),I(g)&&i.attr(Ua,g)):i=a('<span class="sui-input sui-unselectable">&nbsp;</span>').attr(Wa,Xa).on(Da+k._eventNS,k._onDDHandler).on(Va+k._eventNS,function(){return!1}),k.textElement=i,i.appendTo(h),k.ddElement=j=a('<span class="sui-caret-container sui-unselectable"/>').html('<span class="sui-caret sui-unselectable" unselectable="on"/>').attr(Wa,Xa).on(Da+k._eventNS,k._onDDHandler).appendTo(h),h.addClass(m?"sui-combobox":"sui-dropdown"),l.cls&&h.addClass(l.cls),e=b.attr(za),m?i.attr(za,I(e)?e:"0"):h.attr(za,I(e)?e:"0"),I(l.width)&&h.css(Ya,l.width),I(l.height)&&(h.css(Za,l.height),i.css(Za,l.height),j.css(Za,l.height)),h.on(Ea+k._eventNS,V(k._keydown,k)).on(Ga+k._eventNS,V(k._keyup,k)),k._focusHandler=V(k._focus,k),m?i.on(Oa+k._eventNS,k._focusHandler):h.on(Oa+k._eventNS,k._focusHandler),h.on(Pa+k._eventNS,V(k._blur,k)),k.listElement=a("<span/>").appendTo(P.body),p&&(s=I(p.filter)?p.filter:o&&o.filter?o.filter:k._utype==cb?{and:[{path:"text",filter:"contains",value:""}]}:{and:[{path:"",filter:"contains",value:""}]}),k.listBox=new f(b,{cls:"sui-autocomplete",dataSource:o,readDataSource:!1,valueTemplate:l.valueTemplate,textTemplate:l.textTemplate,multiple:!1,selected:I(q)&&H(q)?q[0]:q,values:r,width:l.dropDownWidth||h.innerWidth(),maxHeight:l.dropDownHeight,renderToINTERNAL:k.listElement,wrapOriginalINTERNAL:!1,tabindexINTERNAL:M.ie&&M.version<=8?0:-1,filterINTERNAL:s,events:{select:function(a){k._onLBSelChanged(),k.trigger(Ra,{index:a.index,item:a.item,text:a.text,value:a.value})},itemclick:function(a){m?i.focus():h.focus(),k._hideDD(),k.trigger(ya,{index:a.index,item:a.item,text:a.text,value:a.value})},blur:function(a){setTimeout(V(k._blur,k),20)}}}),k.listBox.element.hide(),k.dataSource=k.listBox.dataSource,k.listBox.dataSource.on(Na+k._eventNS,V(k._dsChange,k)),l.textTemplate=k.listBox.options.textTemplate,l.valueTemplate=k.listBox.options.valueTemplate,h.attr(Y,"combobox"),m&&(i.attr(fa,"list"),i.attr(ra,k.listBox.element.attr(X)),
i.attr(na,k.listBox.element.attr(Y))),k.listBox.dataSource.read(),a(c).on(Qa+k._eventNS,V(k._position,k)),k.enabled(l.enabled),k._open=!1,l.enabled&&l.open&&k._showDD(),void(k._destroyed=!1)):(k.destroy(),void F((m?"shieldComboBox":"shieldDropDown")+": No dataSource or underlying SELECT element found.",n))},refresh:function(a){this.refreshWithElement(this._original,a)},focus:function(){this.options.editable?(a(this.textElement).focus(),ib(a(this.textElement))):a(this.element).focus()},_focus:function(a){var b=this;b._hasFocus||(b._hasFocus=!0,b._oldValue=b.value(),b.trigger(Oa))},_blur:function(b){var c=this;setTimeout(function(){c._destroyed||null==c.listBox||a(c.listBox.element).is(":focus")||a(c.element).is(":focus")||a(c.textElement).is(":focus")||(c._hideDD(),c._oldValue!==c.value()&&c.trigger(Na),c.trigger(Pa),c._hasFocus=!1)},100)},_keydown:function(a){var b=this;switch(a.keyCode){case E.TAB:break;case E.UP:case E.DOWN:b._keydownUpDown(a),a.preventDefault();break;case E.ESC:case E.ENTER:a.preventDefault(),b.cancelSearch=!0,b._hideDD();break;default:b._keydownDefault(a)}},_keyup:function(b){var c=this,d=b.keyCode;c.options.editable&&c._utype==db&&d!=E.UP&&d!=E.DOWN&&d!=E.ENTER&&a(c._original).attr(Ta,a(c.textElement).val())},_keydownUpDown:function(b){this._enabled&&a(this.listBox.element).trigger(b)},_keydownDefault:function(a){var b=this;b.listBox.clearSelection(),b._searchTimeout(a)},_searchTimeout:function(b){var c=this,d=c.options.autoComplete;d&&d.enabled&&(clearTimeout(c.searchTimeout),c.searchTimeout=setTimeout(function(){c.term!==a(c.textElement).val()&&c._search()},d.delay))},_search:function(){var b=this;b.listBox.dataSource;return b.term=a(b.textElement).val(),b.term.length<b.options.autoComplete.minLength?void b._hideDD():(b.cancelSearch=!1,b.pending++,a(b.textElement).addClass("sui-autocomplete-loading"),kb(b.listBox.dataSource.filter,b.term),void b.listBox.dataSource.read())},_dsChange:function(){var b=this,c=b._original,d=b._utype,e=b.textElement.val();return b._dsLoaded?(b.pending--,b.pending||a(b.textElement).removeClass("sui-autocomplete-loading"),!b.cancelSearch&&b._hasData()?b._showDD():b._hideDD(),d==cb?c.val(e):d==db&&c.attr(Ta,e),void b.trigger(Ra,{index:-1,item:e})):(b._dsLoaded=!0,!b.options.editable&&b.listBox.selected().length<=0&&b.listBox.selected(0),void b._onLBSelChanged())},_hasData:function(){var a=this.listBox.dataSource.view;return a&&a.length>0},_onLBSelChanged:function(){var a,b,c,d=this,e=d.options,f=e.editable,g=d.listBox,h=g.selectedItems();h&&h.length>0?(a=N.call(d,e.valueTemplate,h[0]),b=N.call(d,e.textTemplate,h[0]),c=I(e.inputTemplate)?N.call(d,e.inputTemplate,h[0]):b,f?(d.textElement.val(c),d.textElement.attr(ga,g.element.attr(ga))):d.textElement.html(c)):f?(d.textElement.val(""),d.textElement.removeAttr(ga)):d.textElement.html("&nbsp;")},_onDD:function(a){var b=this,c=b.textElement;b.options.editable?(c.focus(),ib(c)):b.element.focus(),b._open?b._hideDD():b._hasData()&&b._showDD()},_position:function(){var b=this,c=a(b.element),d=a(b.listBox.element),e=c.offset(),f=c.outerHeight();d.css({top:e.top+f,left:e.left,width:b.options.dropDownWidth||c.innerWidth()})},_showDD:function(){var b=this,c=b.listBox,d=a(c.element),e=b.options.animation;b._enabled&&(b._position(),e&&e.enabled?d.slideDown(e.openDelay,V(c.ensureActiveViewableINTERNAL,c)):(d.show(),c.ensureActiveViewableINTERNAL()),b._open=!0,a(b.element).attr(sa,Z))},_hideDD:function(){var b=this,c=a(b.listBox.element),d=b.options.animation;d&&d.enabled?c.slideUp(d.closeDelay):c.hide(),b._open=!1,a(b.element).attr(sa,$)},enabled:function(){var b,c=this,d=c.options.editable,e=a(c.element),f=c.textElement,g=c.ddElement,h=c._original,i=[].slice.call(arguments);return i.length>0?(b=!!i[0],b?(e.removeAttr(va).removeClass(d?"sui-combobox-disabled":"sui-dropdown-disabled"),f.removeAttr(va),g.removeAttr(va),h.removeAttr(va)):(c._open&&c._hideDD(),e.attr(va,va).addClass(d?"sui-combobox-disabled":"sui-dropdown-disabled"),f.attr(va,va),g.attr(va,va),h.attr(va,va)),c._enabled=b,void 0):c._enabled},selected:function(){var a,b=this,c=b.listBox,d=[].slice.call(arguments);return d.length>0?(a=d[0],c.clearSelection(),I(a)&&(a=K(a),a>-1?c.selected(a):b.options.editable||c.selected(0)),b._onLBSelChanged(),void 0):(a=c.selected(),a&&a.length>0?a[0]:-1)},selectedItem:function(){var a=this,b=a.listBox.selectedItems();return b&&b.length>0?b[0]:null},value:function(){var b,c=this,d=c.listBox,e=[].slice.call(arguments);return e.length>0?(d.clearSelection(),d.values(e[0]),c._onLBSelChanged(),void 0):(b=d.values(),b&&b.length>0?b[0]:c.options.editable?a(c.textElement).val():null)},text:function(){var b=this,c=b.listBox.texts();return c&&c.length>0?c[0]:b.options.editable?a(b.textElement).val():null},destroy:function(){var b=this,d=a(b.element),e=a(b.textElement),f=a(b.ddElement);b._destroyed||(b._destroyed=!0,b._dsLoaded=!1,e.off(b._eventNS),f.off(b._eventNS),b._onDDHandler=null,a(c).off(Qa+b._eventNS),d.off(b._eventNS),b.dataSource=null,b.listBox&&(b.listBox.dataSource.off(Na+b._eventNS),b.listBox.destroy(),b.listBox=null),a(b.listElement).remove(),e.remove(),f.remove(),b._original.unwrap().show(),b._original=null,C.fn.destroy.call(b))}}),p.defaults=o,b.ui.plugin("ComboBox",p),q=T({},o,{editable:!1,autoComplete:d}),r=p.extend({init:function(a,b){b&&(b.editable=!1,b.autoComplete=d),p.prototype.init.call(this,a,b)}}),r.defaults=q,b.ui.plugin("DropDown",r),s={enabled:!0,cls:d,toggle:!1,checked:!1,events:{}},t=C.extend({init:function(){C.fn.init.apply(this,arguments);var b=this,c=a(b.element),d=b.options,e=d.cls;b._eventNS=".shieldButton"+b.getInstanceId(),c.addClass("sui-button"),e&&c.addClass(e),c.on(Da+b._eventNS,V(b._click,b)),c.attr(Y,ba),b.enabled(d.enabled),d.toggle&&(b._checked=!!d.checked,b._checked?c.addClass("sui-button-checked"):c.removeClass("sui-button-checked"),c.attr(da+"-pressed",b._checked?Z:$))},_click:function(b){var c=this,d=a(c.element);c._enabled&&(c.options.toggle&&(c._checked=!c._checked,c._checked?d.addClass("sui-button-checked"):d.removeClass("sui-button-checked"),d.attr(da+"-pressed",c._checked?Z:$)),c.trigger(Da,b))},checked:function(){var b=this,c=a(b.element),d=[].slice.call(arguments);return d.length>0?void(b.options.toggle&&(b._checked=!!d[0],b._checked?c.addClass("sui-button-checked"):c.removeClass("sui-button-checked"),c.attr(da+"-pressed",b._checked?Z:$))):b._checked},enabled:function(){var b,c=this,d=a(c.element),e=[].slice.call(arguments);return e.length>0?(b=!!e[0],b?d.removeAttr(va).removeClass("sui-button-disabled").removeAttr(ma):d.attr(va,va).addClass("sui-button-disabled").attr(ma,Z),c._enabled=b,void 0):c._enabled},destroy:function(){var a=this,b=a.options.cls;a.element.off(Da+a._eventNS).removeClass("sui-button sui-button-checked sui-button-disabled"+(b?" "+b:"")),C.fn.destroy.call(a)}}),t.defaults=s,b.ui.plugin("Button",t),u=T({},s,{menu:d,dataSource:d,events:{}}),v=t.extend({init:function(){if(t.fn.init.apply(this,arguments),b.ui.ContextMenu){var c=this,d=a(c.element),e=c.options,f=e.menu,g=e.cls;c._handle=a('<button type="button"><span class="sui-caret-down"/></button>'),d.after(c._handle),c._handleButton=new t(c._handle,{cls:"sui-button-split-handle"+(g?" "+g:""),events:{click:function(b){if(c.menu.visible())c.menu.visible(!1);else{var e=a(d).offset();c.menu.visible(!0,{x:e.left,y:e.top+a(d).outerHeight()})}}}}),I(f)?c._menuElement=a(f):(c._menuElement=a("<ul/>"),c._customMenuElement=!0,c._handle.after(c._menuElement)),c._menuElement.attr(X)||c._menuElement.attr(X,O()),c.menu=new b.ui.ContextMenu(c._menuElement,{cls:"sui-button-split-menu",dataSource:e.dataSource,minWidth:d.outerWidth()+c._handle.outerWidth()-2,events:{click:V(c.trigger,c,"menuClick")}}),a(c._handle).attr(na,Z).attr(ra,c._menuElement.attr(X))}},enabled:function(){var a=this;return arguments&&arguments.length>0?(t.fn.enabled.apply(a,arguments),a._handleButton&&a._handleButton.enabled.apply(a._handleButton,arguments),a.menu&&!arguments[0]&&a.menu.visible(!1),void 0):t.fn.enabled.apply(a,arguments)},visible:function(){var a=this;return arguments&&arguments.length>0?(t.fn.visible.apply(a,arguments),a._handleButton&&a._handleButton.visible.apply(a._handleButton,arguments),a.menu&&!arguments[0]&&a.menu.visible(!1),void 0):t.fn.visible.apply(a,arguments)},destroy:function(){var b=this;b.menu&&(b.menu.destroy(),b.menu=d),b._menuElement&&(b._customMenuElement&&(a(b._menuElement).remove(),b._customMenuElement=d),b._menuElement=d),b._handleButton&&(b._handleButton.destroy(),b._handleButton=d),b._handle&&(a(b._handle).remove(),b._handle=d),t.fn.destroy.call(b)}}),v.defaults=u,b.ui.plugin("SplitButton",v),w={enabled:!0,enableThreeStates:!1,enableLabelClick:!0,checked:!1,label:"",events:{}},x=C.extend({init:function(){var b,c,d,e,f,g=this;C.fn.init.apply(this,arguments),g._eventNS=".shieldCheckBox"+g.getInstanceId(),b=g.options;var h=a(g.element).addClass("sui-checkbox-input");f=h.attr(X),f||h.attr(X,f=O()),d=h.attr(za),e=g.wrapper=h.wrap('<span class="sui-checkbox"/>').parent().attr(za,I(d)?d:0);var i=a('<span class="sui-checkbox-element sui-checkbox-unchecked"/>');if(i.appendTo(e),g.checkBoxElement=i,a('<span class="sui-checkmark"/>').appendTo(i),b.label?(c=a('<label class="sui-checkbox-label"/>'),c.appendTo(e),c.attr("for",f),c.get(0).innerHTML=b.label,b.enableLabelClick&&c.addClass("sui-checkbox-label-hover")):(c=h.parent().parent(),c&&!c.is("label")&&(c=a('label[for="'+f+'"]')),c&&b.enableLabelClick&&c.addClass("sui-checkbox-label-hover")),e.attr(Y,"checkbox"),c){var j=c.attr(X);j||c.attr(X,j=O()),e.attr(qa,j)}h.attr(wa)&&(b.checked=!0),g.enabled(b.enabled),g.checked(b.checked),e.on(Da+g._eventNS,V(g._click,g)).on(Ea+g._eventNS,V(g._keydown,g)),c&&b.enableLabelClick&&c.on(Da+g._eventNS,V(g._click,g)).on(Ea+g._eventNS,V(g._keydown,g)),e.onselectstart=function(){return!1},e.onmousedown=function(){return!1}},_click:function(b){var c=this;a(c.element);c._enabled&&(c._checked?c.options.enableThreeStates?c._checked=null:c._checked=!1:c._checked===!1?c._checked=!0:null===c._checked&&(c._checked=!1),c.checked(c._checked),c.trigger(Da,b),b.preventDefault(),b.stopPropagation())},_keydown:function(a){a.keyCode==E.SPACE&&this._click(a)},hide:function(){a(this.wrapper).hide()},show:function(){a(this.wrapper).show()},isVisible:function(){return a(this.wrapper).is(":visible")},checked:function(){var b,c=this,d=[].slice.call(arguments),e=a(c.element),f=c.wrapper,g=f.find(".sui-checkmark");return d.length>0?(c._checked=b=d[0],void(b?(f.find(".sui-checkbox-element").removeClass("sui-checkbox-unchecked sui-checkbox-indeterminate").addClass("sui-checkbox-checked"),f.attr(oa,Z),e.attr(wa,wa),e.data("1"),M.ie&&M.version<=8&&g.css("filter","progid:DXImageTransform.Microsoft.Matrix(SizingMethod='auto expand', M11=0.7071067811865476, M12=0.7071067811865475, M21=-0.7071067811865475, M22=0.7071067811865476)")):b===!1?(f.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-indeterminate").addClass("sui-checkbox-unchecked"),f.attr(oa,$),e.removeAttr(wa),e.data("0"),g.css("filter","")):null===b&&c.options.enableThreeStates&&(f.find(".sui-checkbox-element").removeClass("sui-checkbox-checked sui-checkbox-unchecked").addClass("sui-checkbox-indeterminate"),f.attr(oa,"mixed"),e.removeAttr(wa),e.data("2"),g.css("filter","")))):c._checked},enabled:function(){var b=this,c=[].slice.call(arguments),d=a(b.element);if(!(c.length>0))return b._enabled;var e=!!c[0];e?(b.wrapper.removeAttr(va).removeClass("sui-checkbox-disabled"),d.removeAttr(va)):(b.wrapper.attr(va,va).addClass("sui-checkbox-disabled"),d.attr(va,va)),b._enabled=e},destroy:function(){var a=this;a.element.removeClass("sui-checkbox-input").removeAttr(za),a.checkBoxElement&&a.checkBoxElement.off(a._eventNS),a.wrapper&&(a.wrapper.find(".sui-checkbox-label").off(a._eventNS).end().removeAttr(va).removeClass("sui-checkbox-disabled").replaceWith(a.element),a.wrapper=null),C.fn.destroy.call(a)}}),x.defaults=w,b.ui.plugin("CheckBox",x),y={enabled:!0,enableLabelClick:!0,checked:!1,label:"",events:{}},z=C.extend({init:function(){C.fn.init.apply(this,arguments);var b,c,d,e,f=this,g=a(f.element),h=f.options;f._eventNS=".shieldRadioButton"+f.getInstanceId(),g.addClass("sui-radiobutton-input"),e=g.attr(X),e||g.attr(X,e=O()),c=g.attr(za),d=f.wrapper=g.wrap('<span class="sui-radiobutton"/>').parent(),d.attr(za,I(c)?c:0);var i=a('<span class="sui-radiobutton-element"/>');if(i.appendTo(d),f.radioButtonElement=i,a('<span class="sui-checkmark"/>').appendTo(i),h.label?(b=a('<label class="sui-radiobutton-label"/>'),b.appendTo(d),b.attr("for",e),b.get(0).innerHTML=h.label,h.enableLabelClick&&b.addClass("sui-radiobutton-label-hover")):(b=g.parent().parent(),b&&!b.is("label")&&(b=a('label[for="'+e+'"]')),b&&h.enableLabelClick&&b.addClass("sui-radiobutton-label-hover")),d.attr(Y,"radio"),b){var j=b.attr(X);j||b.attr(X,j=O()),d.attr(qa,j)}g.attr(wa)&&(h.checked=!0),f.enabled(h.enabled),h.checked?f.checked(h.checked):f._checked=!1,d.on(Da+f._eventNS,V(f._click,f)).on(Ea+f._eventNS,V(f._keydown,f)),b&&h.enableLabelClick&&b.on(Da+f._eventNS,V(f._click,f)).on(Ea+f._eventNS,V(f._keydown,f)),d.onselectstart=function(){return!1},d.onmousedown=function(){return!1}},_click:function(a){var b=this;b._enabled&&(b.checked(!0),b.trigger(Da,a),a.preventDefault(),a.stopPropagation())},_keydown:function(a){a.keyCode==E.SPACE&&this._click(a)},hide:function(){a(this.wrapper).hide()},show:function(){a(this.wrapper).show()},isVisible:function(){return a(this.wrapper).is(":visible")},checked:function(){var a=this,b=[].slice.call(arguments);return b.length>0?(a._uncheckAllFromSameGroup(),void a._checkInternal(b[0])):a._checked},_checkInternal:function(b){var c=this,d=a(c.element),e=c.wrapper;c._checked=b,b?(e.find(".sui-radiobutton-element").removeClass("sui-radiobutton-unchecked sui-radiobutton-indeterminate").addClass("sui-radiobutton-checked"),e.attr(oa,Z),d.attr(wa,wa)):(e.find(".sui-radiobutton-element").removeClass("sui-radiobutton-checked"),e.attr(oa,$),d.removeAttr(wa))},_uncheckAllFromSameGroup:function(){var b=this,c=a(b.element);a('input[type="radio"][name="'+c.attr("name")+'"]').not(c).each(function(){var b=a(this).swidget();b&&(b._checkInternal(!1),b.trigger(Na))})},enabled:function(){var b=this,c=[].slice.call(arguments),d=a(b.element);if(!(c.length>0))return b._enabled;var e=!!c[0];e?(b.wrapper.removeAttr(va).removeClass("sui-radiobutton-disabled"),d.removeAttr(va)):(b.wrapper.attr(va,va).addClass("sui-radiobutton-disabled"),d.attr(va,va)),b._enabled=e},destroy:function(){var a=this;a.element.removeClass("sui-radiobutton-input").removeAttr(za),a.radioButtonElement&&(a.radioButtonElement.off(a._eventNS),a.radioButtonElement=null),a.wrapper&&(a.label&&(a.label.off(a._eventNS),a.label=null),a.wrapper.removeAttr(va).removeClass("sui-radiobutton-disabled"),a.wrapper.replaceWith(a.element),a.wrapper=null),C.fn.destroy.call(a)}}),z.defaults=y,b.ui.plugin("RadioButton",z),A={cls:d,enabled:!0,checked:d,onText:d,offText:d,events:{}},B=C.extend({init:function(){C.fn.init.apply(this,arguments);var b,c,d,e,f,g=this,h=g.options,i=h.dieOnError,j=h.cls,k=h.checked;return g._original=b=a(g.element),gb(b)!==db||"checkbox"!==b.attr("type")?void F("shieldSwitch: Underlying element must ne an input of type checkbox.",i):(g._eventNS=".shieldSwitch"+g.getInstanceId(),g.element=d=b.wrap('<div class="sui-switch sui-unselectable'+(j?" "+j:"")+'" />').parent(),f=a('<div class="sui-switch-inner sui-unselectable" />').appendTo(d),g._text=a('<span class="sui-switch-text sui-unselectable" />').appendTo(f),g._handle=e=a('<div class="sui-switch-handle sui-unselectable" />').appendTo(d),e.height(d.height()),b.hide(),c=b.attr(za),d.attr(za,I(c)?c:"0"),d.on(Da+g._eventNS,V(g._click,g)).on(Ea+g._eventNS,V(g._keydown,g)),k=I(k)?!!k:!!b.attr(wa),d.attr(Y,ca),g.checked(k,!1),void g.enabled(h.enabled))},refresh:function(a){this.refreshWithElement(this._original,a)},_keydown:function(a){var b=this;a.keyCode===E.SPACE&&(b._click(a),a.preventDefault())},_click:function(a){var b=this;b._enabled&&(b.checked(!b._checked),b.trigger(Da,a),a.preventDefault(),a.stopPropagation())},checked:function(){var b,c,d=this,e=d.options,f=e.onText,g=e.offText,h=a(d.element),i=a(d._handle),j=a(d._text),k=d._original,l=[].slice.call(arguments),m=100;return l.length>0?(b=!!l[0],c=!I(l[1])||!!l[1],c||(m=0),b?(k.attr(wa,wa),i.animate({left:h.width()-i.width()-2},m,function(){h.addClass("sui-switch-checked").attr(oa,Z),I(f)&&(j.html(f),h.attr(pa,hb(f)))})):(k.removeAttr(wa),i.animate({left:-2},m,function(){h.removeClass("sui-switch-checked").attr(oa,$),I(g)&&(j.html(g),h.attr(pa,hb(g)))})),d._checked=b,void 0):d._checked},enabled:function(){var b,c=this,d=a(c.element),e=c._original,f=[].slice.call(arguments);return f.length>0?(b=!!f[0],b?(d.removeAttr(va).removeClass("sui-switch-disabled"),e.removeAttr(va)):(d.attr(va,va).addClass("sui-switch-disabled"),e.attr(va,va)),c._enabled=b,void 0):c._enabled},destroy:function(){var b=this;a(b.element).off(b._eventNS),a(b._inner).remove(),a(b._handle).remove(),b._original.unwrap().show(),b._original=b._inner=b._handle=null,C.fn.destroy.call(b)}}),B.defaults=A,b.ui.plugin("Switch",B)}(jQuery,shield,this);
!function(a,b,c,d){function e(a){var b,c=" ";if(a){if(w(a))return a;for(b in a)a.hasOwnProperty(b)&&(c+=b+'="'+a[b]+'"')}return c}function f(b,c){var d=a(b).attr(c);return z(d)&&d!==!1}function g(){var b,c,d,e,f=[].slice.call(arguments),g=f.shift();for(e=0;e<f.length&&(b=a(g.target).closest(".sui-cell",f[e]),!b.length);e++);return b.length?(c=b[0].parentNode,d=b[0],null==c||null==d?null:{row:c,cell:d}):null}function h(b){return b&&(a(b.row).hasClass(ba)||a(b.cell).hasClass(ba))}function i(b,c){return a(b.target).closest(".sui-cell",c).length>0}function j(b){var c=a(b).find('.sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex]:not([tabindex="-1"]), *[contenteditable]').filter(":visible").first();a(c).length>0&&a(c).focus()}var k,l=b.ui.Widget,m=b.Class,n=b.DataSource,o=b.format,p=b.support,q=b.exp,r=b.get,s=b.iid,t=(b.strid,b.Constants.KeyCode),u=b.is,v=u.func,w=u.string,x=u.object,y=u["boolean"],z=u.defined,A=u.number,B=u.undefined,C=u["null"],D=b.to["int"],E=document,F=Math.abs,G=Math.min,H=Math.max,I=a.each,J=a.proxy,K=a.extend,L=a.map,M=a.grep,N=a.inArray,O=navigator.userAgent,P=c.opera,Q=/msie/i.test(O)&&!P,R=Q&&7===E.documentMode,S=Q&&8===E.documentMode,T=(Q&&10===E.documentMode,8===E.documentMode,/AppleWebKit/.test(O)),U=(/Firefox/.test(O),"role"),V="aria-sort",W="aria-readonly",X="ascending",Y="descending",Z="tabindex",$="true",_="height",aa="sui-selectable",ba="sui-selected",ca="change",da="focus",ea="blur",fa="start",ga="scroll",ha="command",ia="selectionChanging",ja="selectionChanged",ka="selectstart",la="dataBound",ma="virtualRowsLoaded",na="keydown",oa="mousedown",pa="mousemove",qa="mouseup",ra="resize",sa="click",ta="dblclick",ua="sort",va="detailCreated",wa="columnReorder",xa="columnResize",ya="groupsReorder",za="group",Aa="ungroup",Ba="editorCreating",Ca="filterWidgetCreating",Da="getCustomFilterValue",Ea="clearFilter",Fa="expandButtonCreate",Ga="cancel",Ha="edit",Ia="insert",Ja="save",Ka="delete",La="error",Ma="collapse",Na="expand",Oa="editWindowOpen",Pa="insertWindowOpen",Qa="display",Ra="none",Sa="sui-viewindex",Ta="sui-fieldname";k={columns:[],rowHover:!0,scrolling:!1,paging:!1,columnReorder:!1,showHeader:!0,grouping:{showGroupHeader:!1,allowDragToGroup:!1,message:"Drag a column header here to group by a column"}};var Ua=m.extend({init:function(b,c){var d,e,f,g,h,i=this;for(i._grid=c,h=0;h<b.length;h++)d=b[h],e=d.position?d.position:"top",f=a('<div class="sui-toolbar"/>'),"top"===e?(g=c.element.find(".sui-toolbar"),g.length>0?a(g[0]).after(f):c.element.prepend(f)):(f.addClass("sui-toolbar-bottom"),f.appendTo(c.element)),d.template?i._initializeTemplate(d,f):d.buttons.length>0&&i._buildButtons(f,d)},_buildButtons:function(a,b){var c,d=this,e=b.buttons;for(c=0;c<e.length;c++)d._buildButton(e[c],a)},_buildButton:function(c,d){var e,f,g=this,h=c.commandName,i=c.click;b.ui.Button&&(e=a('<button type="button">'+c.caption+"</button>").appendTo(d),"insert"==h?i=g._insertButtonClicked:"save"==h?i=g._saveButtonClicked:"cancel"==h?i=g._cancelButtonClicked:"excel"==h?i=g._excelButtonClicked:"pdf"==h&&(i=g._pdfButtonClicked),f=new b.ui.Button(e,{cls:c.cls,events:{click:J(i,g._grid)}}))},_excelButtonClicked:function(){this._doExcelExport()},_pdfButtonClicked:function(){this._doPdfExport()},_insertButtonClicked:function(a,b){var c,d,e,f,g,h=this,i=h.options,j=i.editing.insertNewRowAt,k=h.dataSource;h._hasVirtualScrolling();if(b||(f=h.trigger(ha,{commandName:Ia,cancel:!1}),!f.cancel)){if(k.sort&&k.sort.length>0)return k.sort=[],h._sortingInProgress=!0,h.pager&&(k.skip=0,k.take=h.pager.pageSize(),h.pager.refresh(!0)),void k.read().always(J(h._toolbar._insertButtonClicked,h,a,!0));h._editingInProcess=!0,e="pagebottom"===j?H(0,h.contentTable.find(">tbody > tr").length-1):0,c=k.insertView(e,{});for(g in c.fields)c.fields.hasOwnProperty(g)&&(c.data[g]=null);h._editing._insertedItems.push(c),d=h.contentTable.find(">tbody > tr").eq(e),"popup"!=h.options.editing.mode?h._editing._putRowInEditMode(d,0):h._initializePopupForm(0,!0),h.trigger(Ia)}},_saveButtonClicked:function(a){var b,c,d=this,e=d.contentTable.find(">tbody > tr > .sui-editable-cell");return e.length>0&&(b=e.get(0).parentNode.rowIndex,d._updateItem(b,null),d._errorDuringEdit)?void(d._errorDuringEdit=!1):(c=d.trigger(ha,{commandName:Ja,cancel:!1}),void(c.cancel||(d.dataSource.save(),d.trigger(Ja))))},_cancelButtonClicked:function(a){var b=this,c=b.trigger(ha,{commandName:Ga,cancel:!1});c.cancel||(b.dataSource.cancel(),b.trigger(Ga))},_initializeTemplate:function(a,b){var c=this,d=a.template;if(v(d)){var e=d.call(c._grid,b);z(e)&&!C(e)&&""!==e&&b.html(e)}else b.html(d)},destroy:function(){}}),Va=m.extend({init:function(a,b){var c=this;c._grid=b,c.options=a,c._eventNS=".shieldGridEditing"+s(),c._editors={},c._insertedItems=[],a.enabled&&c._initEditing(),c._grid.dataSource.on(La+c._eventNS,J(c._dsError,c))},_dsError:function(a){var b=this,c=b._editors[a.path];b._grid.trigger(La,{type:a.type,path:a.path,value:a.value,editor:c,reason:a.reason}),b._errorDuringEdit=!0},_initEditing:function(){var b=this,c=b.options,d=c.event,e=b._eventNS;B(d)||("click"===d?b._grid.element.on(sa+e,".sui-cell",J(b._editingTriggered,b)):"doubleclick"===d&&b._grid.element.on(ta+e,".sui-cell",J(b._editingTriggered,b)),a(E).on(sa+e,J(b._documentClicked,b)))},_editingTriggered:function(c){var d,e,f=this,g=c.target,h=a(c.target).parent(),i=h.get(0).rowIndex,j=f.options,k=j.mode,l=j.type,m=f._grid.dataSource,n=j.batch,o=f._grid.trigger(ha,{commandName:Ha,cancel:!1,row:h,cell:g,index:f._grid._getRowIndex(h)});if(!o.cancel){if(n){if(d=f._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),d.length>0){if(i=d.get(0).parentNode.rowIndex,"TR"!==h.get(0).nodeName.toUpperCase()||h.get(0).rowIndex==i&&"row"==l)return;var p=f._grid._updateItem(i,g);if(f._errorDuringEdit)return f._errorDuringEdit=!1,void(p=null);e=h.get(0).rowIndex,f._grid._putRowInViewMode(i,null),!f._grid._populateInsertedItem&&p&&p.length>0&&f._grid._renderUpdateMarkers(p,i),f._grid._populateInsertedItem=!1,e===i&&(g=f._grid.contentTable.find(">tbody > tr").eq(i).get(0).cells[g.cellIndex]),i=e}B(l)||"cell"===l?f._putCellInEditMode(g,i):"row"===l?f._putRowInEditMode(h,g.cellIndex):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",j.dieOnError)}else if(m.tracker&&m.tracker.changes&&m.tracker.changes.added&&m.tracker.changes.added.length>0)"TR"!==h.get(0).nodeName.toUpperCase()||h.get(0).rowIndex==i&&"row"==l||m.cancel();else if(B(k)||"inline"===k){if(d=f._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),d.length>0){if(i=d.get(0).parentNode.rowIndex,"TR"!==h.get(0).nodeName.toUpperCase()||h.get(0).rowIndex==i&&"row"==l)return;if(f._grid._updateItem(i,g),f._errorDuringEdit)return void(f._errorDuringEdit=!1);e=h.get(0).rowIndex,f._grid._closeAllEditedRows(),e===i&&(g=f._grid.contentTable.find(">tbody > tr").eq(i).get(0).cells[g.cellIndex]),i=e}B(l)||"cell"===l?f._putCellInEditMode(g,i):"row"===l?f._putRowInEditMode(h,g.cellIndex):b.error("Invalid editing.type declaration. The editing.type must be 'row' or 'cell'.",j.dieOnError)}f._grid.trigger(Ha,{row:h,cell:g,index:f._grid._getRowIndex(h)})}},_documentClicked:function(b){var c,d,e=this,f=e.options.batch,g=a(b.target);if(e._grid._editingInProcess||e._grid._preventClosingEditors)return void(e._grid._editingInProcess=!1);if(!(g.hasClass("sui-cell")||g.parents().hasClass("sui-cell")||g.parents().hasClass("sui-calendar")||g.parents().hasClass("sui-listbox"))&&(c=e._grid.contentTable.find(">tbody > tr > .sui-editable-cell"),c.length>0)){d=c.get(0).parentNode.rowIndex;var h=e._grid._updateItem(d,null);if(e._errorDuringEdit)return void(e._errorDuringEdit=!1);e._grid._putRowInViewMode(d,null),f&&!e._grid._populateInsertedItem&&h&&h.length>0&&e._grid._renderUpdateMarkers(h,d),e._grid._populateInsertedItem=!1}},_getColumnIndex:function(b){return b.cellIndex-a(b.parentNode).find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length},_putCellInEditMode:function(a,b){var c,d,e,f=this,g=f._getColumnIndex(a),h=f._grid,i=h.dataSource,k=h.columns[g],l=!1;if(k&&k.field&&k.editable!==!1){if(i.group&&i.group.length>0)for(d=f._grid.contentTable.find(">tbody > tr > .sui-row, >tbody > tr > .sui-alt-row"),e=0;e<d.length;e++)if(d[e]==a.parentNode){b=e;break}if(c=i.editView(b).data,arguments.length>2?arguments[2]==g&&(l=!0):l=!0,k.editor)f._instantiateCustomEditor(k,a,c,b,l);else{var m=z(i.schema.options.fields)?i.schema.options.fields[k.field].type:String,n=r(c,k.field);switch(m){case Number:f._instantiateNumeric(a,n,l);break;case Date:f._instantiateDatePicker(a,n,l);break;case String:f._instantiateTextBox(a,n,l);break;case Boolean:f._instantiateCheckBox(a,n,l)}}j(a)}},_prepareCell:function(b){a(b).empty().addClass("sui-editable-cell")},_instantiateCustomEditor:function(b,c,d,e,f,g){var h,i,j,k=this;g?i=g:(h=k._getColumnIndex(c),i=k._grid.columns[h].field,k._prepareCell(c)),j=b.editor.call(k._grid,c,d,e,f),a(c).html(j),k._editors[i]="custom"},_instantiateNumeric:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Ba,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.NumericTextBox&&(g=new b.ui.NumericTextBox(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateDatePicker:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Ba,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.DatePicker&&(g=new b.ui.DatePicker(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateTextBox:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input type="text" name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Ba,{field:j,options:{}}),m=K({},l.options,{value:d,cls:"sui-input-textbox"});b.ui.TextBox&&(g=new b.ui.TextBox(h,m),e&&g.focus(),k._editors[j]=g)},_instantiateCheckBox:function(c,d,e,f){var g,h,i,j,k=this;f?j=f:(i=k._getColumnIndex(c),j=k._grid.columns[i].field,k._prepareCell(c)),h=a('<input type="checkbox" name="'+j+'"/>'),h.appendTo(c);var l=k._grid.trigger(Ba,{field:j,options:{}}),m=K({},l.options,{value:d});b.ui.CheckBox&&(g=new b.ui.CheckBox(h,m),e&&g.focus(),g.checked(d),k._editors[j]=g)},_putRowInEditMode:function(b,c){var d,e,f=this,g=b.find(".sui-cell");for(e=0;e<g.length;e++)f._putCellInEditMode(g[e],b.get(0).rowIndex,c-b.find(".sui-indent-cell, .sui-expand-cell, .sui-expand-cell-disabled, .sui-collapse-cell").length);j(b),d=b.find(".sui-edit"),d.length>0&&f._grid._changeEditColumnButtons(b.get(0).rowIndex,a(b.children(".sui-button-cell")[0]))},_destroyRow:function(a){var b,c,d=this,e=d._grid,f=e.contentTable.find(">tbody > tr").eq(a),g=e.columns;for(b=0;b<g.length;b++)c=d._editors[g[b].field],c&&(v(c.destroy)&&d._editors[g[b].field].destroy(),delete d._editors[g[b].field]);f.remove()},destroy:function(){var b,c,d=this,e=d._eventNS;if(d._grid.dataSource.off(La+e),d._grid.element.off(e,".sui-cell"),a(E).off(sa+e),d._editors)for(b=0;b<d._editors.length;b++)c=d._editors[b].editor.element(),d._editors[b].editor.destroy(),c.remove();d._errorDuringEdit=d.options=null}}),Wa=m.extend({init:function(a){var b=this;w(a)?(b.field=a,b.resizable=!0,b.sortable=!0,b.filterable=!0,b.editable=!0,b.visible=!0,b.locked=!1):x(a)&&(b.field=a.field,b.title=a.title,b.format=a.format,b.width=a.width,b.minWidth=a.minWidth,b.maxWidth=a.maxWidth,b.resizable=!z(a.resizable)||!!a.resizable,b.attributes=a.attributes,b.headerAttributes=a.headerAttributes,b.headerTemplate=a.headerTemplate,b.columnTemplate=a.columnTemplate,b.footerTemplate=a.footerTemplate,b.groupFooterTemplate=a.groupFooterTemplate,b.buttons=a.buttons,b.editor=a.editor,b.customFilter=a.customFilter,b.sortable=!z(a.sortable)||!!a.sortable,b.filterable=!z(a.filterable)||!!a.filterable,b.editable=!z(a.editable)||!!a.editable,b.visible=!z(a.visible)||!!a.visible,b.locked=!!b.visible&&!!a.locked)},destroy:function(){var a=this;a.buttons&&(a.buttons.length=0),a.field=a.title=a.editor=a.editable=a.format=a.width=a.minWidth=a.maxWidth=a.resizable=a.attributes=a.headerAttributes=a.headerTemplate=a.buttons=a.customFilter=a.footerTemplate=a.groupFooterTemplate=a.sortable=a.filterable=a.visible=a.locked=a.columnTemplate=null}}),Xa=m.extend({options:{ns:".shieldGridColumnResizing",width:12,offset:6,min:12},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},Xa.fn.options),b._eventNS=b.options.ns+s(),a.headerTable.on(pa+b._eventNS,".sui-headercell",J(b._showHandle,b))},_showHandle:function(b){if(!this.resizing){var c=this,d=c.options,e=(c.grid,c.handle),f=b.pageX,g=c.params=c._params(a(b.currentTarget)),h=f>=g.offset.left&&f<=g.offset.left+d.offset&&g.headerIndex>0;g.isRtl&&(h=f>=g.offset.left+g.width-d.offset&&f<=g.offset.left+g.width&&g.headerIndex>0),h&&(g=c.params=c._params(g.header.prev())),g.column&&g.column.resizable&&!g.column.locked&&(f>=g.threshold&&f<=g.edge+d.offset?(e||(e=c.handle=a('<div class="sui-resizable-handle"/>').on(oa+c._eventNS,J(c._down,c)).appendTo(g.header.parents(".sui-headercontent"))),e.css({top:g.position.top,left:e.parent()[0].scrollLeft+g.handleLeft,width:d.width,height:g.height}).show()):e&&e.hide())}},_params:function(a){var b=this,c=b.options,d=a.offset(),e=a.position(),f=p.isRtl(b.grid.element),g=a.outerWidth(),h=d.left+(f?c.width:g),i=a.index(),j=b.grid._getColumnByField(a.attr("data-field")),k=j?j.minWidth>=0?+j.minWidth:c.min:null,l=j&&j.maxWidth>=k?+j.maxWidth:null;return{header:a,headerIndex:i,column:j,min:k,max:l,offset:d,isRtl:f,width:g,current:g,height:a.outerHeight(),edge:h,threshold:h-c.width+(f?-1:1)*c.offset,position:e,handleLeft:e.left+(f?c.width:g)-c.width+(f?-1:1)*c.offset}},_down:function(c){var d,e=this,f=e.grid,g=e.params;if(!(c.button>1)&&g)return d="> colgroup col:nth-child("+(g.headerIndex+1)+")",g.origin=c.pageX,g.cols=a().add(f.headerTable.find(d)).add(f.contentTable.find(d)),e.resizing=!0,e._cancelled=null,e.handle.hide(),a(E).on(pa+e._eventNS,J(e._move,e)).on(qa+e._eventNS,J(e._up,e)),b.selection(!1),!1},_move:function(a){var b,c,d,e=this,f=e.params;if(e.resizing)return b=(f.isRtl?-1:1)*(a.pageX-f.origin),c=H(f.width+b,f.min),f.max&&(c=G(c,f.max)),d=e.grid.trigger(ha,{commandName:xa,cancel:!1,field:f.column.field,width:c}),d&&d.cancel?void(e._cancelled=!0):void(c!==f.current&&(f.cols.width(f.current=c),e.grid._fixHeaderPadding(),e.grid._adjustHeightsLocked(!0)))},_up:function(){var c=this,d=c.grid,e=c.params,f=e.current,g=e.column||{},h=(d.options.columns||[])[a(d.columns).index(g)]||{};c.resizing=!1,c.params=null,g.width=h.width=f+"px",a(E).off(c._eventNS),b.selection(!0),c._cancelled!==!0&&d.trigger(xa,{field:g.field,width:f}),c._cancelled=null},destroy:function(){var a=this;a.grid.headerTable.off(a._eventNS),a._cancelled=null,a.handle&&(a.handle.off(a._eventNS).remove(),a.handle=null)}}),Ya=m.extend({init:function(a){var b=this;b.grid=a,b._filters={},b._eventNS=".shieldGridFiltering"+s(),b._createFilterRow()},_createFilterRow:function(){var b,c,d,e,f,g,h=this,i=h.grid,j=i.headerTable,k=j.find(">thead"),l=k.find(".sui-indent-cell").length,m=i.dataSource.schema,n=i.columns;for(h._tr=b=a('<tr class="sui-filter-row"/>'),g=0;g<l;g++)a('<th class="sui-indent-cell"/>').appendTo(b);for(m&&m.options.fields&&(f=m.options.fields),g=0;g<n.length;g++)c=f&&f[n[g].field]?f[n[g].field].type:null,d=n[g].field?n[g].field.replace(/[\"\']/g,"@"):"",e=a('<th class="sui-filter-cell" data-field="'+d+'" role="gridcell" tabindex="-1"/>').appendTo(b),n[g].filterable!==!1&&d.length>0&&(h._initializeEditor(e,c,n[g].field,n[g]),h._appendFilterButton(e));for(b.appendTo(k),a(E).on(sa+h._eventNS,J(h._documentClicked,h)),g=0;g<n.length;g++)if(d=n[g].field?n[g].field.replace(/[\"\']/g,"@"):"",n[g].filterable!==!1&&d.length>0){var o=h._getFilter(n[g].field);o&&(h._setEditorValue(n[g].field,n[g],o.value),h._addRemoveFilterButton(n[g].field))}},_documentClicked:function(b){var c,d,e=this;if(e.listBox&&!a(b.target).hasClass("sui-filter-button")&&!a(b.target).hasClass("sui-filter-button-content")){var f=e.listBox.element.parent();if(f.css(Qa)==Ra)return;e._filterByField=null,c=f.height(),d=f.offset().top,e._slideUp?f.animate({height:0,top:d+c},150,function(){f.css({display:Ra,height:c})}):f.animate({height:0},150,function(){f.css({display:Ra,height:c})})}},_appendFilterButton:function(c){if(b.ui.Button){var d=a('<button type="button"><span class="sui-sprite sui-filter-button-content"/></button>').appendTo(c);new b.ui.Button(d,{cls:"sui-filter-button",events:{click:J(this._filterButtonClicked,this)}})}},_filterButtonClicked:function(c){var d,e,f,g=this,h=g.grid,i=h.dataSource.schema,j=h.options.filtering,k=j.stringFunc?j.stringFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"con",name:"Contains"},{func:"notcon",name:"Not contains"},{func:"starts",name:"Starts with"},{func:"ends",name:"Ends with"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],l=j.nonStingFunc?j.nonStingFunc:[{func:"eq",name:"Equal to"},{func:"neq",name:"Not equal to"},{func:"gt",name:"Greater than"},{func:"lt",name:"Less than"},{func:"gte",name:"Greater than or equal"},{func:"lte",name:"Less than or equal"},{func:"isnull",name:"Is null"},{func:"notnull",name:"Is not null"}],m=c.target.element.parent().attr("data-field").replace(/[@]/g,"'");if(g._filterByField=m,i&&i.options.fields){var n=i.options.fields;d=n&&n[m]&&n[m].type===String?k:l}else d=k;b.ui.ListBox&&(g.listBox||(g._menuWrapper=a('<div style="display:none;"/>').appendTo(E.body),g.listBox=new b.ui.ListBox(g._menuWrapper,K({},{},{dataSource:{data:d},textTemplate:"{name}",valueTemplate:"{func}",multiple:!1,width:150,maxHeight:300,events:{select:J(g._selectFilterFunction,g)}})),g.grid.element.parent().hasClass("sui-rtl")?g.listBox.element.parent().addClass("sui-rtl"):g.listBox.element.parent().css(Qa,Ra)),e=g.listBox.element.parent().height(),g._positionListBox(c),g._slideUp?(f=c.target.element.offset().top-e,g.listBox.element.parent().css({top:c.target.element.offset().top}),g.listBox.element.parent().animate({height:e,top:f-g.listBox.element.parent().innerHeight()},150)):g.listBox.element.parent().animate({height:e},150)),g._selectFilterMenuValue(m)},_getFilter:function(a){var b,c,d,e=this,f=e.grid.dataSource.filter;if(f&&f.and&&f.and.length>0)for(b=f.and,d=0;d<b.length;d++)b[d].path===a&&(c=b[d]);return c},_selectFilterMenuValue:function(a){var b=this,c=b._getFilter(a),e=c?c.filter:d;e?b.listBox.values(e):b.listBox.clearSelection()},_selectFilterFunction:function(a){var b,c,d=this,e=!0,f="@@custom"==d._filters[d._filterByField]?"@@custom":d._filters[d._filterByField].value(),g=a.item.func,h={path:d._filterByField,filter:g,value:f};if("@@custom"==f&&(c=d.grid.trigger(Da,{field:d._filterByField,value:null}),f=c.value,h={path:d._filterByField,filter:g,value:f}),""!==f&&null!==f||"notnull"==g||"isnull"==g){if(d.grid.dataSource.filter&&d.grid.dataSource.filter.and){b=d.grid.dataSource.filter.and;for(var i=0;i<b.length;i++)b[i].path===d._filterByField&&(b[i]=h,e=!1);e&&b.push(h)}else d.grid.dataSource.filter={and:[h]};d.grid.dataSource.read(),d._addRemoveFilterButton(d._filterByField)}},_addRemoveFilterButton:function(c){var d,e,f,g=this;if(b.ui.Button){d=g._tr.children("th");for(var h=0;h<d.length;h++)if(e=a(d[h]),e.attr("data-field")&&e.attr("data-field").replace(/[@]/g,"'")==c){f=d[h];break}if(0===e.find(".sui-clear-filter-button").length){var i=a('<button type="button"><span class="sui-sprite sui-clear-filter-button-content"></span></button>').appendTo(f);new b.ui.Button(i,{cls:"sui-clear-filter-button",events:{click:J(this._clearFilterButtonClicked,this)}})}}},_clearFilterButtonClicked:function(a){var b,c,d=this,e=a.target.element.parent().attr("data-field").replace(/[@]/g,"'"),f=d.grid.dataSource.filter.and;for(c=0;c<f.length;c++)f[c].path==e&&f.splice(c,1);b=a.target.element,a.target.destroy(),b.remove(),"@@custom"!=d._filters[e]?d._filters[e].value(null):d.grid.trigger(Ea,{field:e,value:null}),d.grid.dataSource.read()},_positionListBox:function(a){var b=this,d=a.target.element,e=d.offset(),f=e.top,g=e.left,h=b.listBox.element.parent().innerWidth(),i=b.listBox.element.parent().innerHeight(),j=(d.innerWidth(),d.innerHeight());g<0&&(g=1),g+h>c.innerWidth&&(g=c.innerWidth-h-20),b._slideUp=!1,f+i>c.innerHeight&&(f-=i,j=0,b._slideUp=!0),f<0&&(f=e.top,j=d.innerHeight(),b._slideUp=!1),b.listBox.element.parent().css({position:"absolute",zIndex:10002,top:f+j,left:g,height:0,display:""})},_setEditorValue:function(a,b,c){var d,e=this;b.customFilter||(d=e._filters[a],d&&d.value(c))},_initializeEditor:function(a,b,c,d){var e=this;if(d.customFilter)e._filters[c]="@@custom",d.customFilter.call(e,a);else switch(b){case Number:e._instantiateNumeric(a,c);break;case Date:e._instantiateDatePicker(a,c);break;case String:e._instantiateTextBox(a,c);break;default:e._instantiateTextBox(a,c)}},_instantiateNumeric:function(c,d){var e,f=this,g=a("<input/>").appendTo(c),h=f.grid.trigger(Ca,{field:d,options:{}}),i=K({},h.options);b.ui.NumericTextBox&&(e=new b.ui.NumericTextBox(g,i),f._filters[d]=e)},_instantiateDatePicker:function(c,d){var e,f=this,g=a("<input/>").appendTo(c),h=f.grid.trigger(Ca,{field:d,options:{}}),i=K({},h.options);b.ui.DatePicker&&(e=new b.ui.DatePicker(g,i),f._filters[d]=e)},_instantiateTextBox:function(c,d){var e,f=this,g=a('<input type="text"/>').appendTo(c),h=f.grid.trigger(Ca,{field:d,options:{}}),i=K({},h.options);b.ui.TextBox&&(e=new b.ui.TextBox(g,i),f._filters[d]=e)},destroy:function(){var b,c=this;for(b in c._filters)c._filters.hasOwnProperty(b)&&(c._filters[b].destroy(),c._filters[b]=null);c.listBox&&(c.listBox.destroy(),c.listBox=null),a(c._menuWrapper).remove(),a(c._tr).remove(),a(E).off(sa+c._eventNS),c._filterByField=c._filters=c._slideUp=c._menuWrapper=c._tr=null}}),Za=m.extend({init:function(a,b){var c=this;c.grid=b,c.sortExpressions=[],c._eventNS=".shieldGridSorting"+s(),y(a)?(c.allowUnsort=!0,c.multiple=!1,c.firstAscending=!0,c.ascText="&#9650;",c.descText="&#9660;"):x(a)&&(c.allowUnsort=!!B(a.allowUnsort)||a.allowUnsort,c.multiple=a.multiple,c.firstAscending=!!B(a.firstAscending)||a.firstAscending,c.ascText=B(a.ascText)?"&#9650;":a.ascText,c.descText=B(a.descText)?"&#9660;":a.descText),c._initialize()},destroy:function(){var b=this;b.allowUnsort=b.multiple=b.sortExpressions=null,b.length=0,b.grid.headerTable.find(".sui-headercell .sui-link").each(function(){a(this).parent().html(a(this).html())}),b.grid.headerTable.find('.sui-headercell span[class^="sui-"]').remove()},_initialize:function(){var b,c,d,e=this,f=e.grid,g=f.dataSource.sort,h=f.columns,i={},j=f.headerTable.find(".sui-headercell");if(j.each(function(){var b,c=a(this),d=c.attr("data-field"),g=f._getColumnByField(d);i[d]=c,g&&g.sortable!==!1&&(b=c.html(),c.empty(),c.removeAttr(V),a('<a href="#" class="sui-link sui-unselectable" unselectable="on" tabindex="-1"/>').appendTo(c).html(b).on(sa+e._eventNS,J(e._clickHandler,e)))}),g)for(b=0;b<g.length;b++)for(d=g[b],c=0;c<h.length;c++)if(h[c].sortable!==!1&&d.path==h[c].field){var k=a(i[h[c].field]),l=k.find(".sui-link"),m=X,n="sui-asc",o=e.ascText;d.desc&&(m=Y,o=e.descText,n="sui-desc"),a(k).attr(V,m),l.addClass(n),a('<span class="sui-'+m+'">'+o+"</span>").appendTo(l)}},_clickHandler:function(b){var c=this,d=a(b.target).closest(".sui-link"),e=c.grid,f=e._getColumnByField(d.parent().attr("data-field"));return d.hasClass("sui-desc")?c.allowUnsort&&c.firstAscending?c._sortInternal(f,!0,!0):c._sortInternal(f,!1,!1):d.hasClass("sui-asc")?c.allowUnsort&&!c.firstAscending?c._sortInternal(f,!1,!0):c._sortInternal(f,!0,!1):c.firstAscending?c._sortInternal(f,!1,!1):c._sortInternal(f,!0,!1),!1},_sortInternal:function(a,b,c){var d=this,e=d.grid,f=e.dataSource,g=f.sort,h=e.trigger(ha,{commandName:ua,cancel:!1,column:a,desc:b,unsort:c});if(!h.cancel){if(g){if(!d.multiple&&g)g.length=0;else{var i=M(g,function(d){return d.path===a.field&&d.desc===(c?b:!b)});if(i.length>0){var j=N(i[0],g);g.splice(j,1)}}c||g.push({path:a.field,desc:b})}else c||(g=f.sort=[{path:a.field,desc:b}]);e._refreshOnSort(),e.trigger(ua,{column:a,desc:b,unsort:c})}},_sort:function(a,b,c){var d,e,f=this,g=f.grid,h=g.dataSource,i=h.sort;if(i&&(d=M(i,function(c){return c.path===a&&c.desc===b})),!d||d.length<=0)if(!f.multiple&&i&&(i.length=0),i){var j=!1,k=M(i,function(c){return c.path===a&&c.desc!=b});k&&k.length>0&&(e=N(k[0],i),i.splice(e,1),j=!0),c||(i.push({path:a,desc:b}),j=!0),j&&g._refreshOnSort()}else c||(h.sort=[{path:a,desc:b}],g._refreshOnSort());else c&&(e=N(d[0],i),i.splice(e,1),g._refreshOnSort())}}),$a=m.extend({init:function(b,c){var d,e=this;d=e._eventNS=".shieldGridSelection"+s(),y(b)?(e.type="row",e.multiple=!1,e.toggle=!1,e.spreadsheet=!0,e.drawArea=!1,e._selectOnMouseDown=!1):x(b)&&(e.type=b.type?b.type:"row",e.multiple=!!b.multiple,e.toggle=!!z(b.toggle)&&b.toggle,e.spreadsheet=!z(b.spreadsheet)||b.spreadsheet,e.drawArea=z(b.drawArea)?b.drawArea:b.multiple,e._selectOnMouseDown=!e.drawArea&&b.selectEvent==oa),e.grid=c,e.lastSelected=null,a(c.headerTable).add(c.frozenHeaderTable).addClass("sui-non-selectable"),a(c.contentTable).add(c.frozenContentTable).addClass(aa),a(c.contentTable).add(c.frozenContentTable).on(oa+d,J(e._mouseDownHandler,e)).on(pa+d,J(e._mouseMoveHandler,e)),a(E).on(qa+d,J(e._mouseUpHandler,e)),Q&&a(c.contentTable).add(c.frozenContentTable).on(ka+d,function(){return!1}),e.multiple&&e.drawArea&&(e.area=a(E.createElement("span")).addClass("sui-area sui-area-color"))},destroy:function(){var b=this,c=b._eventNS,d=b.grid;a(d.contentTable).add(d.frozenContentTable).off(c),a(E).off(c),b.area&&b.area.remove(),b.type=b.multiple=b.lastSelected=b.toggle=b.spreadsheet=b.area=b.x=b.y=b.elements=null},select:function(b){var c,d,e,f,g=this;{if(!b)return g.grid.contentTable.find("."+ba);if(c=a(b),d=c.length,d>0)for(f=0;f<d;f++)e=a(c.get(f)),g._selectElement(e),f==d-1&&(g.lastSelected=e)}},clear:function(){var a=this;"row"==a.type?a._clearSelectedRows():a._clearSelectedCells()},_getParentTable:function(a){if(a)return"TABLE"==a[0].nodeName.toUpperCase()?a[0]:a.parent()?this._getParentTable(a.parent()):void 0},_mouseDownHandler:function(c){var d=this,e=d.grid,f=c.pageX,j=c.pageY,k=a(c.target),l=d._getParentTable(k);d.x=f,d.y=j,"TD"==k[0].nodeName.toUpperCase()&&l!=a(e.contentTable)[0]&&l!=a(e.frozenContentTable)[0]||!(k.hasClass("sui-cell")||k.hasClass("sui-row")||k.hasClass("sui-alt-row")||i(c,e.contentTable)||i(c,e.frozenContentTable))||k.hasClass("sui-detail-cell")||k.hasClass("sui-detail-row")||k.hasClass("sui-collapse-cell")||k.hasClass("sui-expand-cell")||k.hasClass("sui-expand-cell-disabled")||k.hasClass("sui-indent-cell")||(d.multiple&&d.drawArea&&d.area.appendTo(E.body).css({left:f+1,top:j+1,width:0,height:0}),a(E).on(pa+d._eventNS,J(d._mouseMoveHandler,d)),b.selection(!1),d.elements=g(c,e.contentTable,e.frozenContentTable),d.elements&&d._selectOnMouseDown&&!h(d.elements)&&d._performAndProcessSelection(c))},_mouseMoveHandler:function(a){var b=this,c=a.pageX,d=a.pageY,e=b.x,f=b.y,g={left:e>c?c:e,top:f>d?d:f,width:F(c-b.x),height:F(d-b.y)};b.multiple&&b.drawArea&&b.area.css(g)},_mouseUpHandler:function(c){var d=this,e=d.area;a(E).off(pa+d._eventNS),b.selection(!0),!d.elements||d._selectOnMouseDown&&!h(d.elements)||d._performAndProcessSelection(c),e&&e.remove()},_performAndProcessSelection:function(b){var c,d,e,f,g=this,h=g.grid,i=g.area,j=g.elements,k=b.ctrlKey,l=[],m=[],n=[];if(e=h.trigger(ha,{commandName:ia,cancel:!1}),e.cancel)return void(g.elements=null);for(g.elementsToBeSelected=[],"row"==g.type?g._performRowSelection(i,k,j,b):g._performCellSelection(i,k,j,b),f=0;f<g.elementsToBeSelected.length;f++)c=g.elementsToBeSelected[f],!(c.hasClass("sui-cell")||c.hasClass("sui-row")||c.hasClass("sui-alt-row"))||c.hasClass("sui-detail-cell")||c.hasClass("sui-detail-row")||c.hasClass("sui-collapse-cell")||c.hasClass("sui-expand-cell")||c.hasClass("sui-expand-cell-disabled")||c.hasClass("sui-indent-cell")||(l.push(c),d=h._getRowIndex("row"==g.type?c:a(c).parent()),m.push(d),n.push(d>=0?h.dataSource.getDataIndex(d):d));if(e=h.trigger(ha,{commandName:ja,cancel:!1,toBeSelected:l,viewIndices:m,indices:n}),!e.cancel){for(f=0;f<l.length;f++)g._selectElement(l[f]);h.trigger(ja,{selected:l,viewIndices:m,indices:n}),g.elements=null}},_performRowSelection:function(b,c,d,e){var f=this;if(!(a(e.target).hasClass("sui-expand-cell")||a(e.target).hasClass("sui-expand-cell-disabled")||a(e.target).hasClass("sui-collapse-cell")||a(e.target)&&a(e.target).parent()&&(a(e.target).parent().hasClass("sui-expand-cell")||a(e.target).parent().hasClass("sui-expand-cell-disabled")||a(e.target).parent().hasClass("sui-collapse-cell"))))if(!f.drawArea||e.type===na||b&&0===b.height()&&0===b.width())f.multiple?f._processMultiRowSelection(e,d):f._processSingleRowSelection(e,d);else if(f.multiple){var g=f.grid.contentTable.find(">tbody > tr"),h=null;I(g,function(b,c){var d=a(c),f=d.offset().top;f<e.pageY&&(h=c.rowIndex)}),c||f._clearSelectedRows(),f._selectRowRange(d.row.rowIndex,h,c)}else f._processSingleRowSelection(e,d)},_performCellSelection:function(b,c,d,e){var f=this;if(!(a(e.target).hasClass("sui-expand-cell")||a(e.target).hasClass("sui-expand-cell-disabled")||a(e.target).hasClass("sui-collapse-cell")||a(e.target)&&a(e.target).parent()&&(a(e.target).parent().hasClass("sui-expand-cell")||a(e.target).parent().hasClass("sui-expand-cell-disabled")||a(e.target).parent().hasClass("sui-collapse-cell"))))if(!f.drawArea||e.type===na||b&&0===b.height()&&0===b.width())f.multiple?f._processMultiCellSelection(e,d):f._processSingleCellSelection(e,d);else if(f.multiple){var g,h=f.grid.contentTable.find(">tbody > tr > td"),i=[];for(I(h,function(b,c){var d=a(c),g=d.get(0).clientWidth,h=d.get(0).clientHeight,j=d.offset().top,k=d.offset().left,l=j+h,m=k+g,n=G(e.pageX,f.x),o=H(e.pageX,f.x),p=G(e.pageY,f.y),q=H(e.pageY,f.y),r=!1,s=!1;j<p?l>p&&(r=!0):j<q&&(r=!0),k<n?m>n&&(s=!0):k<o&&(s=!0),r&&s&&i.push(c)}),c||f._clearSelectedCells(),g=0;g<i.length;g++){var j=a(i[g]);j.hasClass(ba)?f._deselectElement(a(i[g])):f.elementsToBeSelected.push(a(i[g]))}}else f._processSingleCellSelection(e,d)},_selectRowRange:function(b,c,d){var e,f,g=this,h=G(b,c),i=H(b,c),j=g.grid.contentTable.find(">tbody > tr");for(e=h;e<=i;e++)f=a(j[e]),d&&f.hasClass(ba)?g._deselectElement(f):g.elementsToBeSelected.push(f)},_clearSelectedRows:function(){var b=this,c=b.grid;a(c.frozenContentTable).find("> tbody > tr."+ba).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find("> tbody > tr."+ba).each(function(){b._deselectElement(a(this))})},_clearSelectedCells:function(){var b=this,c=b.grid;a(c.frozenContentTable).find(">tbody > tr > td."+ba).each(function(){b._deselectElement(a(this))}),a(c.contentTable).find(">tbody > tr > td."+ba).each(function(){b._deselectElement(a(this))})},_processSingleRowSelection:function(b,c){var d=this,e=d.toggle,f=d.multiple,g=a(c.row),h=g.hasClass(ba);f||d._clearSelectedRows(),e?h?d._deselectElement(g):d.elementsToBeSelected.push(g):(d._clearSelectedRows(),d.elementsToBeSelected.push(g)),d.lastSelected=g},_processMultiRowSelection:function(b,c){var d=this,e=d.grid,f=b.ctrlKey,g=b.shiftKey,h=a(c.row);if(f)h.hasClass(ba)?(d._deselectElement(h),d.lastSelected=h):(d.elementsToBeSelected.push(h),d.lastSelected=h);else if(g){e.contentTable.find(">tbody > tr."+ba);if(d.lastSelected){var i=d.lastSelected,j=i.get(0).rowIndex,k=e.contentTable.find(">tbody > tr"),l=h.get(0).rowIndex,m=G(l,j),n=H(l,j);
d._clearSelectedRows();for(var o=m;o<=n;o++)if(o!==j){var p=a(k[o]);d.elementsToBeSelected.push(p)}d.elementsToBeSelected.push(a(k[j]))}else d.elementsToBeSelected.push(h),d.lastSelected=h}else d._processSingleRowSelection(b,c)},_processSingleCellSelection:function(b,c){var d=this,e=d.toggle,f=d.multiple,g=a(c.cell),h=g.hasClass(ba);d.lastSelected;f||d._clearSelectedCells(),e?h?d._deselectElement(g):d.elementsToBeSelected.push(g):(d._clearSelectedCells(),d.elementsToBeSelected.push(g)),d.lastSelected=g},_processMultiCellSelection:function(b,c){var d=this,e=d.grid,f=b.ctrlKey,g=b.shiftKey,h=a(c.cell);if(f)h.hasClass(ba)?(d._deselectElement(h),d.lastSelected=h):(d.elementsToBeSelected.push(h),d.lastSelected=h);else if(g)if(d.lastSelected){var i,j=d.lastSelected,k=e.contentTable.get(0),l=k.rows[0].cells.length,m=j.parent().get(0).rowIndex,n=m*l+j.get(0).cellIndex,o=e.contentTable.find(">tbody > tr > td"),p=h.parent().get(0).rowIndex,q=p*l+h.get(0).cellIndex,r=G(q,n),s=H(q,n);if(d._clearSelectedCells(),d.spreadsheet){var t=j[0].cellIndex,u=h[0].cellIndex;r=G(t,u),s=H(t,u);var v=G(m,p),w=H(m,p);for(i=v;i<=w;i++){var x,y=k.rows[i];for(x=r;x<=s;x++)d.elementsToBeSelected.push(a(y.cells[x]))}}else for(i=r;i<=s;i++)if(i!==n){var z=a(o[i]);d.elementsToBeSelected.push(z)}d.elementsToBeSelected.push(a(o[n]))}else d.elementsToBeSelected.push(h),d.lastSelected=h;else d._processSingleCellSelection(b,c)},_selectElement:function(a){a.addClass(ba)},_deselectElement:function(a){a.removeClass(ba)}}),_a=m.extend({options:{ns:".shieldGridGroupReorder",returnDuration:50,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div style='border-color:transparent;' class='sui-grid sui-grid-core'><div class='sui-group-panel-indicator'><span class='sui-group-title'>{0}</span><span class='sui-group-close-button'></span></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},_a.fn.options),b._eventNS=b.options.ns+s(),b._events(!0)},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(oa+b._eventNS,".sui-group-panel-indicator",b._downProxy)):(c.off(oa+b._eventNS,".sui-group-panel-indicator",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-group-panel-indicator"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(d.dataField=e.attr("data-field"),!(c.button>1))return d._moveProxy=J(d._move,d),d._upProxy=J(d._up,d),a(E).on(pa+d._eventNS,d._moveProxy).on(qa+d._eventNS,d._upProxy),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:e.parent().find(".sui-group-panel-indicator").index(e),positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=a.parent().children(".sui-group-panel-indicator"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g=this.start,h=g.gridPosition;for(d=0;d<g.positions.length;d++)if(c=g.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,f=h.left<=a&&a<=h.left+h.width&&h.top<=b&&b<=h.top+h.height,e&&f)return d;return-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-group-panel-indicator"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),e!==d.index&&(b=f.left+(k?0:f.width),g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered,k=e.dataField;if(e._detachDocumentEvents(),h)if(null!=j&&j>-1){if(h.remove(),d=g.trigger(ha,{commandName:ya,cancel:!1,index:i.index,newIndex:j}),!d.cancel)for(var l=g.dataSource.group,m=0;m<l.length;m++)if(l[m].field==k){var n=l[m];l[m]=l[j],l[j]=n;break}}else setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0),e.grid.dataSource.group&&(d=g.trigger(ha,{commandName:Aa,cancel:!1,field:k}),d.cancel||(e.grid.ungroup(k),g.trigger(Aa,d)));e.dragged=e.dataField=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.dataSource.read(),g.trigger(ya,d))},_detachDocumentEvents:function(){var b=this;b._moveProxy=b._upProxy=null,a(E).off(b._eventNS)},destroy:function(){var a=this;a.dataField=null,a._detachDocumentEvents(),a._events(!1)}}),ab=m.extend({options:{ns:".shieldGridColumnGroupReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},bb.fn.options),b._eventNS=b.options.ns+s(),b._events(!0),a.headerTable.addClass("sui-reorderable")},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(oa+b._eventNS,".sui-headercell",b._downProxy)):(c.off(oa+b._eventNS,".sui-headercell",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-headercell"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(!(c.button>1)){var k=e.attr("data-field"),l=d.grid.dataSource.group;if(l)for(var m=0;m<l.length;m++)if(k===l[m].field)return;return a(E).on(pa+d._eventNS,J(d._move,d)).on(qa+d._eventNS,J(d._up,d)),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:1e3,positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1}},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=this.grid.element.find(".sui-group-panel-indicator"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()}),e==d.length-1&&f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g,h=this.start,i=h.gridPosition,j=this.grid.element.find(".sui-group-panel");if(h.positions.length>0){for(d=0;d<h.positions.length;d++)if(c=h.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,g=i.left<=a&&a<=i.left+i.width&&i.top<=b&&b<=i.top+i.height,f=j.offset().left<=a&&a<=j.offset().left+j.width()&&j.offset().top<=b&&b<=j.offset().top+j.height(),e&&g)return d}else f=j.offset().left<=a&&a<=j.offset().left+j.width()&&j.offset().top<=b&&b<=j.offset().top+j.height();return f?(this.isOnGroupPanel=!0,this.grid.element.find(".sui-group-panel-indicator").length):-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-group-panel-indicator"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),this.isOnGroupPanel&&(k=!1),f?(b=f.left+(k?0:f.width),this.isOnGroupPanel=null,g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()):(b=h+(k?d.gridPosition.width:0),this.isOnGroupPanel=null,g.css({left:b,top:d.gridPosition.top,height:c.grid.element.find(".sui-group-panel-empty").outerHeight()}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered;if(h)if(h.css({left:i.x-i.left,top:i.y-i.top,transition:o("left {0} {1}ms, top {0} {1}ms",f.returnEasing,f.returnDuration)}),null!=j&&j>-1){h.remove();var k=i.target.attr("data-field");d=g.trigger(ha,{commandName:za,cancel:!1,field:k,index:j}),d.cancel||g.group(k,j,"asc")}else setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0);e.dragged=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.dataSource.read(),g.trigger(za,d))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),bb=m.extend({options:{ns:".shieldGridColumnReorder",returnDuration:150,returnEasing:"ease-out",dragTreshold:20,draggedTemplate:"<div class='sui-grid sui-grid-core'><div class='sui-gridheader'><table class='sui-table'><thead><tr class='sui-columnheader'><th class='sui-headercell'>{0}</th></tr></thead></table></div></div>"},init:function(a){var b=this;b.grid=a,b.options=K(!0,{},bb.fn.options),b._eventNS=b.options.ns+s(),b._events(!0),a.headerTable.addClass("sui-reorderable")},_events:function(a){var b=this,c=b.grid.element;a?(b._downProxy=J(b._down,b),c.on(oa+b._eventNS,".sui-headercell",b._downProxy)):(c.off(oa+b._eventNS,".sui-headercell",b._downProxy),b._downProxy=null)},_down:function(c){var d=this,e=a(c.target).closest(".sui-headercell"),f=e.offset(),g=d.grid.element,h=g.offset(),i=c.pageX,j=c.pageY;if(!(c.button>1))return a(E).on(pa+d._eventNS,J(d._move,d)).on(qa+d._eventNS,J(d._up,d)),d.start={left:i-f.left,top:j-f.top,x:i,y:j,target:e,index:e.parent().find(".sui-headercell").index(e),positions:d._positions(e),gridPosition:{left:h.left,top:h.top,width:g.outerWidth(),height:g.outerHeight()},isRtl:p.isRtl(g)},b.selection(!1),!1},_move:function(b){var c=this,d=c.options,e=c.dragged,f=c.start,g=b.pageX,h=b.pageY,i=d.dragTreshold;e?(e.css({left:g-f.left,top:h-f.top}),c.hovered=c._index(g,h),c._indicator()):(F(f.x-g)>i||F(f.y-h)>i)&&(c.dragged=a(o(d.draggedTemplate,f.target.html())).css({position:"absolute",left:g-f.left,top:h-f.top,zIndex:999}).find("table").css("width","auto").end().find("th").attr("style",f.target[0].style.cssText).css({width:f.target.width(),height:f.target.height()}).end().appendTo(E.body))},_positions:function(a){var b,c,d=a.parent().children(".sui-headercell"),e=0,f=[];for(e;e<d.length;e++)b=d.eq(e),c=b.offset(),f.push({left:c.left,top:c.top,width:b.outerWidth(),height:b.outerHeight()});return f},_index:function(a,b){var c,d,e,f,g=this.start,h=g.gridPosition;for(d=0;d<g.positions.length;d++)if(c=g.positions[d],e=c.left<=a&&a<=c.left+c.width&&c.top<=b&&b<=c.top+c.height,f=h.left<=a&&a<=h.left+h.width&&h.top<=b&&b<=h.top+h.height,e&&f)return d;return-1},_indicator:function(){var b,c=this,d=c.start,e=c.hovered,f=d.positions[e],g=c.reorderIndicator,h=d.gridPosition.left,i=d.gridPosition.left+d.gridPosition.width,j=d.target.parent().children(".sui-headercell"),k=d.isRtl?d.index<e:d.index>e;j.removeClass("sui-reorder-target"),g&&g.hide(),null!=e&&e>-1&&(j.eq(e).addClass("sui-reorder-target"),g||(g=c.reorderIndicator=a("<div class='sui-grid-reorder-indicator'><span class='sui-grid-indicator-top' /><span class='sui-grid-indicator-bottom' /></div>").appendTo(E.body)),e!==d.index&&(b=f.left+(k?0:f.width),g.css({left:G(H(h,b),i),top:f.top,height:f.height}).show()))},_up:function(c){var d,e=this,f=e.options,g=e.grid,h=e.dragged,i=e.start,j=e.hovered;h&&(h.css({left:i.x-i.left,top:i.y-i.top,transition:o("left {0} {1}ms, top {0} {1}ms",f.returnEasing,f.returnDuration)}),null!=j&&j>-1?(h.remove(),d=g.trigger(ha,{commandName:wa,cancel:!1,index:i.index,newIndex:j}),d.cancel||g.reorderColumn(i.index,j)):setTimeout(function(){h.remove()},p.transitions?f.returnDuration:0)),e.dragged=e.hovered=j=null,e._indicator(),e.reorderIndicator&&(e.reorderIndicator.remove(),e.reorderIndicator=null),e.start=null,a(E).off(e._eventNS),b.selection(!0),d&&!d.cancel&&(delete d.cancel,delete d.commandName,g.trigger(wa,d))},destroy:function(){this._events(!1),this.grid.headerTable.removeClass("sui-reorderable")}}),cb=l.extend({init:function(){l.fn.init.apply(this,arguments);var a=this;a._eventNS=".shieldGrid"+a.getInstanceId(),a.refresh(),a._dM()},destroy:function(){this._destroyInternal(),l.fn.destroy.call(this)},_destroyInternal:function(){var b,d,e,f=this,g=f.options,h=f._eventNS;if(f.contentWrapper){if(f._markedCells){for(d in f._markedCells)f._markedCells.hasOwnProperty(d)&&(f._markedCells[d].length=0);f._markedCells=null}if(a(c).off(h),f._destroyFrozenContainers(),f.sorting&&(f.sorting.destroy(),f.sorting=null),f.virtualizedContainer&&(f.virtualizedContainer.destroy(),f.virtualizedContainer=null),f.columns)for(b=0;b<f.columns.length;b++)f.columns[b].destroy();if(f.contentWrapper&&f.contentWrapper.off(ga),f.scrollableWrapper=null,f._selectable&&(f._selectable.destroy(),f._selectable=null),g.scrolling?(f.contentWrapper.parent().remove(),f.headerWrapper.parent().remove()):(f.contentWrapper.remove(),f.headerWrapper.remove()),f._hasDetailTemplate()&&f.contentTable.off(h),f.popupWindow&&f.popupWindow.destroy(),f._footer&&(a(f._footer).remove(),f._footer=null),f.columns=f._gridColumns=f._windowEditingIndex=f.contentWrapper=f.headerWrapper=f.contentTable=f.hederTable=null,f._buttons){for(b=0;b<f._buttons.length;b++)e=f._buttons[b].button.element,f._buttons[b].button.destroy(),e.remove();f._buttons.length=0}f.pager&&(f.pager.destroy(),f.pager=null,f.pagerWrapper&&(f.pagerWrapper.parent().remove(),f.pagerWrapper=null)),f.loadingPanel&&(f.loadingPanel=null,clearTimeout(f.loadingPanelTimeout),f.loadingPanelTimeout=null),f._columnResizing&&(f._columnResizing.destroy(),f._columnResizing=null),f._toolbar&&(f._toolbar.destroy(),f._toolbar=null),f._editing&&(f._editing.destroy(),f._editing=null),f._columnReorder&&(f._columnReorder.destroy(),f._columnReorder=null),f._sortingInProgress=f._loadingVirtualRows=f._scrollLeft=f._scrollTop=f._populateInsertedItem=f._preventClosingEditors=f._editingInProcess=null,f._filter&&(f._filter.destroy(),f._filter=null),f._groupReorder&&(f._groupReorder.destroy(),f._groupReorder=null),f._columnGroupReorder&&(f._columnGroupReorder.destroy(),f._columnGroupReorder=null),f.dataSource.off(h),f.element.off(h).removeClass("sui-grid sui-grid-core").css(_,"").empty()}},_dM:function(){var b=function(b){return a("<div/>").html(b).text()},c="&#68;&#101;&#109;&#111;&#32;&#86;&#101;&#114;&#115;&#105;&#111;&#110;",d=E.createTextNode(b(c));a(d).insertAfter(a(this.element))},_resizeHandler:function(){var a=this;a._adjustWidthsLocked(),a._adjustHeightsLocked()},_hasDetailTemplate:function(){var a=this.options;return a.detailTemplate||a.events&&a.events.detailCreated},_hasVirtualScrolling:function(){var a=this.options;return a.scrolling&&a.scrolling.virtual&&!a.paging&&!this._hasDetailTemplate()},_canExpandCollapse:function(){return this.options.detailExpandCollapse!==!1},_resolveColumns:function(a){var c,d=this;if(d.columns=[],u.array(a))for(c=0;c<a.length;c++)d.columns.push(new Wa(a[c]));else b.error("Invalid columns declaration. The columns have to be array.",d.options.dieOnError);for(d._gridColumns={},c=0;c<d.columns.length;c++)d._gridColumns[d.columns[c].field]={index:c}},_createWrappers:function(){var b,c,d=this,e=d.element;d._wrapper(),b=a("<div/>").prependTo(e),b.addClass("sui-gridcontent"),c=a("<div/>").prependTo(e),c.addClass("sui-gridheader"),d.options.showHeader||(c.css(Qa,Ra),b.addClass("sui-no-header")),d.headerWrapper=c,d.contentWrapper=b},_wrapper:function(){var a=this.options.height,b=this.element;b.is("div")||(b=b.wrap("<div/>").parent()),b.addClass("sui-grid sui-grid-core"),b&&b.css(_,a)},_createGroupPanel:function(){var b,c,d,e=this,f=!1,g=e.dataSource;if(d=e.element.find(".sui-group-panel"),d.length>0&&d.remove(),e.options.grouping.showGroupHeader)if(g.group&&0!==g.group.length){b=a('<div class="sui-group-panel"/>'),a(e.element).prepend(b);for(var h=0;h<g.group.length;h++)c=g.group[h],e._createGroupHeaderIndicator(c,b),f=!0;f&&e.options.grouping.allowDragToGroup&&(e._groupReorder&&e._groupReorder.destroy(),e._groupReorder=new _a(e),e._columnGroupReorder&&e._columnGroupReorder.destroy(),e._columnGroupReorder=new ab(e))}else a(e.element).prepend(a('<div class="sui-group-panel sui-group-panel-empty">'+e.options.grouping.message+"</div>"))},_createGroupHeaderIndicator:function(b,c){var d,e,f,g=this;f=a('<div class="sui-group-panel-indicator" data-field="'+b.field+'"/>').appendTo(c),e="desc"==b.order?a('<span class="sui-descending">&#9660;</span>').appendTo(f):a('<span class="sui-ascending">&#9650;</span>').appendTo(f),a('<span class="sui-group-title">'+b.field+"</span>").appendTo(f),g.options.grouping.allowDragToGroup&&(d=a('<span class="sui-group-close-button">&#10006;</span>').appendTo(f),d.on(sa,g._closeButtonClicked=J(g._closeButtonClickedHandler,g))),e.on(sa,g._sortButtonClicked=J(g._sortButtonClickedHandler,g))},_sortButtonClickedHandler:function(b){for(var c=this,d=a(b.currentTarget),e=d.parent().attr("data-field"),f=c.dataSource.group,g=0;g<f.length;g++)f[g].field==e&&(d.hasClass("sui-descending")?f[g].order="asc":f[g].order="desc",c.dataSource.read())},_closeButtonClickedHandler:function(b){var c,d=this,e=a(b.currentTarget),f=e.parent().attr("data-field");d.dataSource.group&&(c=d.trigger(ha,{commandName:Aa,cancel:!1,field:f}),c.cancel||(d.ungroup(f),d.trigger(Aa,c)))},_createHeaderTable:function(){var b=this,c=b.headerWrapper,d=b.element;d.is("table")||(d=c.children("table"),d.length||(d=a("<table/>").appendTo(c))),R&&d.attr("cellspacing",0),d.addClass("sui-table"),b.headerTable=d,b._createTbody(d,!0),b._createThead(d),b._createFakeRow(d,b.columns.length)},_createContentTable:function(){var b=this,c=b.options,d=b.contentWrapper,e=b.element;e.is("table")||(e=d.children("table"),e.length||(e=a("<table/>").appendTo(d))),R&&e.attr("cellspacing",0),e.addClass("sui-table"),c.rowHover&&e.addClass("sui-hover"),b._hasDetailTemplate()&&(b._canExpandCollapse()&&e.addClass("sui-expandable"),e.on(sa+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",J(b._expandCollapseDetailTemplate,b))),b.contentTable=e,b._createTbody(b.contentTable,!1)},_createTbody:function(b,c){var d=b.find("> tbody");d.length||(d=a("<tbody/>").appendTo(b)),c&&d.addClass("sui-hide"),b.tbody=d},_createThead:function(b){var c,d,f,g,h,i,j=this,k=(j.options,j.columns),l="",m=b.find(">thead");for(m.length||(m=a("<thead/>").insertBefore(b.tbody)),f=b.find("tr:has(th):first"),f.length||(f=m.children().first(),f.length||(f=a("<tr/>").appendTo(m))),f.attr(U,"row"),f.empty(),c=0,d=k.length;c<d;c++)g=k[c],h=g.headerTemplate||g.title||g.field||g,i=!!k[c].sortable,l+="<th "+e(g.headerAttributes)+' data-field="'+k[c].field+'" role="columnheader"'+(i?' tabindex="-1"':"")+">"+h+"</th>";if(f.html(l),f.addClass("sui-columnheader"),f.find("th").addClass("sui-headercell"),k.length&&j._hasDetailTemplate()&&j._canExpandCollapse()){var n=a('<th class="sui-indent-cell"/>');R&&n.html("&nbsp;"),n.prependTo(f)}b.thead=m},_createFakeRow:function(b,c){var d,e,f=b.find(">tbody");if(f.length){for(d=a("<tr/>"),e=0;e<c;e++)a("<td/>").appendTo(d);d.appendTo(f)}},_createColgroup:function(b){var c,d,e,f=this,g=f.options,h=f.columns,i=b.find(">colgroup");for(i.length||(i=a("<colgroup/>").prependTo(b)),i.html(""),g.columns.length&&f._hasDetailTemplate()&&f._canExpandCollapse()&&a('<col class="sui-indent-col"/>').appendTo(i),c=0,d=h.length;c<d;c++)e=h[c].width,a(e&&0!==parseInt(e,10)?o('<col style="width:{0}"/>',w(e)?e:e+"px"):"<col/>").data(Ta,h[c].field).appendTo(i)},scrollTop:function(b){var c=this,d=c.options,e=d.scrolling,f=c._hasVirtualScrolling(),g=c.contentWrapper;if(e)if(z(b))f?c.virtualizedContainer&&c.virtualizedContainer.scrollTop(b):a(g).scrollTop(b);else{if(!f)return a(g).scrollTop();if(c.virtualizedContainer)return c.virtualizedContainer.scrollTop()}},_scrolling:function(){var b,c,e,f=this,g=f.options,h=a(f.element),i=(p.isRtl(h),f.dataSource),j=f._hasVirtualScrolling(),k=f.headerWrapper,l=f.contentWrapper,m=k.outerHeight(),n=!(j||"auto"!==g.height&&z(g.height)),o=!j&&z(g.maxHeight)?parseInt(g.maxHeight,10):d,q=0,r=0,s=0;if(k.parent().hasClass("sui-gridheader sui-scrolldiv")?m=k.parent().outerHeight():(k.addClass("sui-headercontent").removeClass("sui-gridheader"),k.wrap('<div class="sui-gridheader sui-scrolldiv"/>'),l.addClass("sui-content").removeClass("sui-gridcontent"),l.wrap('<div class="sui-gridcontent sui-scroller"/>'),R&&(f.headerTable.addClass("sui-table-ie7").removeClass("sui-table"),f.contentTable.addClass("sui-table-ie7").removeClass("sui-table")),e=f.scrollableWrapper=j?l.parent():l,e.on(ga,J(f._onscroll,f))),f.pagerWrapper&&(q=f.pagerWrapper.outerHeight()),f._toolbar){var t,u=h.find(".sui-toolbar"),v=0;for(t=0;t<u.length;t++)v+=a(u[0]).outerHeight();r+=v+1}var w=h.find(".sui-group-panel");w.length>0&&(s+=w.outerHeight()),n?c="auto":(b=h.innerHeight(),c=b-m-q-r-s),a(l).add(l.parent()).css(_,c),o&&o<h.innerHeight()&&(c=o-m-q-r-s,a(l).add(l.parent()).css(_,c)),j?(f._ensureVirtualizedContainer(),f.virtualizedContainer.options.total=i.total,f.virtualizedContainer.render(),f._fixHeaderPadding(f.virtualizedContainer.wrapper.parent())):(f._fixHeaderPadding(l),n||!Q||R||S||p.hasScrollbarX(l)||l.css(_,c+1))},_fixHeaderPadding:function(b){var c=this,d=p.isRtl(c.element),e=c.headerWrapper,f=a(b).get(0);f&&(f.scrollHeight-f.clientHeight>1?(e.parent().css(d?"padding-left":"padding-right",p.scrollbar()-1),e.removeClass("sui-no-y-scroll")):(e.parent().css(d?"padding-left":"padding-right",0),e.addClass("sui-no-y-scroll")))},_ensureVirtualizedContainer:function(){var a,c,d=this;d.virtualizedContainer||(a=d._renderRow(0,d.contentTable.tbody,{}),c=a.outerHeight(),a.remove(),d.virtualizedContainer=new b.ui.VirtualizedContainer(d.scrollableWrapper,{itemHeight:c,total:d.dataSource.total,createContainer:function(a){return a.addClass("sui-content").append(d.contentTable).find("tbody").empty()},getItems:J(d._loadVirtualRows,d),skipRender:!0}),d.contentWrapper=d.virtualizedContainer.element.children().eq(0))},_loadVirtualRows:function(a,b,c){var d=this,e=d.dataSource,f=null!=e.skip?e.skip:0,g=null!=e.take?e.take:e.view.length,h=100,i=d.virtualizedContainer.container;if(a<b)if(!d._sortingInProgress&&e.remote&&(a<f||b>=f+g))clearTimeout(d._loadWaitTimeout),d._loadWaitTimeout=setTimeout(function(a,b,c){return function(){d._loadWaitTimeout=null,e.skip=a,e.take=b-a,d._loadingVirtualRows=!0,e.one(ca+".shieldGrid"+d.getInstanceId(),function(){d._loadWaitTimeout||(d._loadingVirtualRows=!1)}),e.read().then(function(){if(!d._loadWaitTimeout){i.empty();for(var f=a;f<b&&f<e.total;f++)d._renderRow(f-a,i,e.view[f-a]);d.loading(!1),c([],!1),d.trigger(ma)}})}}(a,b,c),h);else{i.empty();for(var j=a;j<b&&j<e.total;j++)d._renderRow(j,i,e.view[j]);c([],!1),d.trigger(ma)}else d._renderNoRecords();d._checkIfVerticalScroll(),d._initSelection()},_checkIfVerticalScroll:function(){var a=this,b=a.element.find(".sui-virtualized").get(0),c=a.element.get(0),d=b.scrollHeight>c.scrollHeight;d?(a.headerWrapper.parent().css("padding-right","16px"),a.headerWrapper.removeClass("sui-grid-no-gap")):(a.headerWrapper.parent().css("padding-right","0px"),a.headerWrapper.addClass("sui-grid-no-gap"))},_onscroll:function(b){var c,d=this,e=d.scrollableWrapper,f=e.get(0),g=d.headerWrapper,h=e.scrollLeft(),i=g.scrollLeft();if(p.isRtl(d.element)&&T&&f.clientHeight<f.scrollHeight&&(h+=f.offsetWidth-f.clientWidth),h!=i&&(g.scrollLeft(h),d._footer&&(c=a(d._footer).find(".sui-footer-content"),c.length>0&&c.scrollLeft(h))),d.frozenHeaderWrapper){var j=e.scrollTop(),k=d.frozenContentWrapper.scrollTop();j!=k&&d.frozenContentWrapper.scrollTop(j)}},_sorting:function(){var a=this,b=a.options.sorting;a.element;b&&a.columns.length&&(a.sorting&&a.sorting.destroy(),a.sorting=new Za(b,a))},_renderData:function(){var b,c,d=this,e=d.dataSource.view,f=d.options;f.scrolling,!!B(f.altRows)||f.altRows,f.rowTemplate,f.altRowTemplate,d.contentTable;if(!d._loadingVirtualRows&&(c=d.trigger(ha,{commandName:la,cancel:!1}),!c.cancel)){d._sortingInProgress=!1,d.columns.length||(b=[],e.length&&I(e[0],function(a,c){b.push(a)}),f.columns=b,d._resolveColumns(b)),d._filtering(),d._destroyFrozenContainers(),d._createThead(d.headerTable),d._createColgroup(d.headerTable),d._createColgroup(d.contentTable),d.contentTable.tbody.empty(),d._sorting(),d._renderRows(),d._renderFooter();var g=function(b){return a("<div/>").html(b).text()},h=g("&#83;&#104;&#105;&#101;&#108;&#100;&#85;&#73;");d._refreshColVisibility(),d._refreshFrozenCols(),d._initSelection(),d.loading(!1);var i=g("&#104;&#116;&#116;&#112;&#58;&#47;&#47;&#119;&#119;&#119;&#46;&#115;&#104;&#105;&#101;&#108;&#100;&#117;&#105;&#46;&#99;&#111;&#109;");d.trigger(la);var j=i;d.dmL||(d.dmL=a('<a href="'+j+'" target="_blank"> by '+h+"</a>"),a(d.dmL).css({color:"grey","text-decoration":"none"}).insertAfter(a(this.element)))}},_renderRows:function(){var b,c,d,e=this,f=(e.options,e.dataSource),g=f.view;if(e._markedCells){for(d in e._markedCells)e._markedCells.hasOwnProperty(d)&&(e._markedCells[d].length=0);e._markedCells=null}if(!g||!g.length)return e._renderNoRecords(),void e._initScrolling();if(!e._hasVirtualScrolling()||e._sortingInProgress)if(c=f.group,c&&c.length>0){var h=0;for(e._renderGroupedData(g,h,0),e.headerTable.find(">colgroup").find(".sui-indent-col").remove(),e.headerTable.thead.find(".sui-columnheader > .sui-indent-cell").remove(),b=0;b<c.length;b++)a('<col class="sui-indent-col"/>').prependTo(e.headerTable.find(">colgroup")),a('<col class="sui-indent-col"/>').prependTo(e.contentTable.find(">colgroup")),a('<th class="sui-indent-cell"/>').prependTo(e.headerTable.thead.find(".sui-columnheader"));e._addAllIndentCells(),e.contentTable.addClass("sui-grouped-table")}else e._renderRowsAndDetails(g);e._createGroupPanel(),e._initScrolling()},_getVisibleColumnCount:function(){var a,b=this.columns||[],c=b.length,d=0;for(a=0;a<c;a++)b[a].visible&&d++;return d},_renderNoRecords:function(){var b=this,c=b.options,d=b.contentTable;B(c.noRecordsTemplate)?a('<tr><td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell">'+(c.noRecordsText||"No records to display")+"</td></tr>").appendTo(d.tbody):a('<td class="sui-grid-norecords-cell" colspan="'+b._getVisibleColumnCount()+'" role="gridcell"/>').append(c.noRecordsTemplate).wrap("<tr/>").parent().appendTo(d.tbody)},_initScrolling:function(){var a=this;a.options.scrolling&&!a._sortingInProgress&&a._scrolling()},_initSelection:function(){this._selection()},_addAllIndentCells:function(){var b,c,d,e,f=this,g=f.contentTable.get(0).rows;for(b=0;b<g.length;b++)if(d=a(g[b]),e=parseInt(d.attr("data-group-level"),10),d.hasClass("sui-group-header")){if(e>1)for(c=0;c<e-1;c++)a("<td class='sui-indent-cell'/>").prependTo(d)}else for(c=0;c<e;c++)a("<td class='sui-indent-cell sui-group-intend-cell'/>").prependTo(d)},_renderGroupedData:function(a,b,c){var d,e,f=this;for(f.options.detailExpandCollapse=!1,d=0;d<a.length;d++)e=a[d],e.hasOwnProperty("field")&&e.hasOwnProperty("items")&&e.hasOwnProperty("value")?(c++,f._renderGroupHeader(e,c),f._renderGroupedData(e.items,b,c),f._renderGroupAggregates(e),c--):(f._renderDataItem(e,b,c),b++)},_renderGroupAggregates:function(b){if(b.aggregate){var c,d,e,f,g,h=this,i=h.columns,j={},k=b.aggregate;for(f=0;f<i.length;f++)if(d=i[f].groupFooterTemplate){c=a("<tr class='sui-group-footer' />").appendTo(h.contentTable.tbody);break}if(c){for(f=0;f<i.length;f++)if(g=a("<td class='sui-group-footer-cell' />").appendTo(c),d=i[f].groupFooterTemplate){e=i[f].field;for(var l=0;l<k.length;l++)k[l].field==e&&(v(k[l].aggregate)?j.custom=k[l].value:j[k[l].aggregate]=k[l].value);if(v(d)){var m=d.call(h,g,j);z(m)&&!C(m)&&""!==m&&g.html(m)}else g.html(o.call(h,d,j))}var n=h.dataSource.group.length;for(f=0;f<n;f++)c.prepend(a("<td class='sui-indent-cell' />"))}}},_renderGroupHeader:function(b,c){var d=this,e=d.contentTable,f=d._getVisibleColumnCount()+d.dataSource.group.length-c+1,g=a('<tr class="sui-group-header" data-group-level="'+c+'"/>').appendTo(e),h=a('<td class="sui-group-header-cell" colspan="'+f+'"/>').appendTo(g),i=a('<span class="sui-collapse">&#9662;</span>').appendTo(h);a('<span class="sui-group-header-text">'+b.field+": "+b.value+"</span>").appendTo(h),i.on(sa,J(d._expandCollapseHandler,d))},_expandCollapseHandler:function(b){var c,d=this,e=a(b.currentTarget),f=e.parent().parent();e.hasClass("sui-collapse")?(c=d.trigger(ha,{commandName:Ma,cancel:!1,row:f}),c.cancel||(d.collapseGroup(f),e.html("&#9656;"),e.removeClass("sui-collapse").addClass("sui-expand"),d.trigger(Ma,{row:f}))):(c=d.trigger(ha,{commandName:Na,cancel:!1,row:f}),c.cancel||(d.expandGroup(f),e.html("&#9662;"),e.removeClass("sui-expand").addClass("sui-collapse"),d.trigger(Na,{row:f})))},_renderDataItem:function(a,b,c){var d=this,e=d.contentTable;d._renderRow(b,e,a).attr("data-group-level",c)},_renderRowsAndDetails:function(a){var b,c,d=this,e=d.contentTable;for(c=0,b=a.length;c<b;c++)d._renderRow(c,e.tbody,d.dataSource.view[c]),d._hasDetailTemplate()&&!d._canExpandCollapse()&&d._addDetailTemplate(a[c])},_renderRow:function(b,c,d){var f,g,h,i,j=this,k=z(c),l=j.options,m=!!B(l.altRows)||l.altRows,n=m&&b%2&&l.altRowTemplate?l.altRowTemplate:l.rowTemplate,p=j.columns;if(n)w(n)&&(n=n.replace(/^\s+/,"").replace(/\s+$/,"")),g=a(o(n,d)),k&&c.append(g);else{if(g=a('<tr class="'+(m&&b%2?"sui-alt-row":"sui-row")+'"/>').data(Sa,b),arguments.length>3){var q=arguments[3],s=c.find("tr"),t=s.eq(q);s.length==q?c.append(g):g.insertBefore(t)}else k&&c.append(g);for(i=0;i<p.length;i++){var u,x,y=p[i],A=y.columnTemplate,D=y.format,E=y.field,F=y.buttons,G=a("<td "+e(y.attributes)+' role="gridcell" tabindex="-1"/>').addClass("sui-cell").appendTo(g);if(G.attr(U,"gridcell").attr(Z,"-1"),y.editable||G.attr(W,$),F)for(x=0;x<F.length;x++)j._buildButton(F[x],G,b);else A?v(A)?(u=A.call(j,G,d,b),z(u)&&!C(u)&&""!==u&&G.html(u)):G.html(o.call(j,A,d)):D?G.html(o.call(j,D,E?r(d,E):d)):G.html(""+r(d,E));y.visible||G.css(Qa,Ra)}}return j._hasDetailTemplate()&&j._canExpandCollapse()&&(h=j.trigger(ha,{commandName:Fa,cancel:!1,item:d}),h.cancel?f=a('<td class="sui-cell sui-expand-cell-disabled"/>'):(f=a('<td class="sui-cell sui-expand-cell"/>'),j._setExpandCollapseCellText(f,l.detailExpandText,l.detailCollapseText)),f.prependTo(g)),g.attr(U,"row"),g},_renderFooter:function(){var b,c,d,e,f,g,h,i=this,j=i.options,k=i.columns,l={},m=i.dataSource.aggregates;for(i._footer&&(a(i._footer).remove(),i._footer=null),f=0;f<k.length;f++)if(d=k[f].footerTemplate){if(j.scrolling&&j.scrolling.virtual){var n=a('<div class="sui-footer" style="padding-right:16px;"/>').appendTo(i.element),p=a('<div class="sui-footer-content"/>').appendTo(n),q=a('<table class="sui-table"/>').appendTo(p),r=i.element.find(".sui-headercontent > table > colgroup > col"),s=a("<colgroup/>").appendTo(q);for(g=0;g<r.length;g++)a(r[g].outerHTML).appendTo(s);b=a("<tbody/>").appendTo(q),i._footer=n}else b=a("<tfoot/>").appendTo(i.contentTable),i._footer=b;c=a('<tr class="sui-grid-footer"/>').appendTo(b);
break}if(c){for(f=0;f<k.length;f++)if(h=a('<td class="sui-footer-cell" role="gridcell" tabindex="-1"/>').appendTo(c),d=k[f].footerTemplate){for(e=k[f].field,g=0;g<m.length;g++)m[g].field==e&&(v(m[g].aggregate)?l.custom=m[g].value:l[m[g].aggregate]=m[g].value);if(v(d)){var t=d.call(i,h,l);z(t)&&!C(t)&&""!==t&&h.html(t)}else h.html(o.call(i,d,l))}var u=c.prev();(u.find(".sui-expand-cell").length>0||u.find(".sui-expand-cell-disabled").length>0||u.find(".sui-indent-cell").length>0||u.find(".sui-collapse-cell").length>0)&&c.prepend(a("<td/>"))}},_buildButton:function(c,d,e){var f,g=this,h=c.commandName,i=c.click;if(b.ui.Button){var j=a('<button type="button">'+c.caption+"</button>").appendTo(d);d.addClass("sui-button-cell"),"delete"===h?(i=g._deleteButtonClicked,B(c.cls)?c.cls="sui-delete":c.cls+=" sui-delete"):"edit"===h&&(g._editing&&(g._editing.type="row"),g._preventClosingEditors=!0,i=g._editButtonClicked,B(c.cls)?c.cls="sui-edit":c.cls+=" sui-edit"),f=new b.ui.Button(j,{cls:c.cls,events:{click:J(i,g,e,d)}}),"delete"!=h&&"edit"!=h||(g._buttons||(g._buttons=[]),g._buttons.push({index:e,button:f}))}},_deleteButtonClicked:function(a,b){var d,e=this,f=e.dataSource,g=e.options.editing,h=g?g.confirmation:null;if(d=e.trigger(ha,{commandName:Ka,cancel:!1,rowIndex:a}),!d.cancel){if(h&&h["delete"]&&h["delete"].enabled&&!c.confirm(o(h["delete"].template,f.view[a])))return;f.removeAtView(a),g&&!g.batch&&f.save(!1),e.trigger(Ka,{rowIndex:a})}},_editButtonClicked:function(c,d){var e=this,f=e._editing,g=e.dataSource,h=a(d).parent(),i=e.trigger(ha,{commandName:Ha,cancel:!1,row:h,cell:d,index:e._getRowIndex(h)});i.cancel||(e._editingInProcess=!0,g.tracker&&g.tracker.changes&&g.tracker.changes.added&&g.tracker.changes.added.length>0?g.cancel():"popup"!=e.options.editing.mode?(e._closeAllEditedRows(),f&&f.options.enabled&&f._putRowInEditMode(h),e._changeEditColumnButtons(c,d)):b.ui.Window&&e._initializePopupForm(c),e.trigger(Ha,{row:a(d).parent(),cell:d,index:e._getRowIndex(a(d).parent())}))},_initializePopupForm:function(c,d){var e,f,g,h,i,j=this,k=j._editing,l=j.dataSource;for(e=a('<div class="sui-modal-popup-edit-window"/>').appendTo(E.body),f=a('<div class="sui-edit-form-container"/>'),g=j.options.columns,h=0;h<g.length;h++)if(i=g[h],i.editable!==!1&&i.field){var m=z(l.schema.options.fields)?l.schema.options.fields[i.field].type:String,n=l.editView(c).data,o=r(n,i.field);j._windowEditingIndex=c,a('<div class="sui-edit-form-label"><label for="'+i.field+'">'+(i.caption?i.caption:i.field)+"</label></div>").appendTo(f);var p=a('<div class="sui-edit-field"></div>').appendTo(f);if(i.editor)k._instantiateCustomEditor(i,p,n,0,!1,i.field);else switch(m){case Number:k._instantiateNumeric(p,o,!1,i.field);break;case Date:k._instantiateDatePicker(p,o,!1,i.field);break;case String:k._instantiateTextBox(p,o,!1,i.field);break;case Boolean:k._instantiateCheckBox(p,o,!1,i.field)}}var q=a('<div class="sui-update-buttons sui-popup-buttons"></div>').appendTo(f),s=a("<button type='button'>Save</button>").appendTo(q),t=a("<button type='button'>Cancel</button>").appendTo(q);if(b.ui.Button){var u=new b.ui.Button(s,{events:{click:J(j._updateButtonClicked,j)}}),v=new b.ui.Button(t,{events:{click:J(j._cancelButtonClicked,j)}});j._buttons=[],j._buttons.push({index:1e4,button:u}),j._buttons.push({index:1e4,button:v})}f.appendTo(E.body),j.popupWindow=new b.ui.Window(e,{title:d?"Insert":"Edit",draggable:{enabled:!1},events:{close:J(j._cancelButtonClicked,j)},height:a(".sui-edit-form-container").height()+57,modal:!0}),j.popupWindow.content(f),j.popupWindow.resize({width:a(".sui-modal-popup-edit-window").width(),height:a(".sui-edit-form-container").height()+66}),j.trigger(d?Pa:Oa)},_changeEditColumnButtons:function(a,b){var c=this;c._removeButtons(b,a),c._buildButton({caption:"Update",click:c._updateButtonClicked,cls:"sui-update"},b,a),c._buildButton({caption:"Cancel",click:c._cancelButtonClicked,cls:"sui-cancel"},b,a),b.addClass("sui-update-buttons")},_removeButtons:function(a,b){for(var c=this,d=c._buttons.length;d--;)c._buttons[d].index==b&&(c._buttons[d].button.destroy(),c._buttons.splice(d,1));a.removeClass("sui-update-buttons").empty()},_updateButtonClicked:function(a,b){var c=this;return B(c._windowEditingIndex)||(a=c._windowEditingIndex),c._updateItem(a,b),c._editing._errorDuringEdit?void(c._editing._errorDuringEdit=!1):(c._putRowInViewMode(a,b),void("popup"===c.options.editing.mode&&c._removePopupWindow()))},_updateItem:function(a,b){var c,e,f,g,h,i,j,k=this,l=k.dataSource,m=(k.pager,[]),n=!0;if(l.group&&l.group.length>0&&"popup"!=k.options.editing.mode)for(h=k.contentTable.find(".sui-row, .sui-alt-row"),i=k.contentTable.find("tr").get(a),j=0;j<h.length;j++)if(h[j]==i){a=j;break}c=l.editView(a);for(g in c.data)c.data.hasOwnProperty(g)&&(null!=c.data[g]&&(n=!1),k._editing._editors[g]&&("custom"==k._editing._editors[g]?(f=k.trigger("getCustomEditorValue",{field:g,value:null}),e=f.value,k._editing._editors[g]=null):e=k._editing._editors[g].value?k._editing._editors[g].value():k._editing._editors[g].checked?k._editing._editors[g].checked():d,c.data[g]!=e&&m.push(g),(B(e)||null==e)&&(e=k._getDefaultValue(g)),c.set(g,e)));return k._editing._errorDuringEdit?void(m.length=0):(k._editing.options.batch||(f=k.trigger(ha,{commandName:Ja,cancel:!1}),f.cancel||(l.save(!1),k.trigger(Ja))),k._populateInsertedItem=n,m)},_getDefaultValue:function(a){var c,d=this,e=d.dataSource.schema;return e&&e.options.fields?(c=e.options.fields,b.Model.def(r(c,a+".type"),r(c,a+".def"),r(c,a+".nullable"))):""},_closeAllEditedRows:function(){var b,c,d=this,e=d.contentTable.find(".sui-editable-cell");e.length>0&&(b=e.get(0).parentNode.rowIndex,c=d.contentTable.find(".sui-update-buttons").get(0),d._cancelButtonClicked(b,a(c)))},_cancelButtonClicked:function(a,b){var c,d,e,f=this,g=f.dataSource,h=f.trigger(ha,{commandName:Ga,cancel:!1,rowIndex:a,cell:b});if(!h.cancel){if(g.tracker&&g.tracker.changes&&g.tracker.changes.added&&g.tracker.changes.added.length>0)g.cancel(),"popup"===f.options.editing.mode&&f._removePopupWindow();else if("popup"!=f.options.editing.mode)f._putRowInViewMode(a,b);else{for(c=f.options.columns,d=0;d<c.length;d++)e=f._editing._editors[c[d].field],e&&(v(e.destroy)&&f._editing._editors[c[d].field].destroy(),delete f._editing._editors[c[d].field]);f._removePopupWindow()}f.trigger(Ga)}},_removePopupWindow:function(){var b=this;b._removeButtons(a(".sui-window .sui-update-buttons"),1e4),b.popupWindow.destroy(),a(".sui-modal-popup-edit-window").remove()},_getRowIndex:function(b){var c=a(b).data(Sa);return z(c)?c:-1},_putRowInViewMode:function(b,c){var d,e,f,g,h=this,i=h.options,j=i.navigation,k=h.dataSource,l=h.contentTable,m=b,n=-1;if(k.group&&k.group.length>0&&"popup"!=i.editing.mode)for(f=l.find(">tbody > tr.sui-row, >tbody > tr.sui-alt-row"),e=l.find(">tbody > tr").get(b),g=0;g<f.length;g++)if(f[g]==e){m=g;break}d=k.view[m],c&&"popup"!=i.editing.mode&&h._removeButtons(c,b),e=l.find(">tbody > tr").get(b);var o=parseInt(a(e).attr("data-group-level"),10);for(j&&(n=a(e).children("td").index(h._activeCell)),h._editing._destroyRow(b),e=h._renderRow(m,h.contentTable.tbody,d,b),j&&n>-1&&(h._activeCell=a(e).children("td").eq(n),a(h._activeCell).focus()),g=0;g<o;g++)a('<td class="sui-indent-cell sui-group-intend-cell"/>').prependTo(e);if(o&&e.attr("data-group-level",o),h._editing.options.batch){var p=e.children(".sui-cell");if(h._markedCells&&h._markedCells[b]){var q,r,s=h._markedCells[b];for(g=0;g<s.length;g++)q=s[g],r=a(p[q]).html(),a(p[q]).html("<span class='sui-updated-marker' />"+r)}}},_renderUpdateMarkers:function(b,c){var d,e,f,g=this,h=g.columns,i=g.contentTable.find(">tbody > tr").eq(c).children(".sui-cell");for(d=0;d<b.length;d++)for(e=0;e<h.length;e++)h[e].field===b[d]&&(f=a(i[e]).html(),a(i[e]).html('<span class="sui-updated-marker"/>'+f),g._markedCells?(g._markedCells[c]||(g._markedCells[c]=[]),g._markedCells[c].push(e)):(g._markedCells={},g._markedCells[c]=[],g._markedCells[c].push(e)))},_selection:function(){var a=this,b=a.options;b.selection&&(a._selectable&&a._selectable.destroy(),a._selectable=new $a(b.selection,a))},_filtering:function(){var a=this,b=a.options;b.filtering&&b.filtering.enabled&&(a._filter&&a._filter.destroy(),a._filter=new Ya(a))},_paging:function(c){var d,e=this,f=e.element;b.ui.Pager&&c&&(x(c)&&c instanceof b.ui.Pager?(e.pager=c,e.pager.dataSource=e.dataSource,e.pager.element.appendTo(f)):(d=a("<div/>").appendTo(f),d.addClass("sui-pager"),e.pagerWrapper=d,e.pager=new b.ui.Pager(d.get(0),K({},c,{dataSource:e.dataSource}))))},_reorder:function(){var a=this,b=a.options;b.columnReorder&&(a._columnReorder=new bb(a))},_expandCollapseDetailTemplate:function(b){var c=this,d=a(b.target).closest(".sui-row",c.contentTable);d.length||(d=a(b.target).closest(".sui-alt-row",c.contentTable)),c._toggleDetailTemplate(d)},_toggleDetailTemplate:function(b){var c,d=this,e=d.contentTable.find("tr:first").parent().children().not(".sui-detail-row"),f=N(b[0],e),g=d.dataSource.view,h=b.next(),i=d.options;h&&h.hasClass("sui-detail-row")?(h.toggle(),c=a(b.get(0).cells[0]),d._toggleClasses(c,"sui-expand-cell","sui-collapse-cell"),d._setExpandCollapseCellText(c,i.detailExpandText,i.detailCollapseText)):d._addDetailTemplate(g[f],b)},_setExpandCollapseCellText:function(a,b,c){B(c)&&(c="-"),B(b)&&(b="+");var d=this.options.detailCollapseCssClass,e=this.options.detailExpandCssClass;d=B(d)?"":" class = '"+d+"'",e=B(e)?"":" class = '"+e+"'",a.hasClass("sui-collapse-cell")?a.html("<span"+d+">"+c+"</span>"):a.hasClass("sui-expand-cell")&&a.html("<span"+e+">"+b+"</span>")},_addDetailTemplate:function(b,c){var d,e=this,f=e.options,g=a("<tr class='sui-detail-row'/>");e._canExpandCollapse()&&(d=a("<td class='sui-cell sui-indent-cell'/>"),R&&d.html("&nbsp;"),d.appendTo(g));var h=a('<td class="sui-detail-cell" colspan="'+e._getVisibleColumnCount()+'"></td>'),i=e.trigger(ha,{commandName:va,cancel:!1,detailCell:h,item:b});if(!i.cancel&&(h.appendTo(g),f.detailTemplate&&h.html(o(f.detailTemplate,b)),c?g.insertAfter(c):g.appendTo(e.contentTable.tbody),e.trigger(va,{detailCell:h,item:b}),c)){var j=a(c.get(0).cells[0]);e._toggleClasses(j,"sui-expand-cell","sui-collapse-cell"),e._setExpandCollapseCellText(j,f.detailExpandText,f.detailCollapseText)}},_toggleClasses:function(a,b,c){a.hasClass(b)?(a.removeClass(b),a.addClass(c)):(a.removeClass(c),a.addClass(b))},_resizing:function(){var a=this;a.options.resizing&&a.options.scrolling&&(a._columnResizing=new Xa(a))},_initToolbar:function(){var a=this,b=a.options;b.toolbar&&(a._toolbar=new Ua(b.toolbar,a))},_initEditing:function(){var a=this,b=a.options;b.editing&&(a._buttons=[],a._editing=new Va(b.editing,a))},_refreshOnSort:function(){this._sortingInProgress=!0,this.dataSource.read()},_dsStartHandler:function(){this.loading(!0)},_initNavigation:function(){var b=this,c=b.element,d=b._eventNS+"nav",e=".sui-headercell[tabindex], .sui-filter-cell[tabindex], .sui-cell[tabindex], .sui-footer-cell[tabindex]";b.options.navigation&&(c.addClass("sui-grid-nav").off(d).on(da+d,e,function(c){a(b._activeCell).attr(Z,"-1"),b._activeCell=a(this),a(b._activeCell).attr(Z,"0")}).on(ea+d,e,function(a){}),b._initActiveCell(),a(b._activeCell).attr(Z,"0"))},_initActiveCell:function(){var b=this;(a(b._activeCell).length<=0||!a(b._activeCell).is(":visible"))&&(b._activeCell=a(b.element).find(".sui-cell[tabindex]").first(),a(b._activeCell).length<=0&&(b._activeCell=a(b.element).find(".sui-headercell[tabindex]").first()))},_cellEditable:function(b){return a(b).attr(W)!=$&&!!a(b).hasClass("sui-editable-cell")},_keydown:function(b){var c,d=this,e=d.element,f=b.keyCode,h=d.options,i=h.navigation,j=h.editing,k=h.selection,l=b.ctrlKey,m=(b.shiftKey,d.pager),n=!1,o=d._cellEditable(d._activeCell);switch(f){case t.UP:i&&(o||(c=d._getNextNavCell("up"),c&&(a(c).focus(),n=!0)));break;case t.DOWN:i&&(o||(c=d._getNextNavCell("down"),c&&(a(c).focus(),n=!0)));break;case t.LEFT:i&&(o||(c=d._getNextNavCell("left"),c&&(a(c).focus(),n=!0)));break;case t.RIGHT:i&&(o||(c=d._getNextNavCell("right"),c&&(a(c).focus(),n=!0)));break;case t.HOME:i&&(o||(c=l?a(e).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").first():d._getNextNavCell("first"),c&&(a(c).focus(),n=!0)));break;case t.END:i&&(o||(c=l?a(e).find(".sui-cell[tabindex], .sui-headercell[tabindex], .sui-footer-cell[tabindex]").last():d._getNextNavCell("last"),c&&(a(c).focus(),n=!0)));break;case t.ENTER:i&&(a(d._activeCell).hasClass("sui-cell")?j&&(o?d._updateButtonClicked(a(d._activeCell).parent().get(0).rowIndex,a(d._activeCell)):d._editing._editingTriggered(b),n=!0):a(d._activeCell).hasClass("sui-headercell")&&(a(d._activeCell).children(".sui-link").length>0&&(d.one(la,J(d.focus,d)),a(d._activeCell).children(".sui-link").first().click()),n=!0));break;case t.PAGEUP:i&&(m&&m.hasPrev()&&(d.one(la,J(d.focus,d)),d.pager.prev()),n=!0);break;case t.PAGEDOWN:i&&(m&&m.hasNext()&&(d.one(la,J(d.focus,d)),d.pager.next()),n=!0);break;case t.ESC:o&&(d.cancelEditing(),i&&a(d._activeCell).focus(),n=!0);break;case t.SPACE:i&&k&&d._selectable&&!o&&(d._selectable.elements=g(b,d.contentTable,d.frozenContentTable),d._selectable.elements&&d._selectable._performAndProcessSelection(b),n=!0)}n&&b.preventDefault()},_getNextNavCell:function(b){var c,d=this,e=(d.element,d._activeCell);return(!e||a(e).length<=0)&&(e=a(d.element).find('.sui-cell[tabindex="0"], .sui-headercell[tabindex="0"]').first()),"left"==b?c=d.__findPrevFocusCell(e):"right"==b?c=d.__findNextFocusCell(e):"up"==b?c=d.__findAboveFocusCell(e):"down"==b?c=d.__findBelowFocusCell(e):"first"==b?c=d.__findFirstFocusCell(e):"last"==b&&(c=d.__findLastFocusCell(e)),c&&a(c).length>0?a(c).get(0):null},__findFirstFocusCell:function(a){for(var b,c=this,d=c.__findPrevFocusCell(a);d&&d.length>0;)b=d,d=c.__findPrevFocusCell(d);return b},__findLastFocusCell:function(a){for(var b,c=this,d=c.__findNextFocusCell(a);d&&d.length>0;)b=d,d=c.__findNextFocusCell(d);return b},__findPrevFocusCell:function(b){for(var c=a(b).prev();c&&c.length>0;){if(f(c,Z))return c;c=a(b).prev()}return d},__findNextFocusCell:function(b){for(var c=a(b).next();c&&c.length>0;){if(f(c,Z))return c;c=a(b).next()}return d},__findAboveFocusCell:function(b){for(var c,e=this,g=a(b).closest("tr"),h=a(b).index(),i=e.headerTable.find(">thead > tr").add(e.contentTable.find(">tbody > tr")).add(e.contentTable.find(">tfoot > tr")),j=a(i).index(g);j>0;){if(c=a(a(i)[j-1]).children().eq(h),f(c,Z))return c;j--}return d},__findBelowFocusCell:function(b){for(var c,e=this,g=a(b).closest("tr"),h=a(b).index(),i=e.headerTable.find(">thead > tr").add(e.contentTable.find(">tbody > tr")).add(e.contentTable.find(">tfoot > tr")),j=a(i).index(g);j<i.length-1;){if(c=a(a(i)[j+1]).children().eq(h),f(c,Z))return c;j++}return d},focus:function(){var b=this;b.options.navigation?(b._initActiveCell(),a(b._activeCell).length>0?a(b._activeCell).focus():j(b.element)):j(b.element)},refresh:function(d){var e=this,f=d?d.dataSource:null,g=e._eventNS;d=b.extend([m],e.options,d),f&&(d.dataSource=f);var h,i=e.element,j=d.scrolling,k=e.pager?e.pager.options:d.paging,l=0;j&&e.contentWrapper&&(l=e.contentWrapper.get(0).scrollLeft),e._destroyInternal(),h=e.dataSource=n.create(d.dataSource),i.attr(U,"grid").on(na+g,J(e._keydown,e)),d.editing||i.attr(W,$),h.on(ca+g,J(e._renderData,e)).on(fa+g,J(e._dsStartHandler,e)),a(c).on(ra+g,J(e._resizeHandler,e)),e._resolveColumns(d.columns),e._createWrappers(),e._createHeaderTable(),e._createContentTable(),e._initToolbar(),e._initEditing(),e._filtering(),e._paging(k),e._resizing(),e._reorder(),e._initNavigation(),e.pager||e.dataSource.read(),e._sorting(),l&&(e.contentWrapper.get(0).scrollLeft=l)},loading:function(a,c){var d=this,e=function(){d.loadingPanel&&d.loadingPanel.show()};b.ui.LoadingPanel&&(a?(d.loadingPanel||(d.loadingPanel=new b.ui.LoadingPanel(d.element.get(0))),c?e():d.loadingPanelTimeout=setTimeout(e,50)):d.loadingPanel&&(clearTimeout(d.loadingPanelTimeout),d.loadingPanelTimeout=null,d.loadingPanel.hide()))},select:function(b){var c=this,d=c._selectable;return b=w(b)?c.contentTable.find(b):a(b),b.length?(d.multiple||(d.clear(),b=b.first()),void d.select(b)):d.select()},selectedRowIndices:function(){var b=this,c=[],d=[];return b.contentTable.children("tbody").children(".sui-row, .sui-alt-row").each(function(){if(a(this).hasClass(ba)){var e=b._getRowIndex(a(this));c.push(e),d.push(e>=0?b.dataSource.getDataIndex(e):e)}}),{view:c,data:d}},clearSelection:function(){this._selectable.clear()},sort:function(a,b,c){this.sorting&&this.sorting._sort(a,b,c)},_getItemRow:function(b){return a(A(b)?this.contentTable.children("tbody").children(".sui-row, .sui-alt-row").get(b):b)},expandRow:function(a){var b=this,c=b._getItemRow(a),d=c.next();d.hasClass("sui-detail-row")?d.css(Qa)==Ra&&b._toggleDetailTemplate(c):b._toggleDetailTemplate(c)},collapseRow:function(a){var b=this,c=b._getItemRow(a),d=c.next();d.hasClass("sui-detail-row")?d.css(Qa)!=Ra&&b._toggleDetailTemplate(c):(b._toggleDetailTemplate(c),c.next().toggle())},reorderColumn:function(b,c,d){var e,f=this,g=f.element,h=f.columns,i=f.options.columns||[],j=f.headerWrapper,k="before",l=j.find(".sui-columnheader").first().find(".sui-indent-cell").length;if(b=+b,c=+c,isNaN(b)||isNaN(c)||b<0||c<0||b>h.length-1||c>h.length-1)throw new Error("Invalid index in column reorder.");b!==c&&(c>b&&(k="after"),e=h[b],!e.visible||!d&&e.locked||(e=h.splice(b,1)[0],h.splice(c,0,e),e=i.splice(b,1)[0],i.splice(c,0,e),b+=l,c+=l,g.find(".sui-gridheader col:nth-child("+(b+1)+")").add(g.find(".sui-gridheader .sui-columnheader th:nth-child("+(b+1)+")")).add(g.find(".sui-gridheader .sui-filter-row th:nth-child("+(b+1)+")")).add(g.find(".sui-gridcontent col:nth-child("+(b+1)+")")).add(g.find(".sui-gridcontent tr:not(.sui-detail-row) td:nth-child("+(b+1)+")")).each(function(){a(this).parent().children().eq(c)[k](this)})))},addRow:function(a){return this.dataSource.add(z(a)?a:{})},insertRow:function(a,b){return this.dataSource.insertView(a,z(b)?b:{})},saveChanges:function(){this.dataSource.save()},revertChanges:function(){this.dataSource.cancel()},dataItem:function(a){return this.dataSource.view[a]},editCell:function(a,b){var c=this,d=c.contentTable.find(">tbody > tr").eq(a).children("td").eq(b).get(0);c._editingInProcess=!0,c._editing._putCellInEditMode(d,a)},editRow:function(b){var c=this,d=c.contentTable.find(">tbody > tr").eq(b).get(0);c._editingInProcess=!0,c._editing._putRowInEditMode(a(d),0)},editRowPopup:function(a){var c=this;c._editingInProcess=!0,b.ui.Window&&c._initializePopupForm(a)},cancelEditing:function(){var b,c,d=this,e=d.contentTable.find(".sui-editable-cell");e.length>0&&(b=e.get(0).parentNode.rowIndex,c=d.contentTable.find(".sui-update-buttons").get(0),d._putRowInViewMode(b,a(c))),d._editingInProcess=!1},deleteRow:function(a){this.dataSource.removeAtView(a)},filter:function(){var a=this,b=a.dataSource,c=[].slice.call(arguments);return c.length>0?(b.filter=c[0],void b.read()):b.filter},group:function(a,b,c,d){var e=this,f=e.dataSource.group;f?f.splice(b,0,{field:a,order:c,aggregates:d}):(e.dataSource.group=[],e.dataSource.group.push({field:a,order:c,aggregates:d}))},ungroup:function(a){var b,c=this,d=c.dataSource.group;for(c.headerTable.thead.find(".sui-columnheader > .sui-indent-cell").remove(),b=0;b<d.length;b++)d[b].field==a&&(d.splice(b,1),0===d.length&&(c.dataSource.group=null),c.dataSource.read())},collapseGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;)if(a=a.next().css(Qa,Ra),a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);d<=c&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1},expandGroup:function(a){for(var b=!0,c=parseInt(a.attr("data-group-level"),10);b;){if(a=a.next().css(Qa,""),a.hasClass("sui-group-header")&&a.find(".sui-expand").length>0)return;if(a.next().length>0){var d=parseInt(a.next().attr("data-group-level"),10);d<=c&&a.next().hasClass("sui-group-header")&&(b=!1)}else b=!1}},_getColumnByField:function(a){var b,c=this,e=c.columns||[];for(b=0;b<e.length;b++)if(e[b].field===a)return e[b];return d},_refreshColVisibility:function(){var a,b=this,c=b.columns,d=c.length,e=!1;for(a=0;a<d;a++)if(!c[a].visible){e=!0;break}if(e)for(a=0;a<d;a++)c[a].visible?b.showColumn(c[a].field):b.hideColumn(c[a].field)},_getNextVisibleColumnRealIndex:function(a){var b,c=this,d=c.columns;for(b=a.index+1;b<d.length;b++)if(d[b].visible)return b;return-1},isHidden:function(a){var b=this._getColumnByField(a);return b?!b.visible:d},hideColumn:function(b){var c=this,d=(a(c.element),c._getColumnByField(b));d&&!d.locked&&(a(c.headerTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ta)==b)return c._gridColumns[b].headerCol=a(this),a(this).detach(),!1}),a(c.contentTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ta)==b)return c._gridColumns[b].contentCol=a(this),a(this).detach(),!1}),c._changeColumnVisibility(b,"hide"),d.visible=!1,c._afterColumnVisibilityChange())},showColumn:function(b){var c,e,f,g,h,i=this,j=(a(i.element),i._getColumnByField(b)),k=a(i.headerTable).find("colgroup"),l=a(i.contentTable).find("colgroup");j&&!j.locked&&(c=i._gridColumns[b],e=c.headerCol,f=c.contentCol,g=i._getNextVisibleColumnRealIndex(c),g===-1?(k.append(e),l.append(f)):(h=i.columns[g].field,k.find("col").each(function(){if(a(this).data(Ta)==h)return a(e).insertBefore(a(this)),!1}),l.find("col").each(function(){if(a(this).data(Ta)==h)return a(f).insertBefore(a(this)),!1})),i._changeColumnVisibility(b,"show"),c.headerCol=c.contentCol=d,j.visible=!0,i._afterColumnVisibilityChange())},_changeColumnVisibility:function(b,c){var d,e,f=this,g=a(f.element),h=a(f.headerTable).find(".sui-columnheader").first(),i=a(f.headerTable).find(".sui-filter-row").first(),j=-1;if(h.length&&a(h).children().each(function(c){if(a(this).attr("data-field")==b)return j=c,!1}),!(j<0))for(a(h.find("th")[j])[c](),a(i.find("th")[j])[c](),d=g.find("> .sui-gridcontent > table > tbody > tr"),0===d.length&&(d=g.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===d.length&&(d=g.find("> .sui-gridcontent > .sui-content > table > tbody > tr")),e=0;e<d.length;e++)a(d[e].cells[j])[c]()},_afterColumnVisibilityChange:function(){var b=this,c=b._getVisibleColumnCount(),d=b.dataSource,e=d.group?d.group.length:0;a(b.contentTable).find(".sui-grid-norecords-cell, .sui-detail-cell, .sui-group-header-cell").each(function(){a(this).hasClass("sui-group-header-cell")?a(this).attr("colspan",c+e-D(a(this).parent().attr("data-group-level"))+1):a(this).attr("colspan",c)})},_getVisibleColumnFields:function(){var a,b=this,c=b.columns||[],d=c.length,e=[];for(a=0;a<d;a++)c[a].visible&&e.push(c[a].field);return e},_refreshFrozenCols:function(){var a,b=this,c=b.columns,d=c.length,e=!1;for(a=0;a<d;a++)if(c[a].locked){e=!0;break}if(e)for(b._initFrozenContainers(),a=0;a<d;a++)c[a].locked&&b.lockColumn(c[a].field)},_initFrozenContainers:function(){var b=this,c=b.options,d=c.scrolling;b.frozenHeaderWrapper||(b.frozenHeaderWrapper=a('<div class="sui-header-locked"/>').prependTo(d?b.headerWrapper.parent():b.headerWrapper),b.frozenHeaderTable=a('<table class="sui-table sui-non-selectable"'+(R?' cellspacing="0"':"")+'><colgroup/><thead><tr class="sui-columnheader"/>'+(c.filtering&&c.filtering.enabled?'<tr class="sui-filter-row"/>':"")+'</thead><tbody class="sui-hide"/></table>').appendTo(b.frozenHeaderWrapper)),b.frozenContentWrapper||(b.frozenContentWrapper=a('<div class="sui-content-locked"/>').prependTo(d?b.contentWrapper.parent():b.contentWrapper),b.frozenContentWrapper.height(b.frozenContentWrapper.parent().find(".sui-content").first().height()),b.frozenContentTable=a('<table class="sui-table'+(c.rowHover?" sui-hover":"")+'"'+(R?' cellspacing="0"':"")+'><colgroup/><tbody/><tfoot><tr class="sui-grid-footer"/></tfoot></table>').appendTo(b.frozenContentWrapper),b._hasDetailTemplate()&&(b._canExpandCollapse()&&b.frozenContentTable.addClass("sui-expandable"),b.frozenContentTable.on(sa+b._eventNS,"> tbody > tr > .sui-expand-cell, > tbody > tr > .sui-collapse-cell",J(b._expandCollapseDetailTemplate,b))))},_destroyFrozenContainers:function(){var b=this;b.frozenHeaderWrapper&&(a(b.frozenHeaderWrapper).remove(),b.frozenHeaderWrapper=null),b.frozenContentWrapper&&(a(b.frozenContentWrapper).find(".sui-table").off(b._eventNS),a(b.frozenContentWrapper).remove(),b.frozenContentWrapper=null)},isLocked:function(a){var b=this._getColumnByField(a);return b?b.locked:d},lockColumn:function(b){var c,d,e=this,f=a(e.element),g=e.options.filtering,h=e._getColumnByField(b),i=-1,j=e._footer;if(h&&h.visible){if(a(e.headerTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ta)==b)return a(this).appendTo(a(e.frozenHeaderTable).find("colgroup")),!1}),a(e.contentTable).find("colgroup").first().find("col").each(function(){if(a(this).data(Ta)==b)return a(this).appendTo(a(e.frozenContentTable).find("colgroup")),!1}),a(e.headerTable).find(".sui-columnheader").children().each(function(c){if(a(this).attr("data-field")==b)return i=c,a(this).appendTo(a(e.frozenHeaderTable).find(".sui-columnheader")),!1}),g&&g.enabled&&i>=0&&a(e.headerTable).find(".sui-filter-row").children().each(function(c){if(a(this).attr("data-field")==b)return a(this).appendTo(a(e.frozenHeaderTable).find(".sui-filter-row")),!1}),j&&i>=0){var k=a(e.frozenContentTable).find("> tfoot > .sui-grid-footer");a(j).find(".sui-grid-footer td:eq("+i+")").appendTo(k)}if(i>=0){c=f.find("> .sui-gridcontent > table > tbody > tr"),0===c.length&&(c=f.find("> .sui-gridcontent > .sui-virtualized > table > tbody > tr")),0===c.length&&(c=f.find("> .sui-gridcontent > .sui-content > table > tbody > tr"));var l=a(e.frozenContentTable).find("tbody"),m=l.children().length>0;for(d=0;d<c.length;d++){var n=null;n=m?a(l).children()[d]:a(c[d]).clone(!0,!1).empty().appendTo(l),a(c[d].cells[i]).appendTo(n)}}h.locked=!0,e._adjustWidthsLocked(),e._adjustHeightsLocked()}},unlockColumn:function(b){var c,d,e,f,g=this,h=(a(g.element),g.options.filtering),i=g.columns,j=g._footer,k=g._getColumnByField(b),l=-1,m=-1;if(k&&k.visible){for(a(g.frozenHeaderTable).find("colgroup").first().children().each(function(){if(a(this).data(Ta)==b)return c=a(this),l=a(this).index(),!1}),a(g.frozenContentTable).find("colgroup").first().children().each(function(){if(a(this).data(Ta)==b)return d=a(this),m=a(this).index(),!1}),f=0;f<i.length;f++)if(i[f].field===b){f<=i.length-2&&(e=i[f+1].field);break}if(e)a(g.headerTable).find("> colgroup col").each(function(b){if(a(this).data(Ta)===e){if(a(c).insertBefore(a(this)),a(g.frozenHeaderTable).find(".sui-columnheader th:eq("+l+")").insertBefore(a(g.headerTable).find(".sui-columnheader th:eq("+b+")")),h&&h.enabled&&a(g.frozenHeaderTable).find(".sui-filter-row th:eq("+l+")").insertBefore(a(g.headerTable).find(".sui-filter-row th:eq("+b+")")),j){var d=a(g.frozenContentTable).find("> tfoot > .sui-grid-footer");a(d).find("td:eq("+l+")").insertBefore(a(j).find(".sui-grid-footer td:eq("+b+")"))}return!1}}),a(g.contentTable).find("> colgroup col").each(function(b){if(a(this).data(Ta)===e){a(d).insertBefore(a(this));var c=a(g.contentTable).find(">tbody").first().children();return a(g.frozenContentTable).find(">tbody > tr").each(function(d){a(this).find("td:eq("+m+")").insertBefore(a(c[d]).find("td:eq("+b+")"))}),!1}});else{if(a(g.headerTable).find("colgroup").append(c),a(g.contentTable).find("colgroup").append(d),a(g.frozenHeaderTable).find(".sui-columnheader th:eq("+l+")").appendTo(a(g.headerTable).find(".sui-columnheader")),h&&h.enabled&&a(g.frozenHeaderTable).find(".sui-filter-row th:eq("+l+")").appendTo(a(g.headerTable).find(".sui-filter-row")),j){var n=a(g.frozenContentTable).find("> tfoot > .sui-grid-footer");a(n).find("td:eq("+l+")").appendTo(a(j).find(".sui-grid-footer"))}var o=a(g.contentTable).find(">tbody").first().children();a(g.frozenContentTable).find(">tbody > tr").each(function(b){a(this).find("td:eq("+m+")").appendTo(a(o[b]))})}k.locked=!1,g._adjustWidthsLocked(),g._adjustHeightsLocked()}},_adjustWidthsLocked:function(){var b=this;b.frozenHeaderWrapper&&(a(b.headerWrapper).parent().css(p.isRtl(b.element)?"padding-left":"padding-right",0),a(b.headerWrapper).outerWidth(a(b.headerWrapper).parent().innerWidth()-a(b.frozenHeaderWrapper).outerWidth()-p.scrollbar()),a(b.contentWrapper).outerWidth(a(b.contentWrapper).parent().innerWidth()-a(b.frozenContentWrapper).outerWidth()-1))},_adjustHeightsLocked:function(b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p=this,q=p.options.filtering,r=p._footer;if(p.frozenHeaderWrapper){for(g=a(p.frozenHeaderTable).find("tr").first(),g.height("auto"),h=D(g.height()),i=a(p.headerTable).find("tr").first(),i.height("auto"),j=D(i.height()),h>j?(g.height(h),i.height(h)):h<j&&(g.height(j),i.height(j)),q&&q.enabled&&(k=a(p.frozenHeaderTable).find("tr.sui-filter-row").first(),k.height("auto"),l=D(k.height()),m=a(p.headerTable).find("tr.sui-filter-row").first(),m.height("auto"),n=D(m.height()),l>n?(k.height(l),m.height(l)):l<n&&(k.height(n),m.height(n))),c=a(p.frozenContentTable).find("tbody").first().children(),e=a(p.contentTable).find("> tbody").children(),o=0;o<e.length;o++)a(c[o]).height("auto"),d=D(a(c[o]).height()),a(e[o]).height("auto"),f=D(a(e[o]).height()),d>f?(a(c[o]).height(d),a(e[o]).height(d)):d<f&&(a(c[o]).height(f),a(e[o]).height(f));if(r){var s,t,u=a(p.frozenContentTable).find("> tfoot > .sui-grid-footer"),v=a(r).find(".sui-grid-footer").first();u.height("auto"),s=D(u.height()),v.height("auto"),t=D(v.height()),s>t?(u.height(s),v.height(s)):s<t&&(u.height(t),v.height(t))}b&&p._initScrolling()}},exportExcel:function(){this._doExcelExport()},exportPdf:function(){this._doPdfExport()},_doExcelExport:function(){var a,b,c,e,f,g,h,i,j=this,k=j.options,l=[],m=[];q&&(h=j.trigger(ha,{commandName:"exportExcel",cancel:!1,exportOptions:K(!0,{},k.exportOptions)}),h.cancel||(j.loading(!0,!0),setTimeout(function(){a=K(!0,{proxy:d,excel:{fileName:"Untitled",fileFormat:"xlsx",noLegacyFallback:!1,author:d,created:new Date,producer:d,dataSource:d,readDataSource:!1,columnFields:d,header:{enabled:!0,style:{bold:!0},cells:d},worksheet:{name:"Sheet1",columns:d},worksheets:[],worksheetIndex:0}},h.exportOptions),b=a.excel,f=b.columnFields,f||(f=j._getVisibleColumnFields()),g=f.length,b.worksheet.columns||(b.worksheet.columns=L(f,function(a){return{autoWidth:!0}})),e=K(!0,{},b.worksheet),b.header&&b.header.enabled&&(b.header.cells?m.push({cells:b.header.cells}):m.push({cells:L(f,function(a){var c=j._getColumnByField(a);return{type:String,value:z(c)&&c.title?c.title:a,style:b.header.style}})})),c=n.create(b.dataSource?b.dataSource:j.dataSource),i=function(){var d,h,i,k,n=c.view||[],o=n.length,p=[];for(i=0;i<g;i++)p[i]=r(c,"schema.options.fields."+f[i]+".type");for(i=0;i<o;i++){var s,t,u=n[i],v=j.trigger(ha,{commandName:"exportExcelRow",cancel:!1,item:u,index:i,row:{}}),w=[];if(!v.cancel){for(s=K(!0,{},v.row),k=0;k<g;k++)t={type:z(s.type)?s.type:p[k],value:z(s.value)?s.value:r(u,f[k])},s.cells&&s.cells[k]&&K(!0,t,s.cells[k]),w.push(t);m.push({index:s.index,height:s.height,cells:w})}}e.rows=m,l=[].slice.call(b.worksheets),l.splice(b.worksheetIndex,0,e),h={created:b.created,author:b.author,worksheets:l},d="xml"==b.fileFormat?new q.ExcelXMLSpreadsheet(h):new q.OOXMLWorkbook(h),d.saveAs({fileName:b.fileName,forceExt:a.forceExt,proxy:a.proxy}),j.loading(!1)},b.readDataSource?c.read().always(i):i()},100)))},_doPdfExport:function(){var a,b,c,e,f,g,h,i,j,k=this,l=k.options;q&&(g=k.trigger(ha,{commandName:"exportPdf",cancel:!1,exportOptions:K(!0,{},l.exportOptions)}),g.cancel||(k.loading(!0,!0),setTimeout(function(){a=K(!0,{proxy:d,pdf:{fileName:"Untitled",author:d,created:new Date,size:"a4",orientation:"portrait",fontSize:10,dataSource:d,readDataSource:!1,columnFields:d,header:{enabled:!0,cells:d},margins:{left:72,top:72,bottom:72,right:72}}},g.exportOptions),b=a.pdf,e=b.columnFields,e||(e=k._getVisibleColumnFields()),f=e.length,b.header&&(j=!!b.header.enabled,b.header.cells&&(i=[].concat(b.header.cells))),
z(j)||(j=!0),z(i)||(i=L(e,function(a){var b=k._getColumnByField(a);return{field:a,title:b.title||a,width:b.width||d}})),c=n.create(b.dataSource?b.dataSource:k.dataSource),h=function(){var d,e,f,g,h=c.view||[],l=h.length,m=[],n=b.margins;for(d=0;d<l;d++)e=h[d],f=k.trigger(ha,{commandName:"exportPdfRow",cancel:!1,item:e,index:d,row:{}}),f.cancel||m.push(K(!0,e,f.row));g=new q.PDFDocument({author:b.author,created:b.created}),g.addPage(b.size,b.orientation),g.table(n.left,n.top,m,i,{margins:n,printHeader:j,fontSize:b.fontSize}),g.saveAs({fileName:b.fileName,forceExt:a.forceExt,proxy:a.proxy}),k.loading(!1)},b.readDataSource?c.read().always(h):h()},100)))}});cb.defaults=k,b.ui.plugin("Grid",cb)}(jQuery,shield,this);
!function(a,b,c,d){var e,f,g=b.ui.Widget,h=(b.Class,b.DataSource),i=b.RecursiveDataSource,j=(b.ui.Position,b.Constants.KeyCode),k=b.strid,l=document,m=a.proxy,n=a.each,o=(a.extend,b.error),p=b.format,q=b.is.defined,r=b.is["boolean"],s=(b.is.integer,b.is.func),t=b.is.array,u=b.is.object,v=b.is.string,w=b.support.browser,x="role",y="aria-expanded",z="click",A="dbl"+z,B="focus",C="blur",D="change",E="keydown",F="mousedown",G="tabindex",H="disabled",I="true",J="false",K="up",L="down",M="left",N="right",O="checked",P="li",Q="ul",R="visibility",S="hidden",T="visible",U="sui-treeview-list-item",V="sui-treeview-list-item-idx",W="sui-treeview-list-item-parent",X="sui-treeview-list-item-ds",Y="sui-treeview-list-items-ds",Z="sui-treeview-list-item-checked",$="sui-treeview-list-item-loaded",_="sui-treeview-item-list-expanded",aa="sui-treeview-item-toggle-loading",ba="sui-treeview-item-selected",ca="sui-treeview-item-active",da="sui-treeview-item-disabled",ea="sui-treeview-item";e={cls:d,width:d,minWidth:d,height:d,dataSource:d,readDataSource:!0,animation:{enabled:!0,expandDuration:200,collapseDuration:150},checkboxes:{enabled:!1,children:!1,template:d},dragDrop:!1,dragDropScope:d,textTemplate:"{text}",hrefTemplate:"{href}",expandedTemplate:"{expanded}",checkedTemplate:"{checked}",disabledTemplate:"{disabled}",iconUrlTemplate:"{iconUrl}",iconClsTemplate:"{iconCls}",hasChildrenTemplate:function(a){return a&&(a.items&&a.items.length>0||a.hasChildren)},events:{}},f=g.extend({init:function(){g.fn.init.apply(this,arguments);var b,c,d,e,f,i,j=this,k=a(j.element),l=j.options,p=l.dieOnError,r=l.dataSource,s=l.cls;if(j._original=b=a(j.element),j._tagname=e=b.prop("tagName").toLowerCase(),i=j._eventNS=".shieldTreeView"+j.getInstanceId(),j._wrapper=d=b.wrap("<div/>").parent(),d.addClass("sui-treeview"+(s?" "+s:"")),b.hide(),j.element=k=a('<ul class="sui-treeview-list"/>').on(B+i,m(j._focus,j)).on(C+i,m(j._blur,j)).on(E+i,m(j._keydown,j)),b.after(k),n(["width","minWidth","height","maxHeight"],function(a,b){q(l[b])&&d.css(b,l[b])}),c=b.attr(G),k.attr(G,q(c)?c:"0"),r)j.dataSource=h.create(r);else{if(e!=Q)return j.destroy(),void o("shieldTreeView: No dataSource or underlying UL element found.",p);f=function(b){var c=[];return a(b).children(P).each(function(){var b,d=a(this),e=d.children(Q).length>0,g={cls:d.attr("data-class"),href:d.attr("data-href")?d.attr("data-href"):d.children().not(Q).first().attr("href"),disabled:d.attr("data-disabled")?d.attr("data-disabled"):q(d.attr(H))&&null!==d.attr(H),expanded:d.attr("data-expanded"),checked:d.attr("data-checked"),iconUrl:d.attr("data-icon-url"),iconCls:d.attr("data-icon-cls")};e?(b=d.clone(),b.children(Q).remove(),g.text=b.html()):g.text=d.html(),e&&(g.items=f(d.children(Q)[0])),c.push(g)}),c},j.dataSource=h.create({data:b,schema:{parse:f}})}j.dataSource.on(D+i,m(j._dsChange,j)),k.attr(x,"tree"),l.readDataSource&&j.dataSource.read()},refresh:function(a){this.refreshWithElement(this._original,a)},_dsChange:function(){var a=this,b=a.element,c=a.dataSource;a._renderItems(c,b,null,!0,!0,function(){a.trigger("dataBound",{dataSource:c,element:null})})},_destroyItems:function(b){var c=this;a(b).children("ul.sui-treeview-item-list").each(function(){c._destroyItems(a(this))}),a(b).children(".sui-treeview-item-content").find(".sui-treeview-item-text").each(function(){a(this).swidget("Draggable")&&a(this).swidget("Draggable").destroy(),a(this).swidget("Droppable")&&a(this).swidget("Droppable").destroy()}),a(b).children(".sui-treeview-item-content").find(".sui-checkbox").each(function(){a(this).swidget("CheckBox")&&a(this).swidget("CheckBox").destroy()});var d=a(b).data(Y);d&&d.off(c._eventNS),a(b).removeData(),a(b).empty()},_renderItems:function(a,b,c,d,e,f){var g,h,i,j=this,k=j.options,l=k.checkboxes,m=a.view,n=(m||[]).length,o=[],p=[];for(j._destroyItems(b),i=0;i<n;i++)g=j._renderItem(m[i],c,a,i),h=g.listItem,h.appendTo(b),g.itemExpanded&&o.push(h),g.itemChecked&&p.push(h);if(s(f)&&f(),d)for(i=0;i<o.length;i++)j._expand(o[i],!1,e);if(l.enabled&&l.children)for(i=0;i<p.length;i++)j._updateChecked(p[i])},_renderItem:function(c,e,f,g){var h,i,j,n,o,t,u,w,B,C,D,E=this,G=E.options,H=G.checkboxes,I=H.template,K=E.getInstanceId(),L=G.dragDropScope,M=function(){return a(this.element).clone().appendTo(l.body)},N=e?e.data(U):null,O=c.cls,P=E._hasChildren(c),Q=p.call(E,G.textTemplate,c),T=k();if(h=p(G.disabledTemplate,c),h=!!(r(h)&&h||"true"===h||"1"===h||1===h),i=p(G.expandedTemplate,c),i=!!(r(i)&&i||"true"===i||"1"===i||1===i),j=p(G.checkedTemplate,c),j=!!(r(j)&&j||"true"===j||"1"===j||1===j),n=p(G.hrefTemplate,c),v(n)&&"undefined"!==n||(n=d),o=p(G.iconUrlTemplate,c),v(o)&&"undefined"!==o||(o=d),t=p(G.iconClsTemplate,c),v(t)&&"undefined"!==t||(t=d),u=a('<li class="'+ea+" sui-unselectable"+(h?" "+da:"")+(q(O)?" "+O:"")+'"/>').data(U,c).data(V,g).data(W,e).data(X,f),D=a('<span class="sui-treeview-item-text" id="'+T+'">'+(n?'<a href="'+n+'">':"")+Q+(n?"</a>":"")+"</span>").on(F,m(E._itemClick,E,u)).on(A,m(E._itemDblClick,E,u)),w=a('<span class="sui-treeview-item-toggle"/>').on(z,m(E._toggleItem,E,u)).append(a('<span class="sui-treeview-item-toggle-collapsed"/>')),P||w.css(R,S),u.attr(x,"treeitem").attr("aria-describedby",T),P&&u.attr(y,J),H.enabled)if(u.data(Z,!!j),B=a('<span class="sui-treeview-item-check"/>'),v(I))B.html(p(I,{item:c,parent:N}));else if(s(I))I(B,c,N);else{var Y=a('<input type="checkbox"'+(j?' checked="checked"':"")+"/>").appendTo(B);b.ui.CheckBox?a(Y).shieldCheckBox({enabled:!h,enableThreeStates:!!H.children,events:{click:m(E._checkboxClick,E,u)}}):Y.on(z,m(E._checkboxClick,E,u))}return(o||t)&&(C=a('<span class="sui-treeview-item-icon"/>'),o?C.append('<img src="'+o+'"/>'):C.addClass(t)),u.append(a('<div class="sui-treeview-item-content"/>').append(w,B,D.prepend(C))),u.append(a('<ul class="sui-treeview-list sui-treeview-item-list"/>').attr(x,"group").hide()),G.dragDrop&&!h&&(D.shieldDraggable({scope:q(L)?L:"suiTv"+K,dragCls:"sui-treeview-item-text-dragging",helper:M,events:{start:m(E._dragStart,E,u),stop:m(E._dragStop,E,u)}}),D.shieldDroppable({scope:q(L)?L:"suiTv"+K,hoverCls:"sui-treeview-item-text-dropover",tolerance:{x:"touch",y:"intersect"},events:{over:m(E._dropOver,E,u),out:m(E._dropOut,E,u),drop:m(E._drop,E,u)}})),{listItem:u,itemExpanded:i,itemChecked:j,itemDisabled:h}},_isValidDragDrop:function(b,c){if(a(b).hasClass("sui-treeview-item-text")){var d=a(b).parent().parent().parent().parent().children(".sui-treeview-item-content").first().children(".sui-treeview-item-text").first();return d&&d.length>0&&c[0]===d[0]?c[0]!==d[0]:!(a(b).parent().parent().find(c[0]).length>0)}return!1},_dragStart:function(a,b){this.trigger("dragStart",{draggable:b.target.element,element:a,domEvent:b})},_dragStop:function(a,b){this.trigger("dragStop",{draggable:b.target.element,element:a,domEvent:b}),b.preventDefault()},_dropOver:function(b,c){var d,e=c.draggable,f=c.droppable,g=this._isValidDragDrop(e,f),h={draggable:e,droppable:f,element:b,valid:g,domEvent:c};g&&(h.sourceNode=a(e).closest("."+ea)),h.targetNode=a(f).closest("."+ea),d=this.trigger("droppableOver",h),!d.isDefaultPrevented()&&d.valid||c.preventDefault()},_dropOut:function(b,c){var d,e=c.draggable,f=c.droppable,g=this._isValidDragDrop(e,f),h={draggable:e,droppable:f,element:b,valid:g,domEvent:c};g&&(h.sourceNode=a(e).closest("."+ea)),h.targetNode=a(f).closest("."+ea),d=this.trigger("droppableOut",h)},_drop:function(b,c){var d,e=this,f=c.draggable,g=c.droppable,h=e._isValidDragDrop(f,g),i={draggable:f,droppable:g,element:b,cancelled:!0,skipAnimation:!!h,valid:h,domEvent:c};h&&(i.sourceNode=a(f).closest("."+ea)),i.targetNode=a(g).closest("."+ea),d=e.trigger("drop",i),c.cancelled=d.cancelled,c.skipAnimation=d.skipAnimation,d.isDefaultPrevented()&&c.preventDefault()},_hasChildren:function(a){var b=p(this.options.hasChildrenTemplate,a);return r(b)&&b||"true"===b||"1"===b||1===b},_isLoaded:function(b){return a(b).data($)===!0},_isExpanded:function(a){return a.hasClass(_)},_isFullyExpanded:function(a){var b=this,c=b.getParent(a);return c?b._isExpanded(a)&&b._isFullyExpanded(c):b._isExpanded(a)},_isDisabled:function(b){return a(b).hasClass(da)},_isSelected:function(b){return a(b).hasClass(ba)},_isActive:function(b){return a(b).hasClass(ca)},_isFocused:function(){return a(this.element).hasClass("sui-treeview-focus")},_focus:function(b){var c=this,d=c.element;w.ie&&l.activeElement!==a(d)[0]&&a(d).focus(),c._blurTimeout&&(clearTimeout(c._blurTimeout),c._blurTimeout=null),c._isFocused()||(a(c.element).addClass("sui-treeview-focus"),c.trigger(B))},_blur:function(b){var c=this;c._isFocused()&&(c._blurTimeout&&clearTimeout(c._blurTimeout),c._blurTimeout=setTimeout(function(){a(c.element).removeClass("sui-treeview-focus"),c.trigger(C)},100))},_selectItem:function(a,b,c){var d,e=this;e._isSelected(a)||c&&(d=e.trigger("select",{element:a,item:a.data(U)}),d.isDefaultPrevented())||(e._selectedItem&&e._selectedItem.removeClass(ba),e._selectedItem=a,a.addClass(ba),b&&e._activateItem(a,c))},_activateItem:function(a,b){var c=this;c._isActive(a)||(c._activeItem&&c._activeItem.removeClass(ca),c._activeItem=a,a.addClass(ca),b&&c.trigger(D,{element:a,item:a.data(U)}))},_itemClick:function(a,b){var c=this;w.ie&&setTimeout(m(c._focus,c)),c._selectItem(a,!0,!0)},_itemDblClick:function(a,b){var c=this;c._selectItem(a,!0,!0),c._toggleItem(a,b)},_getCheckBox:function(a){return a.children(".sui-treeview-item-content").children(".sui-treeview-item-check").find('input[type="checkbox"]').first()},_checkboxClick:function(a){var b=this;w.ie&&setTimeout(m(b._focus,b)),b._toggleCheck(a,!0)},_toggleCheck:function(a,b){this._setChecked(a,!a.data(Z),b)},_setChecked:function(b,c,d){var e=this,f=e.options.checkboxes.children,g=e._getCheckBox(b);g&&g.length>0&&(a(g).swidget("CheckBox")?(g=a(g).swidget("CheckBox"),g.checked(c)):c?g.attr(O,O):g.removeAttr(O),b.data(Z,c),f&&e._updateChecked(b),d&&e.trigger("check",{element:b,item:b.data(U),checked:c}))},_updateChecked:function(a){var b=this,c=a.data(Z);b._updateCheckedChildren(a,c),b._updateCheckedParents(a,c)},_updateCheckedChildren:function(b,c){var d=this;a(b).children("ul.sui-treeview-item-list").first().children(P).each(function(){var b=a(this),e=d._getCheckBox(b);a(e).swidget("CheckBox")?a(e).swidget("CheckBox").checked(c):c?e.attr(O,O):e.removeAttr(O),b.data(Z,c),d._updateCheckedChildren(b,c)})},_updateCheckedParents:function(b,c){var e,f=this,g=f.getParent(b),h=g?g.data(Z):d,i=c;g&&h!==!1&&(a(b).parent().children(P).each(function(){if(a(this).data(Z)!==c)return i=null,!0}),e=f._getCheckBox(g),a(e).swidget("CheckBox")?a(e).swidget("CheckBox").checked(i):i?e.attr(O,O):e.removeAttr(O),g.data(Z,i),f._updateCheckedParents(g,c))},_toggleItem:function(a,b){var c=this;w.ie&&setTimeout(m(c._focus,c)),c._isDisabled(a)||(c._isExpanded(a)?c._collapse(a,!0):c._expand(a,!0,!1))},_getToggleEl:function(b){return a(b).children(".sui-treeview-item-content").first().children(".sui-treeview-item-toggle").first()},_expand:function(b,c,d,e){var f,g,h,i=this,j=i.options.animation,k=b.children("ul.sui-treeview-item-list").first();if(k&&!(a(k).length<=0)&&(i.hasChildren(b)||!(k.children(P).length<=0)))return i._isExpanded(b)?void(s(e)&&e.call(i)):void(c&&(h=i.trigger("expand",{element:b,item:b.data(U)}),h.isDefaultPrevented())||(k.stop(!0,!0),k.hide(),f=i._getToggleEl(b),g=function(){k.slideDown(j.enabled&&!d?j.expandDuration:0,function(){b.addClass(_).attr(y,I),f.css(R,T),a(f).find("span").addClass("sui-treeview-item-toggle-expanded").removeClass("sui-treeview-item-toggle-collapsed"),s(e)&&e.call(i)})},i._isLoaded(b)?g():i._loadItem(b,d,g)))},_loadItem:function(b,c,d){var e,f=this,g=b.data(U),j=b.children("ul.sui-treeview-item-list").first(),k=b.data(X),l=f._getToggleEl(b),m=g.items||g.children;!j||a(j).length<=0||(t(m)||u(m)||m instanceof h?(a(l).addClass(aa),e=h.create(m),j.data(Y,e),e.on(D+f._eventNS,function(g){a(l).removeClass(aa),b.data($,!0),f._renderItems(this,j,b,!0,c,function(){f.trigger("dataBound",{dataSource:e,element:b}),s(d)&&d.call(f)})}),e.read({parent:g})):k&&k instanceof i?(a(l).addClass(aa),e=new i(k.options),j.data(Y,e),e.on(D+f._eventNS,function(g){a(l).removeClass(aa),b.data($,!0),f._renderItems(this,j,b,!0,c,function(){f.trigger("dataBound",{dataSource:e,element:b}),s(d)&&d.call(f)})}),e.read({parent:g})):(b.data($,!0),s(d)&&d.call(f)))},_expandPathSegment:function(a,b,c,d,e){var f,g,h=this,i=a.length;return d>i?void(s(e)&&e.call(h)):(f=[].slice.call(a).splice(0,d),g=h.getByPath(f),void(h._isExpanded(g)?h._expandPathSegment(a,b,c,d+1,e):h._expand(g,b,c,function(){h._expandPathSegment(a,b,c,d+1,e)})))},_expandPath:function(a,b,c,d){this._expandPathSegment(a,b,c,1,d)},_collapse:function(b,c){var d,e,f=this,g=f.options.animation,h=b.children("ul.sui-treeview-item-list").first();!f._isExpanded(b)||!h||a(h).length<=0||c&&(e=f.trigger("collapse",{element:b,item:b.data(U)}),e.isDefaultPrevented())||(d=f._getToggleEl(b),h.stop(!0,!0),h.slideUp(g.enabled?g.collapseDuration:0,function(){b.removeClass(_).attr(y,J),a(d).find("span").removeClass("sui-treeview-item-toggle-expanded").addClass("sui-treeview-item-toggle-collapsed")}))},_keydown:function(a){var b=this,c=!0;switch(a.keyCode){case j.UP:b._move(K,a);break;case j.DOWN:b._move(L,a);break;case j.LEFT:b._move(M,a);break;case j.RIGHT:b._move(N,a);break;case j.SPACE:b._selectedItem&&b._toggleCheck(b._selectedItem,!0);break;case j.ENTER:b._selectedItem&&b._activateItem(b._selectedItem,!0);break;default:c=!1}c&&a.preventDefault()},_getExpandedItems:function(b){var c=this;return c.element.children("."+ea).add(c.element.find("li.sui-treeview-item-list-expanded > ul.sui-treeview-list > li."+ea)).filter(function(){var b=c.getParent(a(this));return!b||c._isFullyExpanded(b)}).not("."+da)},_getNextItem:function(b){var c=this._getExpandedItems(),d=a(c).length,e=a(c).index(b);if(e<d-1)return a(a(c).get(e+1))},_getPrevItem:function(b){var c=this._getExpandedItems(),d=a(c).index(b);if(d>0)return a(a(c).get(d-1))},_getPrevParentItem:function(b){var c=this,d=c.getParent(b);if(d&&a(d).length>0)return c._isDisabled(d)?c._getPrevParentItem(d):d},_move:function(b,c){var d,e,f=this,g=f._selectedItem;f.getParent(a(g));if(q(g))if(b===K)e=f._getPrevItem(g);else if(b===L)e=f._getNextItem(g);else if(b===M){if(f._isExpanded(g))return void f._collapse(g,!0,!1);e=f._getPrevParentItem(g)}else{if(!f._isExpanded(g))return void f._expand(g,!0,!1);d=a(g).children("ul.sui-treeview-list").first(),d.length>0&&(e=a(d).children("li:not(."+da+")").first())}else e=a(f.element).find(P).first();q(e)&&a(e).length>0&&f._selectItem(e,!1,!0)},_getByPath:function(b,c){var d=this,e=b.shift(),f=a(c.children(P)[e]);return b.length>0?d._getByPath(b,f.children(Q)):a(c.children(P)[e])},_getListItem:function(b){return a(t(b)?this.getByPath(b,this.element):b)},getByPath:function(b){return this._getByPath([].slice.call(b),a(this.element))},isLoaded:function(b){return a(this._getListItem(b)).data($)===!0},hasChildren:function(a){return this._hasChildren(this.getItem(a))},getItem:function(b){return a(this._getListItem(b)).data(U)},getDataSource:function(b){return a(this._getListItem(b)).data(X)},getChildrenDataSource:function(b){var c=this,e=c._getListItem(b);return c.hasChildren(c.getItem(e))&&c.isLoaded(e)?a(e).children("ul.sui-treeview-item-list").first().data(Y):d},getParent:function(b){return a(this._getListItem(b)).data(W)},getDataSourceIndex:function(b){return a(this._getListItem(b)).data(V)},_getIndex:function(b){var c=this._getListItem(b);return a(c).index()},getPath:function(b){var c=this,d=a(b),e=[];do e.unshift(c._getIndex(d)),d=c.getParent(d);while(d&&d.length>0);return e},updateIndetermined:function(b){var c=this,d=c._getListItem(b);q(d)?c._updateChecked(a(d)):a(c.element).children(P).each(function(){c._updateChecked(a(this))})},expanded:function(){var a=this,b=[].slice.call(arguments),c=r(b[0])?b.shift():d,e=b[0],f=a._getListItem(e);return q(c)?void(c?t(e)?a._expandPath([].slice.call(e),!1,!1,b[1]):a._expand(f,!1,!1,b[1]):a._collapse(f,!1)):a._isExpanded(f)},selected:function(){var a,b=this,c=[].slice.call(arguments);return c.length>0?(a=b._getListItem(c[0]),void(a&&a.length>0&&b._selectItem(a,!0,!1))):b._selectedItem},enabled:function(){var b=this,c=[].slice.call(arguments),e=r(c[0])?c.shift():d,f=b._getListItem(c[0]);if(f&&!(a(f).length<=0))return q(e)?void(e?f.removeClass(da):f.addClass(da)):!b._isDisabled(f)},checked:function(){var b=this,c=[].slice.call(arguments),e=r(c[0])?c.shift():d,f=b._getListItem(c[0]);if(f&&!(a(f).length<=0))return q(e)?void b._setChecked(f,e,!1):f.data(Z)},_insertedItem:function(b,c){return b instanceof a?a(b):t(b)?this._getListItem(b):u(b)?this._renderItem(b,c).listItem:void 0},_beforeRemoveChild:function(b){var c=this;b&&b.children(Q).children(P).length<=1&&(a(c._getToggleEl(b)).css(R,S),b.removeClass(_))},_refreshParent:function(b){var c=a(b).parents(P).first();a(b).data(W,c&&c.length>0?c:null)},load:function(a,b){var c=this,d=c._getListItem(a);d&&d.length>0&&c._loadItem(d,!1,b)},append:function(){var b,c,d,e=this,f=[].slice.call(arguments),g=f[0],h=t(g)||g instanceof a,i=f[1],j=f[2];if(q(i)){if(c=e._getListItem(i),!(c&&a(c).length>0))return;d=a(c).children(Q).first()}else c=null,d=e.element;b=e._insertedItem(g,c),b&&(h&&e._beforeRemoveChild(e.getParent(b)),!c||e._isExpanded(c)?(b.appendTo(d),e._refreshParent(b),s(j)&&j.call(e,b)):e.hasChildren(c)?e._isExpanded(c)?(b.appendTo(d),e._refreshParent(b),s(j)&&j.call(e,b)):e._expand(c,!1,!1,function(){b.appendTo(d),e._refreshParent(b),s(j)&&j.call(e,b)}):e._isExpanded(c)?(b.appendTo(d),e._refreshParent(b),s(j)&&j.call(e,b)):(a(e._getToggleEl(c)).css(R,T),c.removeClass(_),b.appendTo(d),e._refreshParent(b),e._expand(c,!1,!1,function(){s(j)&&j.call(e,b)})))},insertBefore:function(){var b,c=this,d=[].slice.call(arguments),e=d[0],f=t(e)||e instanceof a,g=c._getListItem(d[1]);if(g&&g.length>0&&(b=c._insertedItem(e,c.getParent(g))))return f&&c._beforeRemoveChild(c.getParent(b)),b.insertBefore(g),c._refreshParent(b),b},insertAfter:function(){var b,c=this,d=[].slice.call(arguments),e=d[0],f=t(e)||e instanceof a,g=c._getListItem(d[1]);if(g&&g.length>0&&(b=c._insertedItem(e,c.getParent(g))))return f&&c._beforeRemoveChild(c.getParent(b)),b.insertAfter(g),c._refreshParent(b),b},remove:function(b){var c=this,d=t(b)||b instanceof a,e=c._getListItem(b);c.getParent(e);return!!(e&&e.length>0)&&(c._destroyItems(a(e).children(Q).first()),d&&c._beforeRemoveChild(c.getParent(e)),e.remove(),!0)},destroy:function(){var b=this,c=b.element,d=b._eventNS;b.dataSource&&b.dataSource.off(D+d),b._destroyItems(c),b._blurTimeout&&(clearTimeout(b._blurTimeout),b._blurTimeout=null),a(c).off(d).remove(),b._original.unwrap(),b._original.show(),b._original=b._wrapper=b._selectedItem=b._activeItem=null,g.fn.destroy.call(b)}}),f.defaults=e,b.ui.plugin("TreeView",f)}(jQuery,shield,this);
!function(a,b,c,d){var e,f,g=b.ui.Widget,h=(b.Class,b.Constants,b.format),i=document,j=(a.extend,a.map,a.each,a.proxy),k=b.error,l=b.is["boolean"],m=b.is.object,n=b.is.defined,o=(b.is.integer,b.to["int"],b.to.number,b.support,"close"),p="minimize",q="maximize",r="resize",s="scroll",t="pin",u="overflow",v="hidden",w="px",x="center",y=function(b){return a("<div/>").text(b).html()};e={title:"",titleBarButtons:["pin","minimize","maximize","close"],content:d,cls:d,visible:!0,pinned:!1,modal:!1,width:400,height:300,resizable:{maxWidth:d,maxHeight:d,minWidth:200,minHeight:150},draggable:!0,position:d,appendToBody:!1,events:{}},f=g.extend({init:function(){g.fn.init.apply(this,arguments),n(this.initialOptions.titleBarButtons)&&(this.options.titleBarButtons=this.initialOptions.titleBarButtons);var c,d,e=this,f=e.options,o=f.cls,p=f.dieOnError,q=f.titleBarButtons,r=f.resizable,s=f.draggable,t=f.content,u=f.position,v=a(e.element),w=!1;return"div"!==a(v).prop("tagName").toLowerCase()?void k("shieldWindow: Underlying element is not DIV",p):q&&q.length>0&&!b.ui.Button?void k("shieldWindow: The titleBarButtons setting requires ShieldUI Button to be loaded",p):(e._eventNS="shieldWindow"+e.getInstanceId(),f.appendToBody?(v.appendTo(i.body),e._parentIsBody=!0):e._parentIsBody="body"==v.parent().prop("tagName").toLowerCase(),e._origHtml=v.html(),v.empty(),v.addClass("sui-window"+(o?" "+o:"")),v.css({width:f.width,height:f.height,position:"absolute"}),e.titleBarEl=c=a('<div class="sui-window-titlebar"><div class="sui-window-title">'+f.title+'</div><div class="sui-window-icons"></div></div>').appendTo(v),e._initTitleBarButtons(),e.contentEl=d=a('<div class="sui-window-content"></div>').appendTo(v),e._fixContent(),m(u)?v.css(u):w=!0,r&&(l(r)&&(r={}),e.resizable=new b.ui.Resizable(v,r),e.resizable.on("resized",j(e._fixContent,e))),s&&(l(s)&&(s={}),s.handle=e.titleBarEl,e.draggable=new b.ui.Draggable(v,s)),e._hasIframe=!1,t?t.template?t.template.dataUrl?a.ajax({url:t.template.dataUrl,dataType:"json",success:function(a,b,c){e.content(h(t.template.body,a)),e._focusFirst()},error:function(a,b,c){e.content("Error occured while reading URL: "+b+" - "+c)}}):(e.content(h(t.template.body,t.template.data)),e._focusFirst()):t.remote?t.remote.iframe?(e._hasIframe=!0,e.content('<iframe class="sui-window-iframe" src="'+t.remote.url+'" style="border:none; border-width:0px; width:100%; height:100%;"></iframe>'),e._focusFirst()):e.contentEl.load(t.remote.url,function(){e._focusFirst()}):(e.content(e._origHtml),e._focusFirst()):(e.content(e._origHtml),e._focusFirst()),e._minimized=!1,e._maximized=!1,e._destroyed=!1,v.attr("role","dialog").attr("aria-labelledby",y(f.title)),e.pinned(!!f.pinned),e.visible(!!f.visible),void(w&&e.center()))},_focusFirst:function(){var b=a(this.contentEl).find(".sui-checkbox:not(.sui-checkbox-disabled), .sui-radiobutton:not(.sui-radiobutton-disabled), .sui-input:not(.sui-input-disabled), .sui-combobox:not(.sui-combobox-disabled), .sui-dropdown:not(.sui-dropdown-disabled), .sui-listbox:not(.sui-listbox-disabled), .sui-switch:not(.sui-switch-disabled), a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]").filter(":visible").first();a(b).length>0&&a(b).focus()},_initTitleBarButtons:function(){var b,c,d,e,f=this,g=f.options,h=g.titleBarButtons,i=g.modal;if(f.titleBarButtons={},h&&h.length>0){for(b=f.titleBarEl.find(".sui-window-icons"),e=0;e<h.length;e++)d=h[e],"pin"!==d&&"minimize"!==d&&"maximize"!==d&&"close"!==d||i&&"close"!==d||(c="pin"==d?"_onPin":"minimize"==d?"_onMinimize":"maximize"==d?"_onMaximize":d,f.titleBarButtons[d]=a('<button type="button"><div class="sui-sprite sui-window-button-icon sui-window-button-icon-'+d+'"></div></button>').appendTo(b).shieldButton({cls:"sui-window-button",events:{click:j(f[c],f,!0)}}).swidget());b.on("mousedown",function(a){return a.preventDefault(),a.stopPropagation(),!1})}},_destroyTitleBarButtons:function(){var a,b=this,c=b.titleBarButtons;for(a in c)c.hasOwnProperty(a)&&c[a].destroy();b.titleBarButtons={}},_createModal:function(){var b=this,d=a(b._parentIsBody?c:b.element.parent()),e=a(d).scrollTop(),f=a(d).scrollLeft();b._lockScroll(),b._modal=a('<div class="sui-window-modal"></div>').insertBefore(b.element).css({top:e,left:f})},_closeModal:function(){var b=this;a(b._modal).remove(),b._unlockScroll()},_lockScroll:function(){var b=this,c=b.element.parent();b._scrollTop=a(c).scrollTop(),b._scrollLeft=a(c).scrollLeft(),b._parentOverflow=a(c).css(u),c.css(u,v).scrollTop(b._scrollTop).scrollLeft(b._scrollLeft)},_unlockScroll:function(){var a=this,b=a.element.parent();b.css(u,a._parentOverflow).scrollTop(a._scrollTop).scrollLeft(a._scrollLeft)},_fixContent:function(){var b=this;a(b.contentEl).outerWidth(a(b.element).innerWidth()).innerHeight(a(b.element).innerHeight()-a(b.titleBarEl).outerHeight()),b._hasIframe&&a(b.contentEl).find(".sui-window-iframe").width(a(b.contentEl).width()).height(a(b.contentEl).height())},center:function(){var d=this,e=a(d.element);b.ui.Position.Set(e,d._parentIsBody?c:e.parent(),{source:x,target:x})},position:function(b){a(this.element).css(b)},getHeight:function(){a(this.element).css("height")},getWidth:function(){a(this.element).css("width")},getPosition:function(){var b=a(this.element);return{left:b.css("left"),top:b.css("top")}},content:function(){var b=this,c=a(b.contentEl),d=[].slice.call(arguments);return d.length>0?(c.empty(),void c.append(d[0])):c.html()},resize:function(b){a(this.element).css(b),this._fixContent()},_scroll:function(b){var d=this,e=a(d.element),f=d._parentIsBody;d._pinned&&e.css({left:d.originalPosition.left+a(f?c:e.parent()).scrollLeft()+w,top:d.originalPosition.top+a(f?c:e.parent()).scrollTop()+w})},_onPin:function(a){this.pinned(!this._pinned,a)},pinned:function(){var b,d,e=this,f=[].slice.call(arguments),g=a(e.element),h=e._parentIsBody,i=e.titleBarEl,k=i.find(".sui-window-button-icon-pin").length>0?i.find(".sui-window-button-icon-pin"):i.find(".sui-window-button-icon-unpin");return f.length<=0?e._pinned:(b=!!f[0],void(e._pinned!=b&&(f[1]&&(d=e.trigger(t,{pinned:b}),d.isDefaultPrevented())||(e._pinned=b,k.removeClass("sui-window-button-icon-pin sui-window-button-icon-unpin"),k.addClass(e._pinned?"sui-window-button-icon-pin":"sui-window-button-icon-unpin"),e._pinned?(e.originalPosition=g.position(),a(h?c:g.parent()).on(s+"."+e._eventNS,j(e._scroll,e)),e.draggable&&e.draggable.enabled(!1)):(a(h?c:g.parent()).off(s+"."+e._eventNS),e.origininalPosition=null,e.draggable&&e.draggable.enabled(!0))))))},_onMinimize:function(a){this.minimized(!0,a)},minimized:function(){var b,c,d,e=this,f=[].slice.call(arguments),g=a(e.element),h=a(e.contentEl),i=e.titleBarEl,j=e.titleBarButtons.minimize;return f.length<=0?e._minimized:(c=!!f[0],void(e._minimized!=c&&(f[1]&&(d=e.trigger(p,{minimized:c}),d.isDefaultPrevented())||(e._minimized=c,b=i.find(".sui-window-button-icon-minimize").length>0?i.find(".sui-window-button-icon-minimize"):i.find(".sui-window-button-icon-unminimize"),b.removeClass("sui-window-button-icon-minimize sui-window-button-icon-unminimize"),b.addClass(e._minimized?"sui-window-button-icon-unminimize":"sui-window-button-icon-minimize"),c?(e._onMinCurrHeight=g.height(),g.height(i.height()),h.hide(),e.resizable&&e.resizable.enabled(!1)):(g.height(e._onMinCurrHeight),h.show(),e.resizable&&e.resizable.enabled(!0)),j&&j.visible(!c)))))},_onMaximize:function(a){var b=this;b._minimized?b.minimized(!1,a):b.maximized(!b._maximized,a)},maximized:function(){var b,d,e,f,g=this,h=[].slice.call(arguments),i=a(g.element),k=g._beforeMaximize,l=a(g.titleBarEl);return h.length>0?(b=!!h[0],d=!!h[1],g._minimized&&g.minimized(!1,!1),g._maximized!=b&&(d&&(f=g.trigger(q,{maximized:b}),f.isDefaultPrevented())||(g._maximized=!!b,e=l.find(".sui-window-button-icon-maximize").length>0?l.find(".sui-window-button-icon-maximize"):l.find(".sui-window-button-icon-restore"),e.removeClass("sui-window-button-icon-maximize sui-window-button-icon-restore"),e.addClass(g._maximized?"sui-window-button-icon-restore":"sui-window-button-icon-maximize"),g._maximized?(g._beforeMaximize={top:i.css("top"),left:i.css("left"),width:i.width(),height:i.height()},g.resize({width:"100%",height:a(g._parentIsBody?c:i.parent()).height()}),g._lockScroll(),g.center(),g._parentIsBody&&a(c).on(r+"."+g._eventNS,j(g._onWinResizeMax,g))):(k&&(i.css({top:k.top,left:k.left}),g.resize({width:k.width,height:k.height})),g._unlockScroll(),g._parentIsBody&&(a(c).off(r+"."+g._eventNS),g._winResize=null)))),void 0):g._maximized},_onWinResizeMax:function(){var b=this;a(b.element).height(a(c).height()),b._fixContent()},close:function(a){var b,c=this;a&&(b=c.trigger(o),b.isDefaultPrevented())||c.destroy()},visible:function(){var a=this,b=[].slice.call(arguments);if(!a._destroyed)return b.length>0&&a.options.modal&&(b[0]?a._createModal():a._closeModal()),g.fn.visible.apply(a,arguments)},destroy:function(){var b=this,c=b.options.cls;b.visible(!1),b._destroyed=!0,b.resizable&&(b.resizable.destroy(),b.resizable=null),b.draggable&&(b.draggable.destroy(),b.draggable=null),b._destroyTitleBarButtons(),b.maximized(!1),b.pinned(!1),a(b.element).removeClass("sui-window"+(c?" "+c:"")),b._origHtml&&(a(b.element).html(b._origHtml),b._origHtml=null),g.fn.destroy.call(b)}}),f.defaults=e,b.ui.plugin("Window",f)}(jQuery,shield,this);
!function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n,o=b.ui.Widget,p=b.Class,q=(b.Constants.KeyCode,document),r=a.proxy,s=(a.each,a.extend),t=(a.map,a.contains),u=(a.trim,b.error,b.guid),v=b.format,w=b.is.defined,x=(b.is["boolean"],b.is.integer,b.is.func),y=(b.is.array,b.is.object,b.is.string),z=b.to.string,A=b.support.browser,B="disabled",C="focus",D="blur",E="click",F="keyup",G="keydown",H="formatting",I="text-formatting",J="font-and-colors",K="alignment",L="lists",M="links",N="sui-editor",O="styleWithCSS",P=function(){},Q=function(a,b,c,d){if(d)try{a.execCommand(b,!1,c)}catch(e){P("execCommand({0}, {1}) error: {3}",b,c,e)}else a.execCommand(b,!1,c)},R="about",S="About",T=function(b){return a("<div/>").html(b).text()},U="&#x44;&#x65;&#x6D;&#x6F;&#x20;&#x76;&#x65;&#x72;&#x73;&#x69;&#x6F;&#x6E;&#x20;&#x62;&#x79;";U+="&#x20;&#x3C;&#x61;&#x20;&#x68;&#x72;&#x65;&#x66;&#x3D;&#x22;&#x68;&#x74;&#x74;&#x70;&#x3A;&#x2F;&#x2F;&#x77;&#x77;&#x77;&#x2E;&#x73;&#x68;",e=function(b,c){var d,e,f,g;!b.getSelection&&c.selection&&(d=null,b.getSelection=function(){return null!=d?d:d=new f},c.createRange=function(){return new e},c.attachEvent("onkeydown",function(){return b.getSelection().setRangeAt(0,new e((!0)))}),c.attachEvent("onselectionchange",function(){var a,d,f;try{d=new e((!0))}catch(g){}if(d)return b.getSelection().setRangeAt(0,d),a=c.selection.createRange().parentElement(),"INPUT"===a.tagName||"TEXTAREA"===a.tagName?(f=b.getSelection().getRangeAt(0),a.selectionStart=f.selectionStart,a.selectionEnd=f.selectionEnd,a.selectionEnd):void 0}),e=b.Range=function(){var b=function(a){var b=this;a?b.range=c.selection.createRange():(b.range=c.body.createTextRange(),b.collapse(!0)),b.init()};return b.END_TO_END="EndToEnd",b.END_TO_START="EndToStart",b.START_TO_END="StartToEnd",b.START_TO_START="StartToStart",b.prototype.init=function(){var a,b,c,d,e,f,h=this;return b=h.range.parentElement(),h.commonAncestorContainer=b,h.collapsed=0===h.compareBoundaryPoints("StartToEnd",h),f=h.range.duplicate(),f.moveToElementText(b),a=h.range.text.length>0?0:1,e=g.findLength("StartToStart",f,h.range),c=g.findNodeByPos(b,e,a),h.startContainer=c.el,h.startOffset=c.offset,d=g.findLength("StartToEnd",f,h.range),c=g.findNodeByPos(b,d,1),h.endContainer=c.el,h.endOffset=c.offset,h.selectionStart=g.findLength("StartToStart",f,h.range,h),h.selectionEnd=g.findLength("StartToEnd",f,h.range,h),h.selectionEnd},b.prototype.select=function(){return this.range.select()},b.prototype.setStart=function(a,b){var c,d,e=this;if(g.getText(a).length>=b&&b>=0)return d=e.range.duplicate(),3===a.nodeType&&(c=g.findPosFromNode(a),d.moveToElementText(a.parentNode),d.moveStart("character",c+b)),e.range.compareEndPoints("StartToEnd",d)===-1&&e.range.setEndPoint("EndToStart",d),e.range.setEndPoint("StartToStart",d)},b.prototype.setEnd=function(a,b){var c,d,e=this;if(g.getText(a).length>=b&&b>=0)return d=e.range.duplicate(),3===a.nodeType&&(c=g.findPosFromNode(a),d.moveToElementText(a.parentNode),d.moveStart("character",c+b)),e.range.setEndPoint("EndToStart",d)},b.prototype.selectNodeContents=function(a){return this.range.moveToElementText(a)},b.prototype.collapse=function(a){var b=this;return a?b.range.setEndPoint("EndToStart",b.range):b.range.setEndPoint("StartToEnd",b.range)},b.prototype.deleteContents=function(){},b.prototype.insertNode=function(b){var d=b.outerHTML?b.outerHTML:a(c.createElement("div")).append(a(b).clone()).html();this.range.pasteHTML(d)},b.prototype.compareBoundaryPoints=function(a,b){return this.range.compareEndPoints(a,b.range)},b.prototype.cloneRange=function(){var a=new b;return a.range=this.range.duplicate(),a.init(),a},b.prototype.detach=function(){return delete this.range},b.prototype.getBoundingClientRect=function(){var a=this.range.getBoundingClientRect();return{width:a.right-a.left,height:a.bottom-a.top,left:a.left,right:a.right,bottom:a.bottom,top:a.top}},b.prototype.toString=function(){return this.range.text||""},b}(),f=function(){var a=function(){this.selection=c.selection,this.ranges=[],this.init()};return a.prototype.init=function(){var a,b,c,d,f,g=this;if(g.rangeCount=g.ranges.length,g.rangeCount)return b=g.ranges[0],null==g.prev&&(g.prev=b),0===b.compareBoundaryPoints(e.END_TO_END,g.prev)?(d=["end","start"],a=d[0],c=d[1]):(f=["start","end"],a=f[0],c=f[1]),g.anchorNode=b[""+a+"Container"],g.anchorOffset=b[""+a+"Offset"],g.focusNode=b[""+c+"Container"],g.focusOffset=b[""+c+"Offset"],g.isCollapsed=g.anchorNode===g.focusNode,g.isCollapsed},a.prototype.getRangeAt=function(a){return this.ranges[a]},a.prototype.setRangeAt=function(a,b){var c=this;return c.prev=c.ranges[a],c.ranges[a]=b,c.init()},a.prototype.removeAllRanges=function(){return this.ranges=[],this.init()},a.prototype.addRange=function(a){var b,c,d,e,f,g=this;for(g.ranges.push(a),g.init(),e=g.ranges,f=[],c=0,d=e.length;c<d;c++)b=e[c],f.push(b.select());return f},a.prototype.deleteFromDocument=function(){return this.selection.clear()},a.prototype.toString=function(){return this.ranges[0].toString()},a}(),g={convertLineBreaks:function(a){return a.replace(/\r\n/g,"\n")},stripLineBreaks:function(a){return a.replace(/\r\n/g,"")},getText:function(a){return a.innerText||a.nodeValue},findLength:function(a,b,c,d){var e=b.duplicate();switch(a){case"StartToStart":e.setEndPoint("EndToStart",c);break;case"StartToEnd":e.setEndPoint("EndToEnd",c)}return d?g.convertLineBreaks(e.text).length:g.stripLineBreaks(e.text).length},findNodeByPos:function(a,b,c){var d,e;return null==c&&(c=0),e={length:0,el:a,offset:0},d=function(a,b,c,e){var f,g,h,i,j;for(i=a.childNodes,j=[],g=0,h=i.length;g<h;g++)if(f=i[g],!e.found)if(3===f.nodeType){if(e.length+f.length+c>b){e.found=!0,e.el=f,e.offset=b-e.length;break}j.push(e.length+=f.length)}else j.push(d(f,b,c,e));return j},d(a,b,c,e),e},findPosFromNode:function(a){var b,c,d;return c={pos:0},d=a.parentNode,b=function(a,c,d){var e,f,g,h,i;for(h=a.childNodes,i=[],f=0,g=h.length;f<g;f++)if(e=h[f],!d.found){if(e===c){d.found=!0;break}3===e.nodeType?i.push(d.pos+=e.length):e.hasChildNodes()?i.push(b(e,c,d)):i.push(void 0)}return i},b(d,a,c),c.pos}})},U+="&#x69;&#x65;&#x6C;&#x64;&#x75;&#x69;&#x2E;&#x63;&#x6F;&#x6D;&#x22;&#x20;&#x74;&#x61;&#x72;&#x67;&#x65;&#x74;&#x3D;&#x22;&#x5F;&#x62;&#x6C;&#x61;&#x6E;&#x6B;&#x22;&#x3E;&#x53;&#x68;&#x69;&#x65;&#x6C;&#x64;&#x20;&#x55;&#x49;&#x3C;&#x2F;&#x61;&#x3E;",f=p.extend({init:function(a,b){var c=this;c._editor=a,y(b)?l[b]?(c.options=s(!0,{},l[b]),c._default=!0):c.options={name:b}:c.options=s(!0,{},b)},_renderButton:function(b){var c=this,d=c._editor,e=c.options,f=e.name,g=e.tooltip||d.options.messages[f]||"",h=e.cls||(c._default?"sui-editor-toolbar-icon sui-editor-toolbar-icon-"+f.toLowerCase():""),i=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-button",events:{click:function(a){c.execute(a)}}},e.controlOptions);c._widget=a('<button type="button" title="'+g+'"/>').append(e.text?e.text:"<span"+(h?' class="'+h+'"':"")+">&nbsp;</span>").appendTo(b).shieldButton(i).swidget()},render:function(b){var c,d=this,e=d.options,f=e.template;w(f)?(c=v.call(d._editor,f,e),c&&a(c).appendTo(b)):d._renderButton(b)},execute:function(a){var b=this,c=b.options,d=c.exec,e=b._editor,f=function(){e._afterCommand(a,c,b.getState())};x(d)?d.call(e,c,f):b.executeCommand(f)},executeCommand:function(a){var b=this,c=b.options,d=c.styleWithCSS,e=b._editor,f=e.getDoc();e.focus(!0),d&&Q(f,O,!0,!0),Q(f,c.name,b.getValue()),d&&Q(f,O,!1,!0),x(a)&&a.call(b)},getValue:function(){},setValue:function(a){},getState:function(){var a,b,c,d,e=this,f=e.options,g=f.name,h=f.styleWithCSS,i=e._editor,j=i.getDoc(),k=!0;h&&Q(j,O,!0,!0);try{k=j.queryCommandIndeterm(g)}catch(l){P("queryCommandIndeterm({0}) error: {1}",g,l)}try{a=j.queryCommandEnabled(g)}catch(l){P("queryCommandEnabled({0}) error: {1}",g,l)}if(!k)try{b=j.queryCommandState(g)}catch(l){P("queryCommandState({0}) error: {1}",g,l)}try{c=j.queryCommandSupported(g)}catch(l){P("queryCommandSupported({0}) error: {1}",g,l)}try{d=j.queryCommandValue(g)}catch(l){P("queryCommandValue({0}) error: {1}",g,l)}return h&&Q(j,O,!1,!0),{enabled:a,state:b,supported:c,value:d}},refresh:function(){var a,b=this,c=b._widget;b._default&&(a=b.getState(),a.enabled?(c.visible(!0),b.setValue(a)):c.visible(!1))},destroy:function(){var a=this;a._widget&&x(a._widget.destroy)&&a._widget.destroy(),a._default=a._widget=d}}),f.getInstance=function(a,b){var c="";return y(b)?l[b]&&(c=l[b].controlType):c=b.controlType,c||(c=f),new c(a,b)},g=f.extend({}),h=g.extend({init:function(a,b){g.fn.init.call(this,a,b),s(!0,this.options,{controlOptions:{toggle:!0}})},getValue:function(){return!!this._widget.checked()},setValue:function(a){this._widget.checked(!!a.state)}}),j=f.extend({render:function(b){var c=this,d=(c._editor,c.options),e=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-select",events:{itemclick:function(a){c.execute(a)}}},d.controlOptions);c._widget=a("<select/>").appendTo(b).shieldComboBox(e).swidget()},getValue:function(){return this._widget.value()},setValue:function(a){this._widget.value(a.value)}}),i=j.extend({init:function(a,b){j.fn.init.call(this,a,b),s(!0,this.options,{controlOptions:{editable:!1}})}}),k=f.extend({render:function(b){var c=this,d=c._editor,e=c.options,f=s(!0,{cls:"sui-editor-toolbar-item sui-editor-toolbar-colorpicker",events:{select:function(a){this.hidePalette(),c.execute(a),setTimeout(function(){d.focus()})}}},e.controlOptions);c._widget=a('<input type="color"/>').appendTo(b).shieldColorPicker(f).swidget()},getValue:function(){return this._widget.value().hex()},setValue:function(a){this._widget.value(a.value)}}),l={formatBlock:{name:"formatBlock",group:H,controlType:i,controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",dataSource:{data:[{text:"Paragraph",value:"p"},{text:"Quotation",value:"blockquote"},{text:"Heading 1",value:"h1"},{text:"Heading 2",value:"h2"},{text:"Heading 3",value:"h3"},{text:"Heading 4",value:"h4"},{text:"Heading 5",value:"h5"},{text:"Heading 6",value:"h6"}]}}},removeFormat:{name:"removeFormat",group:H,controlType:g},fontName:{name:"fontName",group:J,styleWithCSS:!0,controlType:i.extend({setValue:function(a){var b,c=this._widget,d=a.value;if(c.value(d),c.selected()<0)for(b=0;b<c.dataSource.view.length;b++)if(c.dataSource.view[b].text==d){c.selected(b);break}c.selected()<0&&c.selected(0)}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"",dataSource:{data:[{text:"Inherited",value:""},{text:"Arial",value:"Arial,Helvetica,sans-serif"},{text:"Courier New",value:'"Courier New",Courier,monospace'},{text:"Georgia",value:"Georgia,serif"},{text:"Tahoma",value:"Tahoma,Geneva,sans-serif"},{text:"Times New Roman",value:'"Times New Roman",Times,serif'},{text:"Verdana",value:"Verdana,Geneva,sans-serif"}]}}},fontSize:{name:"fontSize",group:J,controlType:i.extend({setValue:function(a){this._widget.value(z(a.value)||"")}}),controlOptions:{valueTemplate:"{value}",textTemplate:"{text}",value:"inherit",dataSource:{data:[{text:"Inherited",value:""},{text:"1 (8pt)",value:"1"},{text:"2 (10pt)",value:"2"},{text:"3 (12pt)",value:"3"},{text:"4 (14pt)",value:"4"},{text:"5 (18pt)",value:"5"},{text:"6 (24pt)",value:"6"},{text:"7 (36pt)",value:"7"}]}}},foreColor:{name:"foreColor",group:J,controlType:k,controlOptions:{value:"transparent",palette:"basic",showLetter:!0}},backColor:{name:"backColor",group:J,styleWithCSS:!0,controlType:k,controlOptions:{value:"transparent",palette:"basic"}},bold:{name:"bold",group:I,controlType:h},italic:{name:"italic",group:I,controlType:h},underline:{name:"underline",group:I,controlType:h},strikeThrough:{name:"strikeThrough",group:I,controlType:h},subscript:{name:"subscript",group:I,controlType:h},superscript:{name:"superscript",group:I,controlType:h},justifyLeft:{name:"justifyLeft",group:K,controlType:h.extend({setValue:function(a){this._widget.checked(!!(A.ie?a.value:a.state))}})},justifyCenter:{name:"justifyCenter",group:K,controlType:h.extend({setValue:function(a){this._widget.checked(!!(A.ie?a.value:a.state))}})},justifyRight:{name:"justifyRight",group:K,controlType:h.extend({setValue:function(a){this._widget.checked(!!(A.ie?a.value:a.state))}})},justifyFull:{name:"justifyFull",group:K,controlType:h.extend({setValue:function(a){this._widget.checked(!!(A.ie?a.value:a.state))}})},insertUnorderedList:{name:"insertUnorderedList",group:L,controlType:g},insertOrderedList:{name:"insertOrderedList",group:L,controlType:g},indent:{name:"indent",group:L,controlType:g},outdent:{name:"outdent",group:L,controlType:g},createLink:{name:"createLink",group:M,controlType:g.extend({executeCommand:function(c){var d,e=this,f=e._editor,g=u();d=new b.ui.Window(a('<div id="'+g+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Hyperlink",titleBarButtons:["close"],modal:!0,height:220,content:{template:{body:function(){return[a('<div style="padding:5px; margin-top:10px;"/>').append(a("<label>URL</label>"),a('<input type="text" value="http://" id="url_'+g+'" class="sui-input" style="width:220px;"/>')),a('<div style="padding:5px;"/>').append(a("<label>Tooltip</label>"),a('<input type="text" value="" id="title_'+g+'" class="sui-input" style="width:220px;"/>')),a('<div style="padding:5px;"/>').append(a("<label>New window</label>"),a('<input type="checkbox" id="newwin_'+g+'"/>')),a('<div class="sui-editor-dialog-buttons"/>').append(new b.ui.Button(a("<button>Insert</button>"),{events:{click:function(){f.focus(!0),Q(f.getDoc(),"createLink",g);var b=a(f.element).find('a[href="'+g+'"]'),h=a("#url_"+g).val(),i=(a("#text_"+g).val(),a("#title_"+g).val()),j=a("#newwin_"+g).swidget().checked();a(b).attr("href",h),i&&a(b).attr("title",i),j&&a(b).attr("target","_blank"),d.close(),a("#"+g).remove(),x(c)&&c.call(e)}}}).element,new b.ui.Button(a("<button>Cancel</button>"),{events:{click:function(){d.close(),a("#"+g).remove(),x(c)&&c.call(e)}}}).element)]}}},appendToBody:!0,events:{close:function(){a("#"+g).remove(),x(c)&&c.call(e)}}}),a("#newwin_"+g).shieldCheckBox()}})},unlink:{name:"unlink",group:M,controlType:g},insertImage:{name:"insertImage",group:"insert-img",controlType:g.extend({executeCommand:function(c){var d,e=this,f=e._editor,g=u();d=new b.ui.Window(a('<div id="'+g+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-insertimage",title:"Insert Image",titleBarButtons:["close"],modal:!0,height:260,content:{template:{body:function(){return[a('<div style="padding:5px; margin-top:10px;"/>').append(a("<label>URL</label>"),a('<input type="text" value="http://" id="url_'+g+'" class="sui-input" style="width:220px;"/>')),a('<div style="padding:5px;"/>').append(a("<label>Alternate text</label>"),a('<input type="text" value="" id="alt_'+g+'" class="sui-input" style="width:220px;"/>')),a('<div style="padding:5px;"/>').append(a("<label>Width</label>"),a('<input type="text" value="" id="width_'+g+'" class="sui-input" style="width:80px;"/>')),a('<div style="padding:5px;"/>').append(a("<label>Height</label>"),a('<input type="text" value="" id="height_'+g+'" class="sui-input" style="width:80px;"/>')),a('<div class="sui-editor-dialog-buttons"/>').append(new b.ui.Button(a("<button>Insert</button>"),{events:{click:function(){var b=a("#alt_"+g).val(),h=a("#width_"+g).val(),i=a("#height_"+g).val();f.paste('<img src="'+a("#url_"+g).val()+'"'+(b?' alt="'+b+'"':"")+(h?' width="'+h+'"':"")+(i?' height="'+i+'"':"")+"/>"),d.close(),a("#"+g).remove(),x(c)&&c.call(e)}}}).element,new b.ui.Button(a("<button>Cancel</button>"),{events:{click:function(){d.close(),a("#"+g).remove(),x(c)&&c.call(e)}}}).element)]}}},appendToBody:!0,events:{close:function(){a("#"+g).remove(),x(c)&&c.call(e)}}})}})},about:{name:R,group:"view-"+R,tooltip:S,controlType:g.extend({refresh:function(){},executeCommand:function(c){var d,e=this,f=u();d=new b.ui.Window(a('<div id="'+f+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-"+R,title:S,titleBarButtons:["close"],modal:!0,height:170,content:{template:{body:function(){return[a('<div style="text-align:center; margin-top:30px; margin-bottom:20px;"/>').append(T(U)),a('<div class="sui-editor-dialog-buttons"/>').append(new b.ui.Button(a("<button>Close</button>"),{events:{click:function(){d.close(),a("#"+f).remove(),x(c)&&c.call(e)}}}).element)]}}},appendToBody:!0,events:{close:function(){a("#"+f).remove(),x(c)&&c.call(e)}}})}})},viewHtml:{name:"viewHtml",group:"view-html",controlType:g.extend({refresh:function(){},executeCommand:function(c){var d,e,f=this,g=f._editor,h=u();e=function(){a("#"+h+" textarea").outerHeight(a("#"+h+" .sui-window-content").innerHeight()-a("#"+h+" .sui-editor-dialog-buttons").outerHeight()-10)},d=new b.ui.Window(a('<div id="'+h+'"/>'),{cls:"sui-editor-dialog sui-editor-dialog-viewhtml",title:"View HTML",titleBarButtons:["close"],modal:!0,resizable:{events:{resize:e}},content:{template:{body:function(){return[a("<div/>").append(a('<textarea class="sui-input"/>').val(g.value())),a('<div class="sui-editor-dialog-buttons"/>').append(new b.ui.Button(a("<button>Update</button>"),{events:{click:function(){g.value(a("#"+h+" textarea").val()),d.close(),a("#"+h).remove(),x(c)&&c.call(f)}}}).element,new b.ui.Button(a("<button>Cancel</button>"),{events:{click:function(){d.close(),a("#"+h).remove(),x(c)&&c.call(f)}}}).element)]}}},appendToBody:!0,events:{close:function(){a("#"+h).remove(),x(c)&&c.call(f)}}}),e()}})}},m={cls:d,enabled:!0,domain:d,height:d,commands:["formatBlock","bold","italic","underline","justifyLeft","justifyCenter","justifyRight","insertUnorderedList","insertOrderedList","createLink","unlink","insertImage"],messages:{format:"Format",removeFormat:"Remove formatting",fontName:"Font family",fontSize:"Font size",foreColor:"Font color",backColor:"Background color",bold:"Bold",italic:"Italic",underline:"Underline",strikeThrough:"Strikethrough",superscript:"Superscript",subscript:"Subscript",justifyLeft:"Align text left",justifyCenter:"Center text",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Add indentation",outdent:"Remove indentation",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",viewHtml:"View HTML"},events:{}},n=o.extend({init:function(){o.fn.init.apply(this,arguments),w(this.initialOptions.commands)&&(this.options.commands=this.initialOptions.commands);var b,c,d,f,g=this,h=a(g.element),i=g.options,j=(i.dieOnError,i.cls),k=i.height;g._original=b=a(g.element),g._tagname=c=b.prop("tagName").toLowerCase(),f=g._eventNS=".shieldEditor"+g.getInstanceId(),"textarea"==c?(g._inline=!1,g._wrapper=b.wrap('<div class="'+N+" "+N+"-default"+(j?" "+j:"")+'"/>').parent(),b.hide(),g._iframe=d=a('<iframe class="sui-editor-iframe" frameborder="0"'+(w(k)?' height="'+k+'"':"")+"/>").appendTo(g._wrapper),g.value(b.val(),!0),g.element=h=d.contents().find("body")):(g._inline=!0,h.addClass(N+" "+N+"-inline"+(j?" "+j:"")).attr("autocorrect","off").prop("contentEditable","true")),g._initEvents(),e(g.getWin(),g.getDoc()),g._initToolbar(),a(q).on(E+f,r(g._docClick,g)),g.enabled(i.enabled)},refresh:function(a){this.refreshWithElement(this._original,a)},_isInside:function(b){var c=this,d=a(c.element),e=a(c._toolbar);return d.get(0)===b||e.get(0)===b||t(d.get(0),b)||t(e.get(0),b)},_saveSelections:function(){var a,b,c=this;if(!c._inline&&(c._savedSelections=[],a=c.getSelection(),a.rangeCount))for(b=0;b<a.rangeCount;b++)c._savedSelections.push(a.getRangeAt(b))},_restoreSelections:function(){var a,b,c=this;if(!c._inline){if(c._savedSelections&&c._savedSelections.length>0)for(a=c.getSelection(),a.removeAllRanges(),b=0;b<c._savedSelections.length;b++)a.addRange(c._savedSelections[b]);c._savedSelections=[]}},_focus:function(c){var d=this,e=a(d.element),f=a(d._toolbar);d._inline&&(f.show(),e.addClass("sui-editor-inline-focus"),d._toolbarMoved||(f.outerWidth(e.outerWidth()),b.ui.Position.Set(f,e,{source:"left bottom",target:"left top"}))),d._restoreSelections(),d.refreshCommands()},_blur:function(a){this._saveSelections(),this._syncValue()},_click:function(a){this.refreshCommands(),this._syncValue()},_docClick:function(a){var b=this;b._inline&&!b._isInside(a.target)&&b._hideToolbar()},_keydown:function(a){this.trigger(G,{domEvent:a})},_keyup:function(a){var b=this;b.refreshCommands(),b._syncValue(),b.trigger(F,{domEvent:a})},_syncValue:function(){var b,c=this,d=[].slice.call(arguments);c._inline||(b=d.length>0?d[0]:a(c.getDoc().body).html(),a(c._original).val(b))},_hideToolbar:function(){this._toolbar.hide(),this.element.removeClass("sui-editor-inline-focus")},_initToolbar:function(){var b,c,d,e,g,h,i,j=this,k=j.options,l=k.commands,m=(k.messages,j._inline);for(j._commands=[],j._toolbar=b=a('<div class="sui-editor-toolbar"/>'),m?(b.addClass("sui-editor-toolbar-inline").appendTo(q.body),b.shieldDraggable().swidget().one("drag",function(){j._toolbarMoved=!0}),j._toolbarMoved=!1):b.prependTo(j._wrapper),i=0;i<l.length;i++)c=f.getInstance(j,l[i]),d=c.options.group,h=d&&e===d?g:a('<div class="sui-editor-toolbar-group"/>').appendTo(b),c.render(h),j._commands.push(c),e=d,g=h;c=f.getInstance(j,R),d=c.options.group,h=d&&e===d?g:a('<div class="sui-editor-toolbar-group"/>').appendTo(b),c.render(h),j._commands.push(c),e=d,g=h,m&&b.hide()},_afterCommand:function(a,b,c){var d=this;d._syncValue(),d.refreshCommands(),d.trigger("execute",{domEvent:a,commandName:b.name,state:c})},refreshCommands:function(){var a,b=this,c=b._commands||[];if(!b._refreshInProgress){for(b.focus(!0),b._refreshInProgress=!0,a=0;a<c.length;a++)c[a].refresh();b._refreshInProgress=!1}},_getWrapper:function(){return this._inline?this.element:this._wrapper},getWin:function(){var b,d=this;return d._inline?c:(b=a(d._iframe).get(0),b.contentWindow||b.contentDocument)},getDoc:function(){var b,c=this;return c._inline?q:(b=a(c._iframe).get(0),(b.contentWindow||b.contentDocument).document)},focus:function(b){var c,d=this;b&&!d._refreshInProgress&&(d._refreshInProgress=!0,c=!0),a(d._inline?d.element:d.getDoc().body).focus(),!d._inline&&A.ie&&d._focus(),c&&(d._refreshInProgress=!1)},execute:function(a,b){Q(this.getDoc(),a,b)},createRange:function(){return this.getDoc().createRange()},getRange:function(){return this.focus(!0),this.getSelection().getRangeAt(0)},getSelection:function(){return this.getWin().getSelection()},selectRange:function(a){var b=this,c=b.getSelection();b.focus(!0),c.removeAllRanges(),c.addRange(a),b.refreshCommands()},paste:function(a){var b,c,d,e,f=this,g=f.getDoc(),h=f.getRange();for(f.focus(!0),h.deleteContents(),b=g.createElement("div"),b.innerHTML=a,c=g.createDocumentFragment();d=b.firstChild;)e=c.appendChild(d);h.insertNode(c),f._syncValue(),f.refreshCommands()},update:function(){this._syncValue()},_initEvents:function(b){var c=this,d=c._eventNS,e=A.ie;w(b)||(b=c._inline?c.element:e?c.getWin():c.getDoc()),e&&(c.getDoc().body.onbeforedeactivate=null),a(b).off(d).on(C+d,r(c._focus,c)).on(E+d,r(c._click,c)).on(G+d,r(c._keydown,c)).on(F+d,r(c._keyup,c)),e?c.getDoc().body.onbeforedeactivate=r(c._blur,c):a(b).on(D+d,r(c._blur,c))},_getIframeStyles:function(){return"<style>html,body{margin:0;padding:2px;}p{margin:0 0 0.5em 0;}</style>"},_getIframeScripts:function(){var a=this.options.domain;return a?'<script type="text/javascript">document.domain="'+a+'";</script>':""},value:function(){var b,c,d,e=this,f=[].slice.call(arguments),g=e._inline,h=a(e._original);return f.length>0?(c=f[0],d=f[1],g?a(e.element).html(c):(b=e.getDoc(),b.open().write('<head><meta charset="utf-8">'+e._getIframeStyles()+e._getIframeScripts()+'</head><body contenteditable="true" autocorrect="off">'+c+"</body>"),b.close(),e.element=e.getDoc().body,e._initEvents(b),d||e._syncValue(c)),void 0):g?h.html():a(e.getDoc().body).html()},hide:function(){a(this._getWrapper()).hide()},show:function(){a(this._getWrapper()).show()},isVisible:function(){return a(this._getWrapper()).is(":visible")},enabled:function(){var b,c=this,d=[].slice.call(arguments);return d.length>0?(b=!!d[0],b?a(c._getWrapper()).removeAttr(B).removeClass("sui-editor-disabled"):a(c._getWrapper()).attr(B,B).addClass("sui-editor-disabled"),c._enabled=b,void 0):c._enabled},destroy:function(){var b,c=this,e=c.options,f=e.cls,g=c._original,h=c._eventNS;if(a(c.element).off(h),a(q).off(h),c._toolbar){if(c._commands){for(b=0;b<c._commands.length;b++)c._commands[b].destroy();c._commands=d}a(c._toolbar).off(h).remove(),c._toolbar=d}c._inline?a(g).removeAttr("autocorrect").prop("contentEditable","off").removeClass(N+" "+N+"-inline"+(f?" "+f:"")):(a(c._iframe).remove(),a(g).unwrap(),a(g).show()),c._inline=c._iframe=c._wrapper=c._toolbarMoved=c._savedSelections=d,o.fn.destroy.call(c)}}),n.defaults=m,b.ui.plugin("Editor",n)}(jQuery,shield,this);